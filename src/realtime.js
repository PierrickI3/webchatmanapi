!function(){if("undefined"!=typeof console&&null!==console?console:console={log:function(){},info:function(){},warn:function(){},error:function(){}},void 0===window.Realtime){var e=function(){throw new Error("Requirejs has been hidden inside realtime.js")};require=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;o=e("ltx"),i=e("lodash"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._actives=null,this._updateQueue=[],this.server.on("rosterItem",function(e){return function(t){var n;return n=t.type,e.emit(n)}}(this)),this.server.on("disconnect",function(e){return function(){return e.onDisconnect()}}(this)),this.server.on("connect",function(e){return function(){return e.onConnect()}}(this)),this._initialActivesListener=null,this._fallbackActiveRequestTimeout=null}return s(t,e),t.expose={setActive:function(e){return this._setOpen(e)},setOpen:function(e){return this._setOpen(e)},setInactive:function(e){return this._setClosed(e)},setClosed:function(e){return this._setClosed(e)},getActiveChats:function(e){return Realtime.debug("active","getActiveChats called",this.active),this._actives?e(null,this._actives):(this.active||(this.active=!0,this.realtime.features["orgspan:activeChats"]=!0,this._sendRequest()),Realtime.debug("active","waiting for _actives"),this.once("actives",function(t){return function(){return Realtime.debug("active","returning _actives",t._actives),e(null,t._actives)}}(this)))}},t.exposeEvents=["activeChat","activeChatsSubscribed"],t.stanzas={subscribeOrUpdateResult:function(e){var t;return e.is("iq")&&"result"===e.attrs.type&&("activeChatsSet"===(t=e.attrs.id)||"activeChatsSub"===t)},activeChatsResult:function(e){return e.is("iq")&&"result"===e.attrs.type&&null!=e.getChildByAttr("node","orgspan:activeChats",null,!0)&&"activeChatsSub"!==e.attrs.id},activeMessage:function(e){var t,n;return e.is("message")&&"orgspan:activeChats"===(null!=(t=e.getChild("event","http://jabber.org/protocol/pubsub#event"))&&null!=(n=t.getChild("items"))?n.attrs.node:void 0)}},t.prototype.subscribeOrUpdateResult=function(e){if(e.getChildByAttr("subscription","subscribed",null,!0))return this.emit("activeChatsSubscribed")},t.prototype.onConnect=function(){if(Realtime.debug("guest","ActiveChatController is active?",this.active),this.active)return this._fallbackActiveRequestTimeout=setTimeout(function(e){return function(){return e.realtime._logger.warn("Active chat list did not come from the server in less than 30 seconds. The list will be explicitly requested"),e._cleanupInitialActivesFallback(),e._sendRequest()}}(this),3e4),this._initialActivesListener=function(e){return function(){return e._cleanupInitialActivesFallback()}}(this),this.once("actives",this._initialActivesListener)},t.prototype._cleanupInitialActivesFallback=function(){if(this._initialActivesListener&&(this.removeListener("actives",this._initialActivesListener),this._initialActivesListener=null),this._fallbackActiveRequestTimeout)return clearTimeout(this._fallbackActiveRequestTimeout),this._fallbackActiveRequestTimeout=null},t.prototype.onDisconnect=function(){return this._cleanupInitialActivesFallback(),this._actives=null,this._updateQueue=[]},t.prototype.activeChatsResult=function(e){var t,n,r,i,o,s,a,c,u,l,f,p,h,d,g,m;for(s=e.getChildByAttr("node","orgspan:activeChats",null,!0),Realtime.debug("active","got activeChats result",s),f=this._actives||{},this._actives={},p=s.getChildren("item"),i=0,u=p.length;i<u;i++)n=p[i],h=n.attrs,g=h.type,c=h.last,o=h.id,r=h.closed,d=h.subject,c&&(c=new Date(c)),r&&(r=new Date(r)),t=null==r,this._actives[o]={active:t,type:g,last:c,closed:r,subject:d},this.emit("activeChat",{jid:o,active:t,type:g,last:c,closed:r,subject:d});for(a in f)l=f[a],this._actives[a]||(t=!1,g=l.type,c=l.last,r=l.closed,d=l.subject,this.emit("activeChat",{jid:a,active:t,type:g,last:c,closed:r,subject:d}));return m=this._updateQueue,this._updateQueue=[],m.forEach(function(e){return e()}),this.emit("actives")},t.prototype.activeMessage=function(e){var t,n,r,i,o,s,a,c,u,l,f,p,h,d,g;for(Realtime.debug("active","activeMessage",e),a=null!=(l=e.getChild("event","http://jabber.org/protocol/pubsub#event"))?l.getChild("items"):void 0,f=a.children,o=0,u=f.length;o<u;o++)if(r=f[o],"item"===(p=r.name)||"retract"===p){if(h=r.attrs,s=h.id,g=h.type,c=h.last,i=h.closed,d=h.subject,r.is("item")?t=!0:r.is("retract")&&(t=!1),Realtime.debug("active","set",{id:s,active:t,type:g,last:c,closed:i},r),c&&(c=new Date(c)),i&&(i=new Date(i)),n={active:t,type:g,last:c,closed:i,subject:d},!this._actives)return void this._updateQueue.push(this._updateActives.bind(this,r.attrs.id,n));this._updateActives(r.attrs.id,n)}},t.prototype._updateActives=function(e,t){var n;return this._actives[e]=t,n=i.clone(t),n.jid=e,this.emit("activeChat",n)},t.prototype._setOpen=function(e){var n,r;if(this.active){if(!this._actives)return void this._updateQueue.push(t.expose.setActive.bind(this,e));if(!0!==(null!=(n=this._actives[e])?n.active:void 0))return Realtime.debug("active","setting",e,"as active"),r=new o.Element("iq",{type:"set",to:"pubsub."+this.server.jid.domain,from:this.server.jid.toString(),id:"activeChatsSet"}),r.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("publish",{node:"orgspan:activeChats"}).c("item",{id:e,type:e.match(/@conference/)?"room":"person"}),this.server.send(r)}},t.prototype._setClosed=function(e){var t,n;if(this.active){if(!this._actives)return void this._updateQueue.push(this._setClosed.bind(this,e));if(!1!==(null!=(t=this._actives[e])?t.active:void 0))return Realtime.debug("active","setting",e,"as inactive"),n=new o.Element("iq",{type:"set",to:"pubsub."+this.server.jid.domain,from:this.server.jid.toString(),id:"activeChatsSet"}),n.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("retract",{node:"orgspan:activeChats"}).c("item",{id:e,type:e.match(/@conference/)?"room":"person"}),this.server.send(n)}},t.prototype._sendRequest=function(){return Realtime.debug("active","active _sendRequest",{discovered:this.server.discovered}),this.realtime.connected?!this.realtime.features["orgspan:actives"]||this.server.discovered?this.realtime.getRoster(function(e){return function(){return e.realtime.getGroups(function(){var t;return Realtime.debug("active","sending activeChats request"),t=new o.Element("iq",{type:"set",from:e.server.jid.toString(),to:"pubsub."+e.server.jid.domain,id:"activeChatsSub"}),t.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("subscribe",{node:"orgspan:activeChats",jid:e.server.jid.toString()}),e.server.send(t),t=new o.Element("iq",{from:e.server.jid.toString(),type:"get"}),t.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("items",{node:"orgspan:activeChats"}),e.server.send(t)})}}(this)):void 0:this.server.once("connected",function(e){return function(){return e._sendRequest()}}(this))},t}(r)},{"./framework/Controller.coffee":17,lodash:144,ltx:145}],2:[function(e,t,n){var r,i,o,s,a,c=function(e,t){return function(){return e.apply(t,arguments)}},u=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=e("./framework/Controller.coffee"),i="pubsub.inin.com",r="purecloud:carrierpigeon",a=function(e){var t,n;return!(!e.is("iq")||"result"!==e.attrs.type)&&(!!(n=null!=(t=e.getChild("pubsub","http://jabber.org/protocol/pubsub"))?t.getChild("subscription"):void 0)&&("subscribed"===n.attrs.subscription&&n.attrs.jid===i&&"purecloud:carrierpigeon"===n.attrs.node))},s=function(e){var t,n;return!(!e.is("message")||e.attrs.from!==i)&&(!!(t=null!=(n=e.getChild("event","http://jabber.org/protocol/pubsub#event"))?n.getChild("items"):void 0)&&t.attrs.node===r)},t.exports=function(e){function t(){return this._processEventItem=c(this._processEventItem,this),t.__super__.constructor.apply(this,arguments)}return u(t,e),t.exposeEvents=["carrierPigeonMessage","carrierPigeonSubscribed"],t.stanzas={handleSubscriptionConfirmation:a,handleMessage:s},t.prototype.handleSubscriptionConfirmation=function(e){return this.emit("carrierPigeonSubscribed")},t.prototype.handleMessage=function(e){var t,n;return t=null!=(n=e.getChild("event","http://jabber.org/protocol/pubsub#event"))?n.getChild("items"):void 0,t.getChildren("item").forEach(this._processEventItem)},t.prototype._processEventItem=function(e){var t,n,r;n=e.text();try{r=JSON.parse(n)}catch(e){return t=e,void console.error("Failed to parse carrier pigeon message",n,t)}return this.emit("carrierPigeonMessage",r)},t}(o)},{"./framework/Controller.coffee":17}],3:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e("./framework/Controller.coffee"),i=e("ltx"),o=e("../../../../../lib/uuid"),t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.stanzas={shouldFailResult:function(e){return e.is("iq")&&"result"===e.attr("type")&&e.getChild("shouldFail")},shouldFailError:function(e){return e.is("iq")&&"error"===e.attr("type")&&e.getChild("shouldFail")}},t.expose={_setShouldFail:function(e){var t,n,r;return null==e&&(e=function(){}),t=o.generate(),n=new i.Element("iq",{from:this.server.jid.toString(),type:"set",id:t}),n.c("shouldFail"),this.server.send(n),r=setTimeout(function(n){return function(){var r;return n.removeListener("willFail:"+t,e),r=new Error("Request timed out"),e(r)}}(this),1e4),this.once("willFail:"+t,function(){return clearTimeout(r),e.apply(null,arguments)})}},t.prototype.shouldFailResult=function(e){return this.emit("willFail:"+e.attr("id"))},t.prototype.shouldFailError=function(e){return this.emit("willFail:"+e.attr("id"),this.createErrorFromStanza(e))},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,ltx:145}],4:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;r=e("./framework/Controller.coffee"),s=e("../../../../../lib/uuid"),o=e("ltx"),i=e("jingle-stanza"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.server.on("disconnect",function(e){return function(){return e.server.discovered=!1}}(this))}return a(t,e),t.stanzas={discovery:function(e){var t;return e.is("iq")&&"get"===e.attrs.type&&(null!=(t=e.getChild("query"))?t.toString().match(/(disco#info|disco#items)/):void 0)},set:function(e){return e.is("iq")&&"set"===e.attrs.type},serviceDiscovery:function(e){var t;return e.is("iq")&&e.getChild("services","urn:xmpp:extdisco:1")&&("set"===(t=e.attrs.type)||"result"===t)}},t.prototype.discovery=function(e){var t,n,r,i,o;Realtime.debug("disco","discovery",e,null!=(r=this.server)&&null!=(i=r.jid)?i.toString():void 0),this.createResult(e),n=e.getChild("query"),o=this.realtime.features;for(t in o)o[t]&&n.c("feature",{var:t});return this.server.discovered=!0,this.server.send(e)},t.prototype.serviceDiscovery=function(e){return this.emit("serviceDiscoveryResult:"+e.attrs.id,null,i.getData(e).toJSON().services.services)},t.prototype.set=function(e){},t.expose={requestExternalServices:function(e,t){var n,r;return null==t&&(t=function(){}),e&&"function"==typeof e&&(t=e,e=null),r=new o.Element("iq",{id:s.generate(),type:"get",to:this.server.jid.domain}),n=r.c("services",{xmlns:"urn:xmpp:extdisco:1"}),e&&(n.attrs.type=e),this.once("serviceDiscoveryResult:"+r.attrs.id,t),this.server.send(r)}},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,"jingle-stanza":111,ltx:145}],5:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=e("./framework/Controller.coffee"),i=e("../../../../../lib/uuid"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.pendingRetryTids={},this.server.on("disconnect",function(e){return function(){return e.onDisconnect()}}(this))}return o(t,e),t.prototype.RETRY_DELAY=5e3,t.exposeEvents=[],t.expose={},t.stanzas={},t.prototype._retryStanza=function(e){var t,n;return n=i.generate(),t=setTimeout(function(t){return function(){var r;if(t.realtime.connected)return delete e.attrs.mark,delete e.attrs["xmlns:stream"],e.attrs.type=e.attrs.originalType,delete e.attrs.originalType,r=e.attrs.to,e.attrs.to=e.attrs.from,e.attrs.from=r,e.remove("error"),t.server.send(e),delete t.pendingRetryTids[n]}}(this),this.RETRY_DELAY),this.pendingRetryTids[n]=t},t.prototype.resourceConstraintError=function(e){var t;if(t=e.getChild("error"),this.realtime._logger.warn("resourceConstraintError for stanza with id "+e.attrs.id,t),429===parseInt(t.attrs.code,10))return this._retryStanza(e)},t.prototype.policyViolationError=function(e){var t,n,r,i,o;if(this.realtime._logger.warn("policyViolationError for stanza with id "+e.attrs.id),o=null!=(n=e.getChild("error"))?n.attrs.type:void 0,t=null!=(r=e.getChild("error"))&&null!=(i=r.getChild("text"))?i.text():void 0,"wait"===o&&/discovery reply is needed/.test(t))return this._retryStanza(e)},t.prototype.onDisconnect=function(){var e,t,n;t=this.pendingRetryTids;for(e in t)n=t[e],clearTimeout(n);return this.pendingRetryTids={}},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17}],6:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty,c=[].slice;i=function(){return Realtime.debug.apply(Realtime,arguments)},o=e("ltx"),e("../../../../../lib/uuid"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){var e;t.__super__.constructor.apply(this,arguments),this.server.on("connect",function(e){return function(){if(e.active)return e._sendSetup()}}(this)),this.server.on("disconnect",function(e){return function(){return e._setupSent=!1}}(this)),this.server.once("connect",function(e){return function(){if(e.active)return e._focus()}}(this)),e=null,$(window).on("focus"+this.realtime.eventNamespace,function(t){return function(){if(t.active)return Realtime.debug("focus","orgspan:focus","focused",t._focused),clearTimeout(e),t._focus()}}(this)),$(window).on("blur"+this.realtime.eventNamespace,function(t){return function(){if(t.active)return Realtime.debug("focus","orgspan:focus","blur"),e=setTimeout(function(){return t._blur()},3e5)}}(this))}return s(t,e),t.expose={takeFocus:function(){return this._focus()},releaseFocus:function(){return this._blur()},setFocused:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],Realtime.debug("focus","setFocused",e),this._focus(e)}},t.exposeEvents=["chatFocus"],t.stanzas={ignoredResult:function(e){var t;return e.is("iq")&&"result"===e.attrs.type&&("focusSet"===(t=e.attrs.id)||"focusSub"===t||"focusUnset"===t)},focusResult:function(e){return e.is("iq")&&"result"===e.attrs.type&&null!=e.getChildByAttr("node","orgspan:focus",null,!0)&&"focusSub"!==e.attrs.id},focusMessage:function(e){var t,n;return e.is("message")&&"orgspan:focus"===(null!=(t=e.getChild("event","http://jabber.org/protocol/pubsub#event"))&&null!=(n=t.getChild("items"))?n.attrs.node:void 0)}},t.prototype.ignoredResult=function(){},t.prototype.focusResult=function(e){var t,n,r,i,o,s,a;for(i=e.getChildByAttr("node","orgspan:focus",null,!0),Realtime.debug("focus","got focus result",i),s=i.getChildren("item"),a=[],r=0,o=s.length;r<o;r++)t=s[r],n=t.attrs.focus,n===this.server.jid.resource?a.push(this._focused=!0):a.push(this._focused=!1);return a},t.prototype.focusMessage=function(e){var t,n,r,o,s,a,c,u,l,f,p,h,d,g;for(Realtime.debug("focus","focusMessage",e),a=null!=(f=e.getChild("event","http://jabber.org/protocol/pubsub#event"))?f.getChild("items"):void 0,p=a.children,o=0,u=p.length;o<u;o++)if(t=p[o],"item"===(h=t.name)||"retract"===h)if(n=null!=(d=t.getChild("focus","orgspan:focus"))?d.text():void 0,i("focus","focused resource is",n),t.is("item")){if(n===this.server.jid.resource&&(this._focused=!0),r=t.getChild("focus","orgspan:focusV2"))for(g=r.getChildren("item"),c=0,l=g.length;c<l;c++)s=g[c],this.emit("chatFocus",{jid:s.attrs.id})}else this._focused=!1;return i("focus","am i focused?",this._focused)},t.prototype._focus=function(){var e,t,n,r,s,a,u;if(s=1<=arguments.length?c.call(arguments,0):[],i("focus","focusing?",!0!==this._focused,{active:this.active}),!this.realtime.connected)return void Realtime.debug("focus","failed to focus, realtime not connected");if(!0!==this._focused||s.length){if(this._sendSetup(),u=new o.Element("iq",{type:"set",to:"pubsub."+this.server.jid.domain,from:this.server.jid.toString(),id:"focusSet"}),n=u.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("publish",{node:"orgspan:focus"}).c("item",{id:this.server.jid.bare().toString()}),n.c("focus",{xmlns:"orgspan:focus"}).t(this.server.jid.resource),s.length)for(e=n.c("focus",{xmlns:"orgspan:focusV2"}),t=0,a=s.length;t<a;t++)r=s[t],e.c("item",{id:r});return this.server.send(u)}},t.prototype._blur=function(){var e;return i("focus","blurring?",!1!==this._focused,{active:this.active}),this.realtime.connected?!1!==this._focused?(this._sendSetup(),e=new o.Element("iq",{type:"set",to:"pubsub."+this.server.jid.domain,from:this.server.jid.toString(),id:"focusUnset"}),e.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("retract",{node:"orgspan:focus"}).c("item",{id:this.server.jid.bare().toString()}),this.server.send(e)):void 0:void Realtime.debug("focus","failed to blur, realtime not connected")},t.prototype._sendSetup=function(){var e;if(!this._setupSent&&(this.active=!0,this._setupSent=!0,!this.realtime.features["orgspan:focus"]||this.server.discovered))return Realtime.debug("focus","sending focus request"),e=new o.Element("iq",{type:"set",from:this.server.jid.toString(),to:"pubsub."+this.server.jid.domain,id:"focusSub"}),e.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("subscribe",{node:"orgspan:focus",jid:this.server.jid.toString()}),this.server.send(e),e=new o.Element("iq",{from:this.server.jid.toString(),type:"get"}),e.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("items",{node:"orgspan:focus"}),this.server.send(e)},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,ltx:145}],7:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e("ltx"),e("../../../../../lib/uuid"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.server.on("disconnect",function(e){return function(){return e.groups=null}}(this)),this.server.on("connect",function(e){return function(){if(e.active&&e.realtime.options.fetchGroupsOnConnect)return e._sendRequest()}}(this))}return o(t,e),t.exposeEvents=["rosterItem"],t.expose={getGroups:function(e){return Realtime.debug("groups","getGroups called"),this.groups?e(null,this.groups):this.active?(Realtime.debug("groups","waiting for groups"),this.once("groups",function(t){return function(){return Realtime.debug("groups","returning groups",t.groups),e(null,t.groups)}}(this))):(this.active=!0,this._sendRequest())}},t.stanzas={ignoredResult:function(e){var t;return e.is("iq")&&"result"===e.attrs.type&&("focusSet"===(t=e.attrs.id)||"focusSub"===t)},groupsResult:function(e){return e.is("iq")&&null!=e.getChildByAttr("node","orgspan:groups",null,!0)&&"result"===e.attrs.type},groupMessage:function(e){var t,n;return e.is("message")&&"orgspan:groups"===(null!=(t=e.getChild("event","http://jabber.org/protocol/pubsub#event"))&&null!=(n=t.getChild("items"))?n.attrs.node:void 0)}},t.prototype.ignoredResult=function(){},t.prototype.groupsResult=function(e){var t,n,r,i,o,s,a,c;for(this.groups={},Realtime.debug("group","groupsResult",e),r=e.getChildByAttr("node","orgspan:groups",null,!0),a=r.getChildren("item"),t=0,o=a.length;t<o;t++)n=a[t],n=n.getChild("group"),c=n.attrs,s=c.name,i=c.jid,this.groups[i]=n.attrs,n.attrs.autojoin&&!this.realtime.features["orgspan:rooms"]&&this.realtime.joinRoom(i),this.emit("rosterItem",{name:s,jid:i,section:"groups",type:"room",event:"add"});return this.emit("groups")},t.prototype.groupMessage=function(e){var t,n,r,i,o,s,a,c,u,l,f;for(Realtime.debug("group","groupsMessage",e),o=e.getChildByAttr("node","orgspan:groups",null,!0),u=o.children,r=0,a=u.length;r<a;r++)if(t=u[r],"item"===(l=t.name)||"retract"===l)if("item"===t.name)i=t.getChild("group"),f=i.attrs,c=f.name,s=f.jid,this.groups[s]={name:c,jid:s},this.realtime.features["orgspan:rooms"]||this.realtime.joinRoom(s),this.emit("rosterItem",{name:c,jid:s,section:"groups",type:"room",event:"add"});else{if(Realtime.debug("group","removing group",t.attrs.id),s=t.attrs.id+"@conference."+this.server.jid.domain,!(n=this.groups[s]))return;delete this.groups[s],this.emit("rosterItem",{name:n,jid:s,section:"groups",type:"room",event:"remove"})}return this.emit("groups")},t.prototype._sendRequest=function(){var e;if(!this.realtime.connected)return this.server.once("connected",function(e){return function(){return e._sendRequest()}}(this));if(!this.realtime.features["orgspan:groups"]||this.server.discovered)return Realtime.debug("group","sending group subscription"),e=new i.Element("iq",{type:"set",from:this.server.jid.toString(),to:"pubsub."+this.server.jid.domain,id:"groupSub"}),e.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("subscribe",{node:"orgspan:groups",jid:this.server.jid.toString()}),this.server.send(e),Realtime.debug("group","sending group request"),e=new i.Element("iq",{from:this.server.jid.toString(),type:"get"}),e.c("pubsub",{xmlns:"http://jabber.org/protocol/pubsub"}).c("items",{node:"orgspan:groups"}),this.server.send(e)},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,ltx:145}],8:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;r=e("./framework/Controller.coffee"),o=e("ltx"),i=e("lodash"),t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.expose={sendLogs:function(e,t){return this.sendLogs(e,t)},sendLog:function(e,t){var n,r,i;return r=e.opts,n=e.message,i=e.tags,this.sendLogs([{opts:r,message:n,tags:i}],t)}},t.prototype.sendLogs=function(e,t){var n;return n=new o.Element("message"),n.attrs.to=this.server.jid.domain,n.attrs.type="normal",t&&n.c("request","urn:xmpp:receipts"),i.forEach(e,function(e){var t,r,o,s,a,c,u,l,f;return s=n.c("log","urn:xmpp:eventlog"),u=e.opts,f=u.type,t=u.facility,o=u.level,c=u.object,l=u.subject,r=u.id,s.attrs={type:f,facility:t,level:o,object:c,subject:l,id:r,xmlns:s.attrs.xmlns},e.message&&(a=s.c("message"),a.t(e.message)),i.forIn(e.tags,function(e,t){var n;return n=i.isString(e)?e:encodeURIComponent(JSON.stringify(e)),s.c("tag",{name:t,value:n})})}),this.server.send(n,t)},t}(r)},{"./framework/Controller.coffee":17,lodash:144,ltx:145}],9:[function(e,t,n){var r,i,o,s,a,c,u,l=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f={}.hasOwnProperty;a=e("ltx"),c=e("../../../../../lib/uuid"),s=e("../../../../../lib/formatter"),i=e("lodash"),o=e("../../../../../lib/asyncUtils").createTimeoutFn,u=e("node-xmpp-core"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._pending={}}var n;return l(t,e),t.exposeEvents=["message","messageWithoutBody","chatState"],t.prototype._sendMessageWarnTimeout=2e3,t.expose={_clearMessages:function(e){},sendChatState:function(e,t){var n,r;return t.match(/@/)&&(n=[t,e],e=n[0],t=n[1]),Realtime.debug("chatstates","sending",t,e),r=new a.Element("message",{to:e,from:this.server.jid,type:e.match(/@conference/)?"groupchat":"chat"}),r.c(t,{xmlns:"http://jabber.org/protocol/chatstates"}),this.server.send(r)},sendMessage:function(e,t,n){var r,i,l,f,p,h,d,g,m,v,y,b,_,w;if(e.constructor!==u.JID&&(y=arguments[0])&&"object"==typeof y&&(n=arguments[1],e=y.to,t=y.body,l=y.children,f=y.corrects,v=y.oid),null==n&&(n=function(e){if(e)throw e}),n=o(n,function(e){return function(){return e.realtime._logger.warn("Realtime MessageController: sendMessage took too long ("+e._sendMessageWarnTimeout+"ms)")}}(this),this._sendMessageWarnTimeout),!((null!=t?t.trim().length:void 0)||f||l))return void n(new Error("no body, corrects, or children supplied"));if(!(null!=e?e.toString().match(/@/):void 0))return n(new Error("to must be a full jid"));if(Realtime.debug("message","sending",e,t),null==v&&(v=c.generate()),w=e.match(/@conference/)?"groupchat":"chat",_=new a.Element("message",{to:e,from:this.server.jid,type:w,oid:v}),null!=t&&(_.c("body").t(t),b=s.formatBody(t),p=b[0],g=b[1]),_.c("active",{xmlns:"http://jabber.org/protocol/chatstates"}),f&&_.c("replace",{xmlns:"urn:xmpp:message-correct:0",id:f}),null!=l?l.length:void 0)for(h=0,d=l.length;h<d;h++)r=l[h],i=_.c(r.name),r.attributes&&(i.attrs=r.attributes),r.contents&&i.t(r.contents);return m={id:v,from:this.server.jid.bare().toString(),to:e,body:p,links:g,time:new Date,raw:t,pending:!0,stanza:_,corrects:f},this.realtime.options.rawMessageIds&&(m.id=null,m.oid=v),this.emit("message",m),this._pending[v]=!0,this.server.send(_),this.realtime._controllers.activeChatController.active&&this.realtime.takeFocus(),this.once("carbon:"+v,function(e){return function(t,r){return delete m.pending,t?(m.err=t,n(t,m)):e.realtime.options.rawMessageIds?n(null,r):n(null,m)}}(this)),v},getMessages:function(e,t){var n,r,o,s,u,l,f;if(!t)throw new Error("missing callback");return"string"==typeof e&&(e={jid:e}),s=e.jid,r=e.before,n=e.after,r&&(r instanceof Date||(r=new Date(r)),isNaN(r.getTime()))?t(new Error("invalid date")):n&&(n instanceof Date||(n=new Date(n)),isNaN(n.getTime()))?t(new Error("invalid date")):s?(o=function(e,n){return n=n&&i.chain(n).values().sortBy(function(e){return e.time}).value(),t(e,n)},f=new a.Element("iq",{type:"get",id:c.generate(),from:this.server.jid.toString()}),l=f.c("messages",{xmlns:"orgspan:history",with:s,limit:e.limit||100}),r&&(l.attrs.end=r.toISOString()),n&&(l.attrs.start=n.toISOString()),("undefined"!=typeof navigator&&null!==navigator&&null!=(u=navigator.userAgent)?u.match(/MSIE 8.0/):void 0)&&(l.attrs.limit=10),this.server.send(f),this.once("history:"+f.attrs.id,o)):t(new Error("missing jid"))},getRecents:function(e,t){var n,r;return Realtime.debug("recent","getRecents",e,t),"function"==typeof e&&(t=e,e={}),r=new a.Element("iq",{type:"get",id:c.generate(),from:this.server.jid.toString()}),n=r.c("chats",{xmlns:"orgspan:history",end:(new Date).toISOString()}),e.jid&&(n.attrs.with=e.jid),e.before&&(n.attrs.end=e.before),e.after&&(n.attrs.start=e.after),n.attrs.limit=e.limit||20,this.server.send(r),this.once("history:"+r.attrs.id,function(e,n){return n=n&&i.chain(n).values().sortBy(function(e){return e.time}).value(),t(e,n)})}},t.stanzas={handleChatstate:function(e){return e.is("message")&&null!=e.getChildByAttr("xmlns","http://jabber.org/protocol/chatstates",null,!0)&&"error"!==e.attrs.type},handleMessageWithBody:function(e){var t;return e.is("message")&&null!=e.getChild("body")&&"error"!==e.attrs.type&&null==(null!=(t=e.getChild("x","jabber:x:conference"))?t.attrs.jid:void 0)},handleMessageWithoutBody:function(e){var t,n;return e.is("message")&&null==e.getChild("body")&&("chat"===(t=e.attrs.type)||"groupchat"===t)&&null==e.getChild("subject")&&"error"!==e.attrs.type&&null==(null!=(n=e.getChild("x","jabber:x:conference"))?n.attrs.jid:void 0)},handleMessageError:function(e){var t;return e.is("message")&&"error"===e.attrs.type&&null==(null!=(t=e.getChild("x","jabber:x:conference"))?t.attrs.jid:void 0)},handleMessageHistory:function(e){return e.is("iq")&&"error"!==e.attrs.type&&null!=e.getChild("messages","orgspan:history")},handleMessageHistoryError:function(e){return e.is("iq")&&"error"===e.attrs.type&&null!=e.getChild("messages","orgspan:history")},handleChatHistory:function(e){return e.is("iq")&&"error"!==e.attrs.type&&null!=e.getChild("chats","orgspan:history")},handleChatHistoryError:function(e){return e.is("iq")&&"error"===e.attrs.type&&null!=e.getChild("chats","orgspan:history")}},t.prototype.handleChatHistory=function(e){var t,n,r,i,o,s,a,c,u,l,f;for(Realtime.debug("recent",e),f=[],u=(null!=(c=e.getChild("chats"))?c.getChildren("chat"):void 0)||[],r=0,o=u.length;r<o;r++)for(n=u[r],f.push(t={with:n.attrs.with,type:n.attrs.type,id:n.attrs.id,time:new Date(n.attrs.utc),subject:n.attrs.subject,participants:[],unread:n.attrs.unread||!1}),l=n.getChildren("participant"),i=0,s=l.length;i<s;i++)a=l[i],t.participants.push(a.text());return this.emit("history:"+e.attrs.id,null,f)},t.prototype.handleChatHistoryError=function(e){return Realtime.debug("chat history error",e),this.emit("history:"+e.attrs.id,r.createErrorFromStanza(e))},n=function(e){var t,n;return n=e.getChildren("attachment","orgspan:attachment"),function(){var e,r,i,o;for(o=[],e=0,r=n.length;e<r;e++)t=n[e],o.push((i={},i[""+t.attrs.id]=t.text(),i));return o}()},t.prototype.handleMessageWithBody=function(e){var t,r,i,o,a,c,l,f,p,h,d,g,m,v,y;return Realtime.debug("message","message",e),y=e.attrs.type,"chat"===y?(i=new u.JID(e.attrs.from).bare().toString(),v=new u.JID(e.attrs.to).bare().toString(),i,i===this.server.jid.bare().toString()?v:i):"groupchat"===y&&(i=new u.JID(e.attrs.ofrom).bare().toString(),v=new u.JID(e.attrs.from).bare().toString(),v),f=null!=(h=e.getChild("type"))?h.text():void 0,r=null!=(d=e.getChild("replace","urn:xmpp:message-correct:0"))?d.attrs.id:void 0,t=e.getChild("body"),(null!=t?t.text().match(/^\?OTR/):void 0)&&v.resource&&(e.attrs.from=this.server.jid,e.attrs.to=e.attrs.from,t.text("?OTR The Recipient cannot handle OTR messages."),e.attrs.type="error",this.server.send(e)),l=i===this.server.jid.bare().toString()&&e.attrs.oid?e.attrs.oid:e.attrs.id,o=this.realtime.options.rawMessageIds?e.attrs.id:l,m=s.formatBody(p=null!=(g=e.getChild("body"))?g.text():void 0),t=m[0],a=m[1],e.attrs.utc||Realtime.debug("message","message without timestamp",e),c={id:o,from:i,to:v,body:t,links:a,files:n(e),time:new Date(e.attrs.utc||Date.now()),type:f,raw:p,stanza:e,corrects:r||void 0},this.realtime.options.rawMessageIds&&(c.oid=e.attrs.oid),this._pending[e.attrs.oid]?(delete this._pending[e.attrs.oid],void this.emit("carbon:"+e.attrs.oid,null,c)):(Realtime.debug("message","emit",c),this.emit("message",c))},t.prototype.handleMessageWithoutBody=function(e){var t,r,i,o,s,a,c;return Realtime.debug("message","message",e),c=e.attrs.type,"chat"===c?(t=new u.JID(e.attrs.from).bare().toString(),a=new u.JID(e.attrs.to).bare().toString(),t,t===this.server.jid.bare().toString()?a:t):"groupchat"===c&&(t=new u.JID(e.attrs.ofrom).bare().toString(),a=new u.JID(e.attrs.from).bare().toString(),a),o=null!=(s=e.getChild("type"))?s.text():void 0,e.attrs.utc||Realtime.debug("message","message without timestamp",e),r=e.attrs.id,i={id:r,from:t,to:a,
files:n(e),time:new Date(e.attrs.utc||Date.now()),type:o,stanza:e},this.realtime.options.rawMessageIds&&(i.oid=e.attrs.oid),this._pending[e.attrs.oid]?(delete this._pending[e.attrs.oid],void this.emit("carbon:"+e.attrs.oid,null,i)):(Realtime.debug("message","emit",i),this.emit("messageWithoutBody",i))},t.prototype.handleMessageError=function(e){if(this._pending[e.attrs.oid])return delete this._pending[e.attrs.oid],this.emit("carbon:"+e.attrs.oid,r.createErrorFromStanza(e))},t.prototype.handleChatstate=function(e){var t,n,r;if(r=e.getChildByAttr("xmlns","http://jabber.org/protocol/chatstates"),Realtime.debug("chatstate","received",e.attrs.from,r.name),e.attrs.from!==this.server.jid.bare().toString())return e.attrs.from.match(/@conference/)?(t=e.attrs.ofrom,n=e.attrs.from.split("/")[0]):t=e.attrs.from,this.emit("chatState",{from:t,room:n,state:r.name})},t.prototype.handleMessageHistory=function(e){var t,r,i,o,a,c,u,l,f,p,h,d,g,m,v,y;if(o=e.getChild("messages"),Realtime.debug("archive","historyResult",e.attrs.id),!o)return void this.emit("history:"+e.attrs.id,null,{});for(a={},d=this.server.jid.bare().toString(),m=o.children,c=0,l=m.length;c<l;c++)r=m[c],Realtime.debug("archive","child",r),r.attrs.utc||Realtime.debug("message","message without timestamp",r),h=r.attrs.from===d&&r.attrs.oid?r.attrs.oid:r.attrs.id,u=this.realtime.options.rawMessageIds?r.attrs.id:h,v=s.formatBody(g=r.getChild("body").text()),t=v[0],f=v[1],i=null!=(y=r.getChild("replace","urn:xmpp:message-correct:0"))?y.attrs.id:void 0,p={id:u,from:r.attrs.from,to:r.attrs.to,body:t,raw:g,links:f,files:n(r),time:new Date(r.attrs.utc),stanza:r,corrects:i||void 0},a[u]=p;return this.emit("history:"+e.attrs.id,null,a)},t.prototype.handleMessageHistoryError=function(e){return Realtime.debug("archive","historyResult error",e.attrs.id),this.emit("history:"+e.attrs.id,r.createErrorFromStanza(e))},t}(r)},{"../../../../../lib/asyncUtils":20,"../../../../../lib/formatter":21,"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,lodash:144,ltx:145,"node-xmpp-core":161}],10:[function(e,t,n){var r,i=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.stanzas={ping:function(e){return e.is("iq")&&"get"===e.attrs.type&&e.getChild("ping","urn:xmpp:ping")}},t.prototype.ping=function(e){return this.createResult(e),this.server.send(e)},t}(r)},{"./framework/Controller.coffee":17}],11:[function(e,t,n){var r,i,o,s,a,c,u,l,f,p,h=function(e,t){function n(){this.constructor=e}for(var r in t)d.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},d={}.hasOwnProperty,g=[].slice;a=e("ltx"),o=e("../../../../../lib/Jid"),p=e("node-xmpp-core"),s=e("lodash"),f=e("../../../../../lib/uuid"),c=e("../../../../../lib/presenceUtils"),u=e("retry"),l=e("semaphore"),i=e("interval-buffer"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this.extraSubscriptions=[],this.requestSubscriptionBuffer=new i({interval:10,maxSize:50},function(e){return function(t){if(e.server.jid)return e._requestBulkSubscriptions(t)}}(this)),this.server.on("connect",function(e){return function(){var t,r,i,o,s,a;if(e._presences={},e._waitingOnReplies={},e._sendPresenceCallbacks={},e.active){for(e.server.presence=null,e.server.organizationPresenceId=null,e.server.status="",e.server.location="",e.server.receivedInitialPresence=!1,e.server.initialPresenceLock=new l(1),e.server.initialPresenceLock.take(function(){}),o=e.realtime._logger,n(e.server,o,function(t){if(t)return o.warn("Subscribing to self-presence failed on every retry. The connection will be dropped and reconnected",t),e.realtime.reconnect()}),s=e.extraSubscriptions,a=[],t=0,i=s.length;t<i;t++)r=s[t],a.push(e._requestSubscription(r));return a}}}(this))}var n,d;return h(t,e),t.prototype.presences={},t.prototype._timeout=6e5,t.expose={setIdle:function(e,t){var n;if(e){if("chat"!==(n=this.server.presence)&&"online"!==n)return;return this._beforeIdlePresence=this.server.presence,this._beforeIdleOrgPresenceId=this.server.organizationPresenceId,null!=t?this._sendPresence("idle",this.server.status,this.server.jid,this.server.location,c.PRESENCE_TO_PRESENCE_ID.xa,t):this._sendPresence("idle",this.server.status,this.server.jid,this.server.location,c.PRESENCE_TO_PRESENCE_ID.xa)}if(this._beforeIdlePresence)return null!=t?this._sendPresence(this._beforeIdlePresence,this.server.status,this.server.jid,this.server.location,this._beforeIdleOrgPresenceId,function(e){return function(n){return e._beforeIdlePresence=null,e._beforeIdleOrgPresenceId=null,t(n)}}(this)):(this._sendPresence(this._beforeIdlePresence,this.server.status,this.server.jid,this.server.location,this._beforeIdleOrgPresenceId),this._beforeIdlePresence=null,this._beforeIdleOrgPresenceId=null)},subscribeToPresence:function(){var e,t,n,r;for(n=1<=arguments.length?g.call(arguments,0):[],e=0,r=n.length;e<r;e++)t=n[e],this._getOrSubscribeToPresence(t)},requestPresence:function(){var e,t,n,r;for(n=1<=arguments.length?g.call(arguments,0):[],e=0,r=n.length;e<r;e++)t=n[e],this._getOrSubscribeToPresence(t)},unsubscribeFromPresence:function(){var e,t,n,r,i;for(r=1<=arguments.length?g.call(arguments,0):[],Realtime.debug("presence","unsubscribeFromPresence",r),e=this.server.jid.bare(),t=0,i=r.length;t<i;t++){if("string"==typeof(n=r[t])){if(!o.isValidJid(n))throw new Error("Invalid Jid "+n);n=new p.JID(n)}e.equals(n.bare())?Realtime.debug("presence","unable to unsubscribe from mepresence for self",n.toString()):(this.server.send(new a.Element("presence",{from:e,to:n,type:"unsubscribe"})),delete this._presences[n.toString()])}},setPresence:function(e){if(Realtime.debug("presence","setPresence",e,this.server.presence),"offline"===e)throw Error("Do not set your presence to offline, please use disconnect() instead.");if("online"!==e&&"away"!==e&&"busy"!==e)throw Error("invalid presence "+e);e!==this.server.presence&&(Realtime.debug("presence","lib setPresence",e),this._sendPresence(e,this.server.status,this.server.jid,this.server.location,c.PRESENCE_TO_PRESENCE_ID[c.convertDirectoryPresenceToXMPPShow(e)]))},setOrganizationPresenceId:function(e,t){var n,r;if(null==t&&(t=function(){}),Realtime.debug("presence","setOrganizationPresenceId",e,this.server.organizationPresenceId),r=c.PRESENCE_ID_TO_PRESENCE[e],n=null,r){if("offline"===(n=c.convertXMPPShowToDirectoryPresence(r)))throw Error("Do not set your presence to offline, please use disconnect() instead.")}else Realtime.debug("The organization presence id "+e+" is not known without fetching from presence service");if(e===this.server.organizationPresenceId)return void t();Realtime.debug("presence","lib setOrganizationPresenceId",n,e),this._sendPresence(n,this.server.status,this.server.jid,this.server.location,e,t)},setStatus:function(e,t){if(null==e&&(e=""),Realtime.debug("presence","setStatus",e,this.server.status),e===this.server.status)return"function"==typeof t?t(null):void 0;this._sendPresence(this.server.presence,e,this.server.jid,this.server.location,this.server.organizationPresenceId,t)},setLocation:function(e,t){if(null==e&&(e=""),Realtime.debug("presence","setLocation",e,this.server.location),e===this.server.location)return"function"==typeof t?t(null):void 0;this._sendPresence(this.server.presence,this.server.status,this.server.jid,e,this.server.organizationPresenceId,t)}},t.exposeEvents=["presence"],t.stanzas={onMePresence:function(e){var t;return e.is("presence")&&e.attrs.from===(null!=(t=this.server.jid)?t.bare().toString():void 0)},onPresence:function(e){var t,n;return e.is("presence")&&e.attrs.from!==(null!=(t=this.server.jid)?t.bare().toString():void 0)&&(void 0===(n=e.attrs.type)||"unavailable"===n)&&!e.attrs.from.match(/@conference/)},onPresenceError:function(e){var t;return e.is("presence")&&"error"===e.attrs.type&&e.attrs.to===(null!=(t=this.server.jid)?t.toString():void 0)},ignore:function(e){var t,n;return e.is("presence")&&e.attrs.from!==(null!=(t=this.server.jid)?t.bare().toString():void 0)&&("subscribed"===(n=e.attrs.type)||"unsubscribed"===n)}},t.SELF_SUBSCRIBE_RETRY_OPTIONS={retries:3,factor:11.717,minTimeout:200},t.SELF_SUBSCRIBE_MAX_TIME=3e4,t.prototype.extraSubscriptions=[],null,n=function(e,n,r){var i,o,s,a;return s=t.SELF_SUBSCRIBE_RETRY_OPTIONS.retries,o=u.operation(t.SELF_SUBSCRIBE_RETRY_OPTIONS),i=!1,a=setTimeout(function(){if(!i)return i=!0,r(new Error("Self subscription retries failed for more than "+t.SELF_SUBSCRIBE_MAX_TIME+" ms"))},t.SELF_SUBSCRIBE_MAX_TIME),o.attempt(function(t){return d(e,n,function(e){if(e&&n.warn("Subscribing to self-presence failed on attempt "+(t+1)+" of "+(s+1),e),!o.retry(e)&&!i)return i=!0,clearTimeout(a),e?r(o.mainError()):r()})})},d=function(e,t,n){var r,i;return r="mepresence-"+f.generate(),i=new a.Element("presence",{id:r,from:e.jid.toString(),to:e.jid.bare().toString(),type:"subscribe"}),e.send(i,n)},t.prototype.ignore=function(){},t.prototype.onPresenceError=function(e){var t,n;if(this._removeWaitingReply(e.attrs.id),t=this._sendPresenceCallbacks[e.attrs.id])return n=r.createErrorFromStanza(e),Realtime.debug("presence","Send presence failed: "+n.code+" - "+n.message),delete this._sendPresenceCallbacks[e.attrs.id],t(n)},t.prototype.onMePresence=function(e){var t,n,r;if("subscribed"!==(r=e.attrs.type)&&"unsubscribed"!==r)return this.server.receivedInitialPresence||(o.isValidJid(e.attrs.from)?(n=new p.JID(e.attrs.from),n.bare().equals(this.server.jid.bare())&&(this.server.receivedInitialPresence=!0,this.server.initialPresenceLock.leave())):Realtime._logger.warn("Invalid from attribute in stanza",e)),t=this._sendPresenceCallbacks[e.attrs.id],t&&(t(),delete this._sendPresenceCallbacks[e.attrs.id]),this._postReplyReact=this._reactToStanza.bind(this,e),this._removeWaitingReply(e.attrs.id)},t.prototype._removeWaitingReply=function(e){var t,n;if(s.has(this._waitingOnReplies,e)&&(n=this._waitingOnReplies[e],n&&clearTimeout(n),delete this._waitingOnReplies[e]),0===s.size(this._waitingOnReplies)&&this._postReplyReact)return t=this._postReplyReact,this._postReplyReact=null,t()},t.prototype._reactToStanza=function(e){var t,n,r,i,o,s,a;if(this.realtime.connected)return s=this._translatePresence(e),i=s[0],a=s[1],n=s[2],r=s[3],Realtime.debug("presence","onMePresence",i,a,e),o=i!==this.server.presence||r!==this.server.organizationPresenceId,!o||"online"!==i&&"busy"!==i&&"away"!==i||(null!=this._beforeIdlePresence?(this._beforeIdlePresence=i,this._beforeIdleOrgPresenceId=r):(this.server.presence=i,this.server.organizationPresenceId=r,t=!0)),this.server.presence||(this.server.presence="online",this.server.organizationPresenceId=c.PRESENCE_TO_PRESENCE_ID.online,t=!0),a!==this.server.status&&(this.server.status=a,t=!0),"mobile"===n?(this.server.location="",t=!0):n!==this.server.location&&(this.server.location=n,t=!0),t?(Realtime.debug("presence","me presence changed",this.server.presence,this.server.status),this._sendPresence(this.server.presence,this.server.status,this.server.jid,this.server.location,this.server.organizationPresenceId)):void 0},t.prototype.onPresence=function(e){var t,n,r,i,o,s,a;if(Realtime.debug("presence",e.attrs.from,e.attrs.type),"subscribed"!==(o=e.attrs.type)&&"unsubscribed"!==o)return s=this._translatePresence(e),i=s[0],a=s[1],n=s[2],r=s[3],t={from:e.attrs.from,presence:i,status:a,location:n,organizationPresenceId:r},this._presences[e.attrs.from]=t,this.emit("presence",t)},t.prototype.onSubscribe=function(e){return Realtime.debug("presence","onSubscribe")},t.prototype.onUnSubscribe=function(e){return Realtime.debug("presence","onUnSubscribe")},t.prototype._extractPresenceValue=function(e){return this._translatePresence(e)[0]},t.prototype._translatePresence=function(e){var t,n,r,i,o,s,a,u,l;return u=(null!=(o=e.getChild("show"))?o.text():void 0)||"online","unavailable"===e.attrs.type&&(u="offline"),l=(null!=(s=e.getChild("status"))?s.text():void 0)||"",t=(null!=(a=e.getChild("location"))?a.text():void 0)||"",i=c.convertXMPPShowToDirectoryPresence(u),r=e.getChild("organizationPresenceId","urn:inin:purecloud:presence"),n=null!=r?r.text():void 0,n||(n=c.PRESENCE_TO_PRESENCE_ID[u]),[i,l,t,n]},t.prototype._sendPresence=function(e,t,n,r,i,o){return null==o&&(o=function(){}),this.server.initialPresenceLock.take(function(u){return function(){var l,p,h,d;return u.server.initialPresenceLock.leave(),o=s.once(o),u.realtime.connected?(Realtime.debug("presence","controller sending",e,t),p=c.convertDirectoryPresenceToXMPPShow(e),h=new a.Element("presence",{from:n.toString(),"xml:lang":"en"}),null!=p&&("offline"===p?h.attrs.type="unavailable":"online"!==p&&h.c("show").t(p)),h.c("status").t(t),null!=r&&h.c("location").t(r),null!=i&&(h.attrs["xmlns:pc"]="urn:inin:purecloud:presence",h.c("pc:organizationPresenceId").t(i)),h.attrs.id=f.generate(),d=setTimeout(function(){return u._removeWaitingReply(h.attrs.id),l=new Error("status update timed out"),l.code=500,o(l),delete u._sendPresenceCallbacks[h.attrs.id]},5e3),u._waitingOnReplies[h.attrs.id]=d,u._sendPresenceCallbacks[h.attrs.id]=o,u.server.send(h,function(n,o){var s;return n?(s="Presence change request failed. Stanza: "+o.toString(),u.realtime._logger.warn(s,n)):(u.server.presence=e||u._extractPresenceValue(o),u.server.status=t,u.server.location=r,u.server.organizationPresenceId=i,u._emitSelfPresence())})):(l=new Error("not connected to the realtime service"),l.code=400,void o(l))}}(this))},t.prototype._emitSelfPresence=function(){var e,t,n,r,i;return r=this.server,n=r.presence,i=r.status,e=r.location,t=r.organizationPresenceId,this.emit("presence",{from:this.server.jid.bare().toString(),presence:n,status:i,location:e,organizationPresenceId:t})},t.prototype._getOrSubscribeToPresence=function(e){var t;if(e&&this.active&&!e.match(/@conference/))return Realtime.debug("presence","presence requested for",e),e===(null!=(t=this.server.jid)?t.bare().toString():void 0)?(Realtime.debug("presence","self presence requested"),void(this.server.presence&&this._emitSelfPresence())):this._presences[e]?this.emit("presence",s.extend(this._presences[e],{from:e})):this.realtime.getRoster(function(t){return function(n,r){return n?"undefined"!=typeof console&&null!==console?console.error(n):void 0:r[e]?void 0:(0>s.indexOf(t.extraSubscriptions,e)&&t.extraSubscriptions.push(e),t._requestSubscription(e))}}(this))},t.prototype._requestSubscription=function(e){return this.requestSubscriptionBuffer.push(e)},t.prototype._requestBulkSubscriptions=function(e){var t,n,r,i,o;for(o=new a.Element("presence",{type:"bulk-subscribe",from:this.server.jid.toString()}),i=s.uniq(e),t=0,r=i.length;t<r;t++)n=i[t],o.c("subscribe",{to:n});return this.server.send(o)},t}(r)},{"../../../../../lib/Jid":19,"../../../../../lib/presenceUtils":22,"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,"interval-buffer":100,lodash:144,ltx:145,"node-xmpp-core":161,retry:184,semaphore:197}],12:[function(e,t,n){var r,i=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t.stanzas={setReconnectId:function(e){return e.is("iq")&&"set"===e.attrs.type&&e.getChild("reconnectId","urn:realtime")},handleReconnect:function(e){var t;return e.is("iq")&&"set"===e.attrs.type&&e.attrs.to===(null!=(t=this.server.jid)?t.bare().toString():void 0)&&e.attrs.from===this.server.jid.domain&&e.getChild("query","urn:xmpp:cxfr")}},t.exposeEvents=["requestReconnect"],t.prototype.setReconnectId=function(e){var t;return t=e.getChild("reconnectId","urn:realtime"),this.realtime._reconnectId=t.text()},t.prototype.handleReconnect=function(){return this.emit("requestReconnect")},t}(r)},{"./framework/Controller.coffee":17}],13:[function(e,t,n){var r,i,o,s,a,c,u,l,f=function(e,t){function n(){this.constructor=e}for(var r in t)p.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},p={}.hasOwnProperty;c=e("ltx"),u=e("../../../../../lib/uuid"),e("util"),l=e("node-xmpp-core"),s=e("lodash"),i=e("bluebird"),a=e("async"),r=e("./framework/Controller.coffee"),o=e("limiter").RateLimiter,t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._rooms={},this._occupants={},this._occupantsMedia={},this._attributes={},this._pendingOccupants={},this._roomInfoLimiter=new o(15,"second"),this.server.on("connect",function(e){return function(){var n,r,i;return n=s.keys(e._rooms),e._rooms={},e._attributes={},e._pendingOccupants={},e._nick=e.server.jid.bare().toString().replace("@","#"),i="No response from room join request after "+t.ROOM_REJOIN_TIMEOUT+" ms",r=function(n,r){return e._joinRoom(n).timeout(t.ROOM_REJOIN_TIMEOUT,i).catch(function(t){var r;return r="Failed to join room after connection",e.realtime._logger.error({message:r,roomJid:n,error:t})}).nodeify(r)},a.eachLimit(n,10,r,function(){return e.emit("roomsRejoined")})}}(this))}var n;return f(t,e),t.ROOM_REJOIN_TIMEOUT=5e3,t.prototype._jidEvent=function(e,t){return e+":"+t.split("@")[0]},t.prototype._sanitizeJid=function(e){return e.toString().split("@")[0]+"@conference."+this.server.jid.domain},t.expose={createRoom:function(e){var t;return Realtime.debug("room","createRoom"),t=u.generate()+"-z@conference."+this.server.jid.domain,e(null,t)},inviteToRoom:function(e,t){var n;return Realtime.debug("room","inviteToRoom",e,t),n=new c.Element("message",{from:this.server.jid.toString(),to:t}),n.c("x",{xmlns:"jabber:x:conference",jid:e}),this.server.send(n)},joinRoom:function(e,t){var n;return e?(e=this._sanitizeJid(e),Realtime.debug("room","joining",e),n=this._joinRoom(e),"function"==typeof t?n.done(t,t):n):"undefined"!=typeof console&&null!==console?console.error("joinRoom called with no jid."):void 0},updateMediaPresence:function(e,t,n){var r;return null==n&&(n=function(){}),"string"==typeof e&&(e={jid:e}),e.jid?(this._sanitizeJid(e.jid),Realtime.debug("room","updating media presence",e,t),r=this._jidEvent("media",e.jid),this.once(r,n),this._updateMediaPresence(e,t,function(e){return function(t){return t?(e.removeListener(r,n),n(t)):n(null)}}(this))):n(new Error("roomJid required to update media presence"))},leaveRoom:function(e,t){var n,r,i;return null==t&&(t=function(){}),e?(e=this._sanitizeJid(e),Realtime.debug("room","joining",e),i=new c.Element("presence",{from:this.server.jid.toString(),to:e+"/"+this._nick,id:u.generate(),type:"unavailable"}),n=this._jidEvent("leave",e),r=function(n){return function(r){return r?t(r):(delete n._rooms[e],t())}}(this),this.server.send(i,function(e){return function(i){if(i)return e.removeListener(n,r),t(i)}}(this)),this.once(n,r)):"undefined"!=typeof console&&null!==console?console.error("leaveRoom called with no jid."):void 0},setRoomSubject:function(e,t,n){var r;return null==n&&(n=function(){}),e=this._sanitizeJid(e),r=new c.Element("message",{from:this.server.jid.toString(),to:e,type:"groupchat"}),r.c("subject").t(t),this.server.send(r,function(e){return e?n(e):n()})},getRoomInfo:function(e,t){return this.getRoomInfo(e,t)},setAttributes:function(e,t){var n,r;if(e=this._sanitizeJid(e),r=new c.Element("message",{to:e,type:"groupchat"}),null==(n=this._attributes)[e]&&(n[e]={}),!s.isEqual(this._attributes[e],t))return this._attributes[e]=t,r.c("attributes").t(JSON.stringify(t)),this.server.send(r)},_repairRoomPresences:function(e,t){return this._repairRoomPresences(e,t)}},t.exposeEvents=["invite","subjectChange","data","occupantChange","mediaChange","mention","onSetAttributes"],t.stanzas={handleInvite:function(e){var t;return e.is("message")&&null!=(null!=(t=e.getChild("x","jabber:x:conference"))?t.attrs.jid:void 0)},handleMention:function(e){return e.is("message")&&null!=e.getChild("mention","urn:realtime:mention")},handleSubject:function(e){var t;return e.is("message")&&(null!=(t=e.getChild("subject"))?t.text().length:void 0)>0},handleData:function(e){var t;return e.is("message")&&"groupchat"===e.attrs.type&&(null!=(t=e.getChild("data"))?t.text().length:void 0)>0},handleRoomAttributes:function(e){var t,n;return e.is("message")&&"result"===e.attrs.type&&"groupchat"===e.attrs.originalType&&e.attrs.to===(null!=(t=this.server.jid)?t.toString():void 0)&&(null!=(n=e.getChild("attributes"))?n.text().length:void 0)>0},handleInfo:function(e){var t;return e.is("iq")&&"result"===e.attrs.type&&(null!=(t=e.attrs.from)?t.match(/@conference/):void 0)&&null!=e.getChild("query","http://jabber.org/protocol/disco#info")},handleInfoError:function(e){var t;return e.is("iq")&&"error"===e.attrs.type&&(null!=(t=e.attrs.from)?t.match(/@conference/):void 0)&&null!=e.getChild("query","http://jabber.org/protocol/disco#info")},handlePresence:function(e){var t,n;return e.is("presence")&&e.attrs.from!==(null!=(t=this.server.jid)?t.bare().toString():void 0)&&(void 0===(n=e.attrs.type)||"unavailable"===n)&&e.attrs.from.match(/@conference/)},handlePresenceError:function(e){var t,n;return e.is("presence")&&"error"===e.attrs.type&&e.attrs.to===(null!=(t=this.server.jid)?t.toString():void 0)&&(null!=(n=e.attrs.from)?n.match(/@conference/):void 0)}},t.prototype.handleInfo=function(e){var t,r,i,o,s,a,c,u,l,f,p,h,d,g,m,v,y,b,_,w,S;for(d=e.getChild("query"),t={},m=null!=(g=d.getChild("attributes"))?g.children:void 0,i=0,a=m.length;i<a;i++)r=m[i],r.name&&(t[r.name]=r.text());for(h=[],y=null!=(v=d.getChild("participants"))?v.getChildren("participant"):void 0,o=0,c=y.length;o<c;o++)r=y[o],h.push(r.text());for(f=[],_=null!=(b=d.getChild("occupants"))?b.getChildren("occupant"):void 0,s=0,u=_.length;s<u;s++)r=_[s],f.push(r.text());return l=d.getChild("mediaInfos"),l?(p={},l.getChildren("occupant").forEach(function(e){var t;return t=n(e),p[e.attrs.jid]=t})):p=void 0,S=null!=(w=d.getChild("subject"))?w.text():void 0,this.emit("roomInfo:"+e.attrs.id,null,{subject:S,occupants:f,participants:h,attributes:t,occupantsMedia:p})},t.prototype.handleInfoError=function(e){var t;return t=r.createErrorFromStanza(e),this.emit("roomInfo:"+e.attrs.id,t,null)},t.prototype.handleSubject=function(e){var t;return t={room:new l.JID(e.attrs.from).bare().toString(),from:e.attrs.ofrom,subject:e.getChild("subject").text()},Realtime.debug("room","subjectChange",t),Realtime.debug("subject","subjectChange",t),this.emit("subjectChange",t)},t.prototype.handleInvite=function(e){var t;return Realtime.debug("room","got invite",e),null!=(null!=(t=e.getChild("x","http://jabber.org/protocol/muc#user"))?t.getChild("invite"):void 0)?this.emit("invite",{from:e.attrs.from,room:e.attrs.to}):this.emit("invite",{from:e.attrs.from,room:e.getChild("x","jabber:x:conference").attrs.jid})},t.prototype.handleData=function(e){var t;return Realtime.debug("data","handleData",e),t=JSON.parse(e.getChild("data").text()),Realtime.debug("data","handleData","data",t),this.emit("data",{data:t,room:e.attrs.from,from:e.attrs.ofrom})},t.prototype.handleRoomAttributes=function(e){var t,n,r,i;i=e.attrs.from,t=e.getChild("attributes").text();try{n=JSON.parse(t)}catch(e){throw r=e,this.realtime._logger.error("Unable to parse room attributes",{attrText:t,err:r}),r}return this.emit("onSetAttributes",{roomJid:i,attributes:n})},n=function(e){var t,n,r,i,o,s,a,c;for(c=e.getChildren("mediastream"),o=[],t=0,n=c.length;t<n;t++){a=c[t],i=a.attrs,s={};for(r in i)"true"===i[r]?s[r]=!0:"false"===i[r]?s[r]=!1:s[r]=i[r];o.push(s)}return o},t.prototype.handlePresence=function(e){var t,r,i,o,s,a,c,u,l;if(o=e.attrs.ofrom.split("/")[0],c=e.attrs.from.split("/")[0],u=e.attrs.to.split("/")[0],(t=this._occupants)[c]||(t[c]={}),(r=this._pendingOccupants)[c]||(r[c]={}),(i=this._occupantsMedia)[c]||(i[c]={}),"unavailable"===e.attrs.type){if(l="leave",o===this.server.jid.bare().toString()&&this.emit(this._jidEvent("leave",c)),!this._occupants[c][o])return;delete this._occupants[c][o],delete this._pendingOccupants[c][o]}else if(null!=(a=e.getChild("x","orgspan:mediastream"))?a.getChildren("mediastream").length:void 0)l="media",s=n(e.getChild("x","orgspan:mediastream")),this._occupantsMedia[c][o]=s,o===this.server.jid.bare().toString()&&this.emit(this._jidEvent("media",c));else{if(l="join",o===this.server.jid.bare().toString()&&this.emit(this._jidEvent("join",c)),this._pendingOccupants[c][o])return;this._occupants[c][o]=!0,this._pendingOccupants[c][o]=!0}if("media"===l?(Realtime.debug("room","mediaChange",{room:c,from:o,mediaInfo:s}),this.emit("mediaChange",{room:c,from:o,mediaInfo:s})):(Realtime.debug("room","occupantChange",{room:c,from:o,type:l}),this.emit("occupantChange",{room:c,from:o,type:l})),o===u)return this.handleJoinRoomConfirmation(e)},t.prototype.handlePresenceError=function(e){var t,n,i,o;return o=e.attrs.from.split("/")[0],i=o.split("@")[0],t=r.createErrorFromStanza(e),n=e.attrs.originalType,"unavailable"===n?this.emit("leave:"+i,t):void 0===n?this.emit("join:"+i,t):Realtime.debug("room","Unexpected presence error type",n)},t.prototype.handleJoinRoomConfirmation=function(e){var t,n,r;if(r=e.attrs.from.split("/")[0],this._occupants[r]&&this._pendingOccupants[r]){for(n in this._occupants[r])t=n,this._pendingOccupants[r][t]||this.emit("occupantChange",{room:r,from:t,type:"leave"});return this._occupants[r]=this._pendingOccupants[r]}},t.prototype.handleMention=function(e){var t,n;return Realtime.debug("room","got mention",e),n=null!=(t=e.getChild("mention").getChild("subject"))?t.text():void 0,this.emit("mention",{from:e.attrs.ofrom,room:e.attrs.from,subject:n})},t.prototype._joinRoom=function(e){var t;return this._rooms[e]?(null!=(t=this._rooms[e])?t.isFulfilled():void 0)?this._rooms[e]:(this._rooms[e]=this._rooms[e].catch(function(t){return function(n){return t._requestJoinRoom(e)}}(this)),this._rooms[e]):this._rooms[e]=this._requestJoinRoom(e)},t.prototype._requestJoinRoom=function(e){return new i(function(t){return function(n,r){var i,o,s;return o=function(e){return e?r(e):n()},i=t._jidEvent("join",e),t.once(i,o),s=new c.Element("presence",{from:t.server.jid.toString(),to:e+"/"+t._nick,id:u.generate()}),s.c("x",{xmlns:"http://jabber.org/protocol/muc"}),t.server.send(s,function(e){if(e)return t.removeListener(i,o),r(e)})}}(this))},t.prototype._updateMediaPresence=function(e,t,n){var r,i;if(r=e.jid,i=new Error("Attempting to update media presence for an unjoined room"),!this._rooms[r])return n(i);this._rooms[r].then(function(i){return function(){var o,s,a,l,f,p;for(f=new c.Element("presence",{from:i.server.jid.toString(),to:r,id:u.generate()}),p=f.c("x",{xmlns:"orgspan:mediastream"}),l=p.c("mediastream"),e.conversationId&&(p.attrs.conversationId=e.conversationId),e.sourceCommunicationId&&(p.attrs.sourceCommunicationId=e.sourceCommunicationId),t.length&&(f.attrs.type="upgradeMedia",f.attrs["last-n"]=i.realtime.options.rtcLastN||2),o=0,s=t.length;o<s;o++)a=t[o],l.attrs[a.media]="true";return i.server.send(f,n)}}(this)).catch(function(){return n(i)})},t.prototype.getRoomInfo=function(e,t){return e=this._sanitizeJid(e),this._roomInfoLimiter.removeTokens(1,function(n){return function(r){var i,o;return r?void t(r):(i=u.generate(),o=new c.Element("iq",{id:i,to:e,type:"get"}),o.c("query",{xmlns:"http://jabber.org/protocol/disco#info"}),n.server.send(o),n.once("roomInfo:"+i,t))}}(this))},t.prototype._repairRoomPresences=function(e,t){return this.realtime._logger.info("Starting repair of room",e),this.getRoomInfo(e,function(n){return function(r,i){var o,a,c,u,l,f,p,h,d,g,m,v;if(r)return n.realtime._logger.error("Repair of room failed",e,r),void t(r);for((o=n._occupants)[e]||(o[e]={}),(a=n._pendingOccupants)[e]||(a[e]={}),(c=n._occupantsMedia)[e]||(c[e]={}),g=i.occupants,m=i.occupantsMedia,l=0,p=g.length;l<p;l++)d=g[l],n._pendingOccupants[e][d]||n._occupants[e][d]||(n._occupants[e][d]=!0,n._pendingOccupants[e][d]=!0,u={room:e,from:d,type:"join"},n.realtime._logger.warn("Missing occupantChange event was detected and will now be emitted",u),n.emit("occupantChange",u));for(m&&s.forEach(m,function(t,r){var i;if(i=n._occupantsMedia[e][r],!s.isEqual(i,t))return n._occupantsMedia[e][r]=t,u={room:e,from:r,mediaInfo:t},n.realtime._logger.warn("Missing mediaChange event was detected and will now be emitted",u),n.emit("mediaChange",u)}),v=s.keys(n._occupants[e]),f=0,h=v.length;f<h;f++)d=v[f],s.includes(g,d)||(delete n._occupants[e][d],delete n._pendingOccupants[e][d],u={room:e,from:d,type:"leave"},n.realtime._logger.warn("Missing occupantChange event was detected and will now be emitted",u),n.emit("occupantChange",u));return n.realtime._logger.info("Repair of room done",e),t()}}(this))},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,async:42,bluebird:53,limiter:129,lodash:144,ltx:145,"node-xmpp-core":161,util:309}],14:[function(e,t,n){var r,i,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e("ltx"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._rosterFetchRequested=!1,this.roster=null,this.setMaxListeners(0),this.server.on("disconnect",function(e){return function(){return e._rosterFetchRequested=!1,e.roster=null,e.requested=!1}}(this)),this.server.on("connect",function(e){return function(){if(e.active&&e.realtime.options.fetchRosterOnConnect)return e._sendRequest()}}(this))}return o(t,e),t.expose={getRoster:function(e){return Realtime.debug("roster","getRoster called",this.active),this.roster?e(null,this.roster):(this._rosterFetchRequested||this._sendRequest(),Realtime.debug("roster","waiting for roster"),this.once("roster",function(t){return function(){return Realtime.debug("roster","returning roster"),e(null,t.roster)}}(this)))},addToRoster:function(e,t){return console.error("not implemented"),t("not implemented")},removeFromRoster:function(e,t){return console.error("not implemented"),t("not implemented")}},t.exposeEvents=["rosterItem"],t.stanzas={rosterResult:function(e){return e.is("iq")&&null!=e.getChild("query","jabber:iq:roster")&&"result"===e.attrs.type},rosterUpdate:function(e){return e.is("iq")&&null!=e.getChild("query","jabber:iq:roster")&&"set"===e.attrs.type}},t.prototype.rosterResult=function(e){var t,n,r,i,o,s,a,c;for(Realtime.debug("roster","message",e),this.roster={},s=e.getChild("query","jabber:iq:roster"),a=s.getChildren("item"),t=0,i=a.length;t<i;t++)n=a[t],c=n.attrs,r=c.jid,o=c.name,this.roster[r]={name:o,jid:r},this.emit("rosterItem",{name:o,jid:r,section:"favorites",type:"person",event:"add"});return this.emit("roster")},t.prototype.rosterUpdate=function(e){var t,n,r,i,o,s,a,c,u,l;for(Realtime.debug("roster","message",e),this.roster={},s=e.getChild("query","jabber:iq:roster"),a=s.getChildren("item"),u=[],t=0,i=a.length;t<i;t++)n=a[t],c=n.attrs,r=c.jid,o=c.name,l=c.subscription,"to"===l||"both"===l?(this.roster[r]={name:o,jid:r},u.push(this.emit("rosterItem",{name:o,jid:r,section:"favorites",type:"person",event:"add"}))):"remove"===l||"none"===l?(delete this.roster[r],u.push(this.emit("rosterItem",{name:o,jid:r,section:"favorites",type:"person",event:"remove"}))):u.push(void 0);return u},t.prototype._sendRequest=function(){var e;return this._rosterFetchRequested=!0,this.realtime.connected?!this.realtime.features["orgspan:roster"]||this.server.discovered?(e=new i.Element("iq",{type:"get",from:this.server.jid.toString()}),e.c("query",{xmlns:"jabber:iq:roster"}),this.server.send(e)):void 0:this.server.once("connected",function(e){return function(){return e._sendRequest()}}(this))},t}(r)},{"./framework/Controller.coffee":17,ltx:145}],15:[function(e,t,n){var r,i,o,s=function(e,t){function n(){this.constructor=e}
for(var r in t)a.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},a={}.hasOwnProperty;i=e("ltx"),o=e("node-xmpp-core"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return s(t,e),t.exposeEvents=["videoJoin","videoLeave"],t.expose={joinVideo:function(e){var t,n;return Realtime.debug("video","startVideoChat",e),n=e.match(/@conference/)?"groupchat":"chat",t=new i.Element("message",{from:this.server.jid.bare().toString(),to:e,type:n}),t.c("video",{xmlns:"orgspan:video",from:this.server.jid.bare().toString(),type:"start"}),Realtime.debug("video","sending join",t),this.server.send(t)},leaveVideo:function(e){var t,n;return Realtime.debug("video","leaveVideoChat",e),n=e.match(/@conference/)?"groupchat":"chat",t=new i.Element("message",{from:this.server.jid.bare().toString(),to:e,type:n}),t.c("video",{xmlns:"orgspan:video",from:this.server.jid.bare().toString(),type:"leave"}),Realtime.debug("video","sending leave",t),this.server.send(t)}},t.stanzas={joinVideo:function(e){var t;return e.is("message")&&"start"===(null!=(t=e.getChild("video","orgspan:video"))?t.attrs.type:void 0)},leaveVideo:function(e){var t;return e.is("message")&&"leave"===(null!=(t=e.getChild("video","orgspan:video"))?t.attrs.type:void 0)}},t.prototype.joinVideo=function(e){var t,n;return n=new o.JID(e.attrs.from).bare().toString(),t=new o.JID(e.getChild("video","orgspan:video").attrs.from).bare().toString(),Realtime.debug("video","video join",t),this.emit("videoJoin",{from:t,room:n})},t.prototype.leaveVideo=function(e){var t,n;return n=new o.JID(e.attrs.from).bare().toString(),t=new o.JID(e.getChild("video","orgspan:video").attrs.from).bare().toString(),Realtime.debug("video","video leave",t),this.emit("videoLeave",{from:t,room:n})},t}(r)},{"./framework/Controller.coffee":17,ltx:145,"node-xmpp-core":161}],16:[function(e,t,n){var r,i,o,s,a,c,u,l,f,p=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty,d=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};f=e("node-xmpp-core"),i=e("jingle-purecloud"),u=e("jingle-stanza"),l=e("../../../../../lib/uuid"),c=e("lodash"),a=e("limiter").TokenBucket,o=e("jingle-media-data-session-purecloud"),s=e("jingle-media-session-purecloud"),r=e("./framework/Controller.coffee"),t.exports=function(e){function t(e){this.app=e,t.__super__.constructor.apply(this,arguments),this._stanzaLimiter=new a(20,25,1e3),this._stanzaLimiter.content=20,this.app.on("disconnect",function(e){return function(){if(!0!==e.realtime.options.rtcSessionSurvivability)return e.pendingSessions={},e.pendingIqs={},e.sessionManager.endAllSessions("disconnect")}}(this)),this.sessionManager=new i({iceServers:[],prepareSession:function(e){var t;return e.signalEndOfCandidates=!0,e.peerID.toString().indexOf("@conference")>-1?(t=new s(e),t.on("addChannel",function(e){return t.lastNChannel=e,e.onmessage=function(e){if(null!=e?e.data:void 0)return t.emit("lastNChange",JSON.parse(e.data))}}),t):d.call(e.applicationTypes,"rtp")>=0?d.call(e.applicationTypes,"datachannel")>=0?new o(e):new s(e):void 0}}),this.sessionManager.on("send",function(e){return function(t){var n,r;return"get"!==(n=t.type)&&"set"!==n||(t.id=l.generate(),e.pendingIqs[t.id]=t),r=u.getXml(t).xml,e._stanzaLimiter.removeTokens(1,function(){return e.server.send(r)})}}(this)),this.sessionManager.on("outgoing",function(e){return function(t){return e.emit("outgoingRtcSession",t)}}(this)),this.sessionManager.on("incoming",function(e){return function(t){return e.emit("incomingRtcSession",t)}}(this)),this.sessionManager.on("log:*",function(e){return function(t,n,r,i){return e.emit("traceRtcSession",t.split(":")[1],n,r,i)}}(this)),this.sessionManager.on("error",function(e){return function(t){return e.emit("rtcSessionError",t.error,t)}}(this)),this.pendingSessions={},this.pendingIqs={}}return p(t,e),t.exposeEvents=["requestWebrtcDump","requestIncomingRtcSession","cancelIncomingRtcSession","handledIncomingRtcSession","outgoingRtcSessionProceed","outgoingRtcSessionRejected","rtcIceServers","incomingRtcSession","outgoingRtcSession","rtcSessionError","traceRtcSession","upgradeMediaError"],t.expose={createRtcSession:function(e,t,n,r,i){var a,c,u;Realtime.debug("video","startVideoChat",e),r=r||{offerToReceiveAudio:!0,offerToReceiveVideo:!0},i=i||this.sessionManager.config.peerConnectionConstraints;try{return c={sid:t,peer:e,initiator:!0,stream:n,parent:this.sessionManager,iceServers:this.sessionManager.iceServers,constraints:i,signalEndOfCandidates:!0},u=r.offerToReceiveAudio||r.offerToReceiveVideo?new o(c):new s(c),this.sessionManager.addSession(u),u.start(r)}catch(e){return a=e,this.emit("rtcSessionError",a)}},leaveRtcSessions:function(e,t){return null==t&&(t=function(){}),"function"==typeof e&&(t=e,e=null),this.realtime.endRtcSessions({jid:e},"success",t)},endRtcSessions:function(e,t,n){var r;return null==t&&(t="success"),null==n&&(n=function(){}),"function"==typeof e?(n=e,e={jid:null}):"string"==typeof e?e={jid:e}:e||(e={}),"function"==typeof t&&(n=t,t="success"),r=e.jid||e.oneToOneJid,r?(e.oneToOneJid&&this.realtime._logger.warn('use of oneToOneJid with endRtcSessions is deprecated. please use "opts.jid"'),this.handleEndRtcSessionsWithJid(r,t),r.match(/@conference/)?this.realtime.updateMediaPresence({jid:r},[],n):n()):(this.sessionManager.endAllSessions(t),this.pendingSessions={},n(null))},startRtcSession:function(e,t,n){return null==n&&(n=function(){}),this.realtime.initiateRtcSession({jid:e,stream:t},n)},initiateRtcSession:function(e,t){var n,r,i,o,s,a;if(null==t&&(t=function(){}),s={to:e.jid,propose:{id:l.generate(),descriptions:[]}},e.stream)for(o=e.stream.getTracks(),n=0,r=o.length;n<r;n++)a=o[n],s.propose.descriptions.push({media:a.kind});return e.mediaPurpose&&s.propose.descriptions.push({media:e.mediaPurpose}),e.jid.match(/@conference/)?(i=s.propose.descriptions,0===i.length&&(i=[{media:"listener"}]),this.realtime.updateMediaPresence(e,i,t)):(this.server.send(u.getMessageXml(s).xml),this.pendingSessions[s.propose.id]=s,t(null)),s.propose.id},cancelRtcSession:function(e){var t,n;return(n=this.pendingSessions[e])?(t={to:n.to,retract:{id:e}},this.server.send(u.getMessageXml(t).xml),delete this.pendingSessions[e]):void this.emit("rtcSessionError","Cannot cancel session because it is not pending or does not exist")},acceptRtcSession:function(e){var t,n,r;return(r=this.pendingSessions[e])?(t={to:this.server.jid.bare().toString(),accept:{id:e}},this.server.send(u.getMessageXml(t).xml),n={to:r.from.toString(),proceed:{id:e}},this.server.send(u.getMessageXml(n).xml),delete this.pendingSessions[e]):void this.emit("rtcSessionError","Cannot accept session because it is not pending or does not exist")},rejectRtcSession:function(e){var t,n;return(n=this.pendingSessions[e])?(t={to:this.server.jid.bare().toString(),reject:{id:e}},this.server.send(u.getMessageXml(t).xml),t.to=n.from.toString(),this.server.send(u.getMessageXml(t).xml),delete this.pendingSessions[e]):void this.emit("rtcSessionError","Cannot reject session because it is not pending or does not exist")}},t.stanzas={jingle:function(e){return e.is("iq")&&!!("set"===e.attrs.type&&e.getChild("jingle","urn:xmpp:jingle:1")||"result"===e.attrs.type&&0===e.children.length||"error"===e.attrs.type&&e.getChild("error"))},requestWebrtcDump:function(e){return e.is("iq")&&"get"===e.attrs.type&&"webrtcDump"===e.attrs.kind},iceServers:function(e){var t;return e.is("iq")&&e.getChild("services","urn:xmpp:extdisco:1")&&("set"===(t=e.attrs.type)||"result"===t)},jingleMessageInit:function(e){return e.is("message")&&e.getChild("propose","urn:xmpp:jingle-message:0")},jingleMessageRetract:function(e){return e.is("message")&&e.getChild("retract","urn:xmpp:jingle-message:0")},jingleMessageAccept:function(e){return e.is("message")&&e.getChild("accept","urn:xmpp:jingle-message:0")},jingleMessageProceed:function(e){return e.is("message")&&e.getChild("proceed","urn:xmpp:jingle-message:0")},jingleMessageReject:function(e){return e.is("message")&&e.getChild("reject","urn:xmpp:jingle-message:0")},upgradeError:function(e){var t,n;return e.is("presence")&&"error"===e.attrs.type&&"upgradeMedia"===e.attrs.originalType&&e.attrs.to===(null!=(t=this.server.jid)?t.toString():void 0)&&(null!=(n=e.attrs.from)?n.match(/@conference/):void 0)}},t.prototype.handleEndRtcSessionsWithJid=function(e,t){return c.forEach(this.sessionManager.peers,function(n){return function(r,i){var o,s;if(!(i.indexOf(e)<0)){n.sessionManager.endPeerSessions(i,t),o=[];for(s in n.pendingSessions)n.pendingSessions[s].to===i?o.push(delete n.pendingSessions[s]):o.push(void 0);return o}}}(this))},t.prototype.jingle=function(e){var t,n,r;if(t=u.getData(e)){if("result"===(r=t.type)||"error"===r){if(!(n=this.pendingIqs[t.id]))return;t.jingle=n.jingle,delete this.pendingIqs[t.id]}return this.sessionManager.process(t.toJSON())}},t.prototype.requestWebrtcDump=function(e){return this.emit("requestWebrtcDump",e.attrs.requestId)},t.prototype.jingleMessageInit=function(e){var t,n,r,i;if(i=u.getData(e).toJSON(),i.from.bare!==this.server.jid.bare().toString()){if(e.attrs.ofrom){if(t=new f.JID(e.attrs.ofrom),t.bare().toString()===this.server.jid.bare().toString())return;i.from=t.toString()}return this.pendingSessions[i.propose.id]=i,this.emit("requestIncomingRtcSession",{sessionId:i.propose.id,conversationId:e.getChild("propose").attrs["inin-cid"],autoAnswer:"true"===e.getChild("propose").attrs["inin-autoanswer"],persistentConnectionId:e.getChild("propose").attrs["inin-persistent-cid"],roomJid:(null!=(n=i.ofrom)?n.full:void 0)||i.ofrom||(null!=(r=i.from)?r.full:void 0)||i.from,fromJid:i.from.full||i.from})}},t.prototype.jingleMessageRetract=function(e){var t;return t=u.getData(e),this.emit("cancelIncomingRtcSession",t.retract.id),delete this.pendingSessions[t.retract.id]},t.prototype.jingleMessageAccept=function(e){var t;if(t=u.getData(e),t.from.toString()!==this.server.jid.toString())return this.emit("handledIncomingRtcSession",t.accept.id),delete this.pendingSessions[t.accept.id]},t.prototype.jingleMessageProceed=function(e){var t;return t=u.getData(e),this.emit("outgoingRtcSessionProceed",t.proceed.id,t.from.full)},t.prototype.jingleMessageReject=function(e){var t;if(t=u.getData(e),t.from.toString()!==this.server.jid.toString())return t.from.bare===this.server.jid.bare().toString()?this.emit("handledIncomingRtcSession",t.reject.id):this.emit("outgoingRtcSessionRejected",t.reject.id),delete this.pendingSessions[t.reject.id]},t.prototype.iceServers=function(e){var t,n,r,i;return r=u.getData(e).services,i=r.services,r.type?(n=r.type.split(","),n.forEach(function(e){return function(t){return c.remove(e.sessionManager.iceServers,{type:t})}}(this))):null==(t=this.sessionManager).iceServers&&(t.iceServers=[]),i.forEach(function(e){return function(t){var n,r,i,o,s;if("stun"===(o=t.type)||"stuns"===o||"turn"===o||"turns"===o)return r={type:t.type},i=t.port?":"+t.port:"",r.urls=t.type+":"+t.host+i,"turn"!==(s=t.type)&&"turns"!==s||(t.transport&&"udp"!==t.transport&&(r.urls+="?transport="+t.transport),t.username&&(r.username=t.username),t.password&&(r.credential=t.password)),n=c.find(e.sessionManager.iceServers,function(e){return e.type===r.type&&e.urls===r.urls}),n&&c.remove(e.sessionManager.iceServers,n),e.sessionManager.addICEServer(r)}}(this)),this.emit("rtcIceServers",this.sessionManager.iceServers)},t.prototype.upgradeError=function(e){return r.createErrorFromStanza(e),this.emit("upgradeMediaError",r.createErrorFromStanza(e))},t}(r)},{"../../../../../lib/uuid":24,"./framework/Controller.coffee":17,"jingle-media-data-session-purecloud":105,"jingle-media-session-purecloud":106,"jingle-purecloud":107,"jingle-stanza":111,limiter:129,lodash:144,"node-xmpp-core":161}],17:[function(e,t,n){var r,i=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;r=e("events").EventEmitter,t.exports=function(e){function t(e,t){this.server=e,this.realtime=t,this.setMaxListeners(0)}return i(t,e),t.stanzas={},t.exposeEvents=[],t.expose={},t.createErrorFromStanza=function(e){var t,n,r,i,o,s;return n=e.getChild("error"),r=null!=(o=n.getChild("text"))?o.getText():void 0,r||(r="The Realtime server reported an error"),t=new Error(r),n.attrs.code&&(t.code=parseInt(n.attrs.code,10)||n.attrs.code),s=n.getChildrenByFilter(function(e){return"urn:ietf:params:xml:ns:xmpp-stanzas"===e.getNS()}),s.length>0&&(t.xmppType=s[0].getName()),i=n.getChildrenByFilter(function(e){return"urn:realtime:errors"===e.getNS()}),i.length>0&&(t.realtimeType=i[0].getName()),t},t.prototype.createResult=function(e){return e.attrs.to=e.attrs.from,e.attrs.from=this.server.jid.toString(),e.attrs.type="result"},t}(r)},{events:86}],18:[function(e,t,n){(function(n){"use strict";var r,i,o,s,a,c,u,l,f,p,h,d,g,m,v,y,b,_,w,S,C=[].slice;window.Realtime||(o=e("events").EventEmitter,p=e("lodash").noConflict(),v=e("ltx"),_=e("../../../../lib/uuid"),m=e("socket.io-client"),b=e("socket.io-sticky-headers"),b(e("engine.io-client/lib/transports/polling-xhr"),"Realtime-Session-Id",!0),d=e("extend-helper"),a=e("jingle-purecloud"),s=e("./controllers/framework/Controller.coffee"),y=e("../../../../lib/stanzaUtils"),S=e("node-xmpp-core"),r={debugController:e("./controllers/DebugController.coffee"),activeChatController:e("./controllers/ActiveChatController.coffee"),carrierPigeonController:e("./controllers/CarrierPigeonController.coffee"),discoveryController:e("./controllers/DiscoveryController.coffee"),focusController:e("./controllers/FocusController.coffee"),groupController:e("./controllers/GroupController.coffee"),messageController:e("./controllers/MessageController.coffee"),pingController:e("./controllers/PingController.coffee"),presenceController:e("./controllers/PresenceController.coffee"),reconnectController:e("./controllers/ReconnectController.coffee"),roomController:e("./controllers/RoomController.coffee"),rosterController:e("./controllers/RosterController.coffee"),videoController:e("./controllers/VideoController.coffee"),webrtcController:e("./controllers/WebrtcController.coffee"),errorController:e("./controllers/ErrorController.coffee"),loggingController:e("./controllers/LoggingController.coffee")},w="__wrapped_"+_.generate(),h=function(){return u.debug.apply(u,arguments)},g=[],c=3e4,f=9,i=2e3,u=function(){function t(e){var n,o,c,u,f,d,m,y,b;null==e&&(e={}),this.version="1.2.336",this.connected=!1,this.socket=null,this._connectedAndBound=!1,this._disconnectRequested=!0,this._controllers={},this._reconnectId=null,this._stanzaCount=0,this._lastServerStanzaId=null,this._lastClientStanzaId=null,this._errors=0,this._focused=!0,this._defaultConnectTimeout=i,this._server=new l,this._id=_.generate(),this.eventNamespace="."+this._id,g.push(this),this.options=e,"debug"in this.options||(this.options.debug=[]),this.options.debug&&(t.debugNS=this.options.debug),null==(n=this.options).fetchGroupsOnConnect&&(n.fetchGroupsOnConnect=!0),null==(o=this.options).fetchRosterOnConnect&&(o.fetchRosterOnConnect=!0),this.setMaxListeners(0),this.features={"orgspan:location":!0,"orgspan:history":!0,"urn:xmpp:carbons:2":!0,"http://jabber.org/protocol/chatstates":!0,"jabber:x:conference":!0,"orgspan:carbons":!0,"orgspan:focus":!1,"orgspan:groups":!1,"orgspan:rooms":!1,"orgspan:activeChats":!1,"orgspan:recentlyClosed":!1,"purecloud:reconnect":!0,"purecloud:presence":!0,"purecloud:offline-role":!1},d=new a,b=d.capabilities;for(f=0,m=b.length;f<m;f++)u=b[f],this.features[u]=!0;e.roomsV2&&(this.features["orgspan:rooms"]=!0),e.focusV2&&(this.features["orgspan:focusV2"]=!0,this.features["orgspan:lastRead"]=!0),e.offlineJoinNotifications&&(this.features["purecloud:offline-role"]=!0),e.carrierPigeon&&(this.features["purecloud:carrierpigeon:raw"]=!0),p.has(e,"fastReconnects")&&(this.features["purecloud:reconnect"]=e.fastReconnects),e.recentlyClosed&&(this.features["orgspan:recentlyClosed"]=!0),$(window).on("focus"+this.eventNamespace,function(e){return function(){if(t.debug("connect","realtime focus",!e.connected,!e._disconnectRequested),e._focused=!0,e._connectTid)return e._errors=0,clearTimeout(e._connectTid),e._connectTid=null,e.connect()}}(this)),$(window).on("blur"+this.eventNamespace,function(e){return function(){return t.debug("connect","realtime blur"),e._focused=!1}}(this)),y=e.logger,this._logger=y?{warn:function(){return y.warn.apply(y,arguments)},log:function(){return y.log.apply(y,arguments)},error:function(){return y.error.apply(y,arguments)},info:function(){return y.info.apply(y,arguments)},debug:function(){return y.debug.apply(y,arguments)}}:{warn:function(){return console.warn.apply(console,arguments)},log:function(){return console.log.apply(console,arguments)},error:function(){return console.error.apply(console,arguments)},info:function(){return console.info.apply(console,arguments)},debug:function(){return console.debug.apply(console,arguments)}},Function.prototype.bind||console.warn("Function.prototype.bind is not defined (perhaps you're running in PhantomJS v1). Some Realtime functionality may not work unless this is polyfilled."),c=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},p.each(r,function(e){return function(t,n){return e._controllers[n]=new t(e._server,e),p.each(t.expose,function(t,r){return h("handler","registering exposed controller method",r),e[r]=function(){var i,o;return o=1<=arguments.length?C.call(arguments,0):[],i=function(){return h("handle","executing",r),t.apply(e._controllers[n],o)},e.connected?i():(h("handle","deferring call to",r,e.connected),e.once("connect",function(){return i()}))}}),t.exposeEvents.forEach(function(t){return e["on"+c(t)]=function(n){return e.on(t,n)},e._controllers[n].on(t,function(){var n;e.emit.apply(e,[t].concat(C.call(arguments))),(n=e._server).emit.apply(n,[t].concat(C.call(arguments)))})})}}(this)),this._server.send=function(e){return function(t,n){var r,i,o,a,c,u,l;if(!e._connectedAndBound)return void e.once("_connectedAndBound",function(){return e._server.send(t,n)});for(t=t.toString().replace(/('|&apos;)/g,"\\27"),t=v.parse(t),u=t.getChildrenByFilter(function(){return!0}),a=0,c=u.length;a<c;a++)i=u[a],i.text()&&i.text(i.text().replace(/\\27/g,"'"));return null==(r=t.attrs).id&&(r.id=_.generate()),e._lastClientStanzaId=t.attrs.id,l=t.toString(),h("stanza","[out]",l),e.socket.emit("stanza",l),n?(o=p.once(function(t){var r;return e.removeListener("result:"+t.attrs.id,o),e.removeListener("receipt:"+t.attrs.id,o),r=null,"error"===t.attrs.type&&(r=s.createErrorFromStanza(t)),n(r,t)}),e.once("result:"+t.attrs.id,o),e.once("receipt:"+t.attrs.id,o)):void 0}}(this),this._server.sendEvent=function(e){return function(){var t;return(t=e.socket).emit.apply(t,arguments)}}(this),this._server.onEvent=function(e){return function(t,n){return h("status","onEvent",t,typeof n),e.socket.on(t,n)}}(this),h("connect","realtime constructed")}var u;return t.debugNS=!1,t.debug=function(){var e,t,n,r,i;if(r=arguments[0],e=2<=arguments.length?C.call(arguments,1):[],null!=("undefined"!=typeof console&&null!==console&&null!=(i=console.log)?i.apply:void 0))return null!=this.debugNS&&(!0===this.debugNS||"string"==typeof this.debugNS&&this.debugNS===r||"object"==typeof this.debugNS&&("function"==typeof(t=this.debugNS).indexOf?t.indexOf(r):void 0)>=0)?(n=new Date,console.log.apply(console,[("function"==typeof n.toLocaleString?n.toLocaleString():void 0)||n.toString(),Date.now(),"["+r+"]"].concat(C.call(e)))):void 0},t._instances=function(){return g},u=e("ltx/lib/parsers/sax-js"),v.Parser.prototype.DefaultParser=u,t.ltx=v,t.uuid=_,t.JID=S.JID,t.version="1.2.336",d.extends(t,o),t.prototype.connect=function(){var e,n,r,o,s,a;if(h("connect","connect called",this.connected,this._connectTid,this.options),clearTimeout(this._connectTid),this._connectTid=null,!this.socket){if(h("connect","connecting..."),this._disconnectRequested=!1,a={reconnection:!1,"force new connection":!0,path:"/realtime/socket.io-1.x/",query:this.options.query},"undefined"!=typeof window&&null!==window&&null!=window.localStorage){o=window.localStorage.getItem("realtimeIoOpts");try{o=JSON.parse(o),a=p.extend(a,o)}catch(e){this._logger.warn("realtimeIoOpts is not valid JSON. Using default options.")}}return h("connect","Connecting to socket.io with",a),r=this.options.host||window.location.protocol+"//"+window.location.host,s=this.socket=m(r+"/realtime",a),b.setSocket(s),this._connectedAndBound=!1,s.once("connect",function(t){return function(){var n,r,i;if(t._logger.info("realtime connected, but not bound yet"),t.socket===s&&(t._connectTid&&(clearTimeout(t._connectTid),t._connectTid=null),i=(null!=(r=t._server.jid)?r.resource:void 0)||(t.options.jidResource||"sio")+"-"+Math.floor(1e4*Math.random()),t.options.statusOnly&&(t.connected=!0),t._server.emit("sioConnect"),!t.options.statusOnly))return n={guest:t.options.guest,resource:i,version:t.version,orgId:t.options.orgId,jidRouting:t.options.roomsV2||t.options.jidRouting,clientId:t._id},null!=t.options.orgGuid&&(n.orgGuid=t.options.orgGuid),t.options.testOpts&&(n.testOpts=t.options.testOpts),null!=t.options.authKey&&(n.authKey=t.options.authKey),t._reconnectId&&t._stanzaCount>0&&(n.reconnectId=t._reconnectId,n.reconnectStanzaCount=t._stanzaCount,n.reconnectLastServerStanzaId=t._lastServerStanzaId,n.reconnectLastClientStanzaId=t._lastClientStanzaId),s.emit("bind",n,function(n,r){var i;if(h("bind",n,r),n){if(401===(i=n.status)||403===i||429===i)return void e(n);if(412===n.status)t.emit("versionUpdate")||document.location.reload(!0);else{if(t._reconnectId)return void e(new Error("Failed to fast reconnect"));try{t.emit("error",n)}catch(e){e,p.noop()}}"undefined"!=typeof console&&null!==console&&console.error(n)}return r?(h("connect","**************** realtime connected ****************"),t._errors=0,t._server.jid=t.jid=new S.JID(r),t._controllers.presenceController.active=!0,t._connectedAndBound=!0,t.emit("_connectedAndBound"),t.connected?void 0:(t.connected=!0,t._server.emit("connect"),t.emit("connect"))):t.disconnect()})}}(this)),s.once("disconnect",function(e){return function(){var t;return e.socket=null,e._connectedAndBound=!1,e._server.emit("sioDisconnect"),e.features["purecloud:reconnect"]&&e._reconnectId?void setTimeout(function(){return e.connect()},0):(t=e.connected,e.connected=!1,e._server.jid=null,e._server.discovered=!1,h("connect","realtime disconnected!",e._connectTid,e._disconnectRequested),e._connectTid||(e._reconnectId=null,e._stanzaCount=0,e._lastServerStanzaId=null,e._lastClientStanzaId=null,t&&(e._logger.info("realtime disconnected"),e._server.emit("disconnect"),e.emit("disconnect")),e._disconnectRequested)?void 0:e._connectTid=setTimeout(function(){return e.connect()},n(e._errors,e._focused)))}}(this)),n=function(e,t){var n,r;return e<=f||t?i:(r=1e3*Math.pow(2,e-f),n=i+Math.random()*r,n=Math.min(n,c),Math.ceil(n))},e=function(e){return function(r){var i,o;return h("connect","error",r.toString(),e.connected,e._disconnectRequested,e._connectTid,e._focused,e._errors),e._errors++,401===(o=r.status||r.description)||403===o||r.toString().match(/unauthorized/i)?(e._logger.error("unauthorized",r),e.emit("unauthorized"),void e.disconnect()):e._disconnectRequested?void 0:(e.disconnect(),e._connectTid?t.debug("connect","reconnect already pending",e._connectTid):(i=n(e._errors,e._focused),e._logger.warn("realtime failed to connect "+e._errors+" times, retrying in "+i+" ms"),e._connectTid=setTimeout(function(){return e.connect()},i)))}}(this),s.on("connect_error",e),s.on("error",e),s.on("stanza",function(e){return function(t){return e.connected?e._handleStanza(t):(h("handler","deferred",t),e.once("connect",function(){return h("handler","deferred resume",t),e._handleStanza(t)}))}}(this)),this}},t.prototype.disconnect=function(){var e,t;if(h("connect","disconnect called",this.connected),t=this.connected,this._disconnectRequested=!0,this._reconnectId=null,this._stanzaCount=0,this._lastServerStanzaId=null,this._lastClientStanzaId=null,this.connected=!1,clearTimeout(this._connectTid),e=this.socket,this.socket=null,this._connectedAndBound=!1,e)return e.connected&&e.disconnect(),t&&(this._logger.info("realtime disconnected"),this._server.emit("disconnect"),this.emit("disconnect")),this},t.prototype.reconnect=function(){return this.socket?(this.socket.once("disconnect",function(e){return function(){return e.connect()}}(this)),this.disconnect()):this.connect(),this},t.prototype.onConnect=function(e){return this.on("connect",e)},t.prototype.onDisconnect=function(e){return this.on("disconnect",e)},t.prototype.addListener=function(){return this.on.apply(this,arguments)},t.prototype._handleStanza=function(e){var t,n,r,i,o,s,a,c,u,l,f,p;if(h("stanza","[in]",e.toString()),e=e.replace(/\\27/g,"&apos;"),e=v.parse(e),this._stanzaCount++,this._lastServerStanzaId=e.attrs.id,"error"===e.attrs.type)if(null!=e.getChildByAttr("code",403,null,!0))this.emit("unauthorized");else if(null!=e.getChildByAttr("code",501,null,!0))this.emit("unhandled",e);else{if(null!=(null!=(a=e.getChild("error"))?a.getChild("resource-constraint"):void 0))return void this._controllers.errorController.resourceConstraintError(e);if(null!=(null!=(c=e.getChild("error"))?c.getChild("policy-violation"):void 0))return void this._controllers.errorController.policyViolationError(e);y.hasChildWithAttr(e,"xmlns","urn:xmpp:jingle:errors:1")?this._logger.warn("jingle error",e.toString()):this._logger.error("server error",e.toString())}if((s=e.getChild("received","urn:xmpp:receipts"))?(this.emit("receipt:"+s.attrs.id,e),r=!0):(this.emit("result:"+this._lastServerStanzaId,e),r=!1),h("handler","stanza in",e,null!=(u=this._server.jid)?u.toString():void 0),!this.connected)return void this._logger.warn("A stanza with id "+e.attrs.id+" was seen while the client was not connected");i=[],l=this._controllers;for(o in l){t=l[o],h("handler","checking",t.constructor.name),f=t.constructor.stanzas;for(n in f)p=f[n],h("handler",t.constructor.name,n),p.call(t,e)&&(h("handled","handled by",t.constructor.name+"."+n),r=!0,i.push(t[n].bind(t)))}return i.forEach(function(t){return t(e)}),r?void 0:this._logger.error("[stanza]","unhandled stanza",e.toString())},t.prototype.destroy=function(){var e;return $(window).off(this.eventNamespace),this.connected&&this.disconnect(),e=g.indexOf(this),g.splice(e,1)},t.prototype.removeListener=function(e,n){var r;return r=n[w],r&&(arguments[1]=r),t.__super__.removeListener.apply(this,arguments)},t.prototype.on=function(e,r){var i;return i=function(){var e;try{return r.apply(this,arguments)}catch(t){return e=t,n.nextTick(function(){throw e})}},r.listener&&(i.listener=r.listener),arguments[1]=i,r[w]=i,"connect"===e||"unhandled"===e?t.__super__.on.apply(this,arguments):("rosterItem"===e?(this.features["orgspan:groups"]=!0,this.features["orgspan:focus"]=!0,this.features["orgspan:roster"]=!0,h("guest","setting controllers to active",this.connected),this._controllers.focusController.active=!0,this._controllers.groupController.active=!0,this._controllers.rosterController.active=!0,this.connected&&(h("guest","triggering events",this._controllers.focusController.takeFocus),this.takeFocus(),this._controllers.groupController._sendRequest(),this._controllers.rosterController._sendRequest())):"activeChat"===e&&(this.features["orgspan:activeChats"]=!0,this._controllers.activeChatController.active=!0,this.connected&&this._controllers.activeChatController._sendRequest()),t.__super__.on.apply(this,arguments))},t}(),l=function(){function e(){this.setMaxListeners(0),this.jid=null,this.discovered=!1}return d.extends(e,o),e}(),t.exports=window.Realtime=u)}).call(this,e("_process"))},{"../../../../lib/stanzaUtils":23,"../../../../lib/uuid":24,"./controllers/ActiveChatController.coffee":1,"./controllers/CarrierPigeonController.coffee":2,"./controllers/DebugController.coffee":3,"./controllers/DiscoveryController.coffee":4,"./controllers/ErrorController.coffee":5,"./controllers/FocusController.coffee":6,"./controllers/GroupController.coffee":7,"./controllers/LoggingController.coffee":8,"./controllers/MessageController.coffee":9,"./controllers/PingController.coffee":10,"./controllers/PresenceController.coffee":11,"./controllers/ReconnectController.coffee":12,"./controllers/RoomController.coffee":13,"./controllers/RosterController.coffee":14,"./controllers/VideoController.coffee":15,"./controllers/WebrtcController.coffee":16,"./controllers/framework/Controller.coffee":17,_process:168,"engine.io-client/lib/transports/polling-xhr":76,events:86,"extend-helper":"extend-helper","jingle-purecloud":107,lodash:144,ltx:145,"ltx/lib/parsers/sax-js":156,"node-xmpp-core":161,"socket.io-client":"socket.io-client","socket.io-sticky-headers":221}],19:[function(e,t,n){var r,i,o,s,a,c,u,l,f;f=e("node-xmpp-core"),u=/^([a-z0-9\.\-_\+\*%\(\)]|\\27|\\22|\\26|\\2f|\\3a|\\5c)+@([-a-z0-9\._]+)(\/[a-z0-9\-\.]+)?$/i,a=/^[0-9a-f]{24}@(?:[-a-z0-9\._]+)\.orgspan\.com$/i,s=/^[0-9a-z-A-z]{24}@/,r=/@conference/,i=/@guest.orgspan.com($|\/)/,l=/(jitsi-videobridge*)/i,c=/(gjoll*)/i,o=function(){function e(){}return e.escaped=function(e){return e.toString(!1)},e.unescaped=function(e){return e.toString(!0)},e.isChatJid=function(e){return null!=e&&a.test(e)&&!r.test(e)},e.isGuestJid=function(t){return e.isValidJid(t)&&i.test(t.toString())},e.isValidJid=function(e){return u.test(e)},e.isJitsiJid=function(e){return l.test(e)},e.isGjollJid=function(e){return c.test(e)},e.isNotAdhocChatJid=function(e){return s.test(e)},e.isConferenceJid=function(e){return r.test(e.toString())},e.isConferenceShortJid=function(e){return!!e.toString().match(/^[0-9a-f]{24}@conference$/)},e.getBareJid=function(e){return("function"==typeof e.bare?e.bare():void 0)||new f.JID(e).bare()},e}(),t.exports=o},{"node-xmpp-core":161}],20:[function(e,t,n){var r,i,o,s,a=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty,u=[].slice;o=e("assert"),s=e("../lib/uuid"),i=function(e,t){return e.length<1?void t(null,!1):(0,e[0])(function(n,r){return n?void t(n):r?t(null,r):i(e.slice(1,e.length),t)})},r=function(e){function t(e){Object.defineProperty(this,"message",{value:e,writable:!0,enumerable:!1,configurable:!0}),Error.captureStackTrace(this,this.constructor)}return a(t,e),t.prototype.name="AsyncTimeoutError",t}(Error),t.exports={AsyncTimeoutError:r,ensureCallback:function(e,t,n){return function(){var i,o,a,c,u,l,f;i=Array.prototype.slice.apply(arguments),u=i[arguments.length-1],f=Date.now(),c=s.generate(),o=!1,l=null,a=function(){l=null,u.apply(null,arguments),u=null,a=null},l=setTimeout(function(){var n,i;l&&(i="The "+t+" function took longer than "+e+" ms to compete",logError(i,{id:c}),n=new r(i),n.alreadyLogged=!0,a(n))},e),i[i.length-1]=function(){var e;return o?void logError("The "+t+" function called the callback more than once",{id:c}):(o=!0,l?(clearTimeout(l),void a.apply(null,arguments)):(e=Date.now(),void logError("The "+t+" function finally completed after "+(e-f)+" ms with args",{id:c})))},n.apply(this,i),i=null}},createTimeoutFn:function(e,t,n){var r;return r=setTimeout(t,n),function(){return clearTimeout(r),e.apply(null,arguments)}},addSuccessCallbackArgs:function(){var e,t;return e=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],function(){var n;return n=Array.prototype.slice.apply(arguments),0===n.length&&n.push(null),n[0]||n.push.apply(n,t),e.apply(this,n)}},preventSync:function(e){return function(){var t,n,r,i;t=Array.prototype.slice.apply(arguments),i=t[t.length-1],o("function"==typeof i),r=!0,n=function(){var e;r?(e=this,t=arguments,setImmediate(function(){return i.apply(e,t),i=null,e=null,t=null})):(i.apply(this,arguments),i=null)
},t[t.length-1]=n,e.apply(this,t),r=!1,t=null,n=null}},or:i}},{"../lib/uuid":24,assert:41}],21:[function(e,t,n){(function(n){var r,i,o,s;s=e("ltx"),e("lodash"),i=e("underscore.string"),o="undefined"!=typeof window?function(){return Realtime.debug.apply(Realtime,arguments)}:void 0!==n&&null!==n?n.debug:void 0,r=function(){function e(){}return e.prototype.format=function(e){var t,n,r,i,o,a,c,u,l,f,p,h,d;try{for(t=e.getChild("body"),d=t.text().replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F]/gi,""),f=this.formatBody(d),h=f[0],u=f[1],e.remove("html"),r=e.c("html",{xmlns:"http://jabber.org/protocol/xhtml-im"}),l=s.parse("<body xmlns='http://www.w3.org/1999/xhtml'>"+h+"</body>"),l.parent=r,r.children.push(l),c=e.c("links"),p=u||[],i=0,o=p.length;i<o;i++)a=p[i],c.c("link").t(a)}catch(t){n=t,logError("error formatting stanza",e.toString(),"\n-------------------------\n",h,"\n-------------------------\n",n)}return e},e.prototype.formatBody=function(e){var t,n,r,s,a,c,u,l,f,p,h,d,g,m,v,y,b,_,w,S,C,x,E;for(m=[],w=[{name:"email",regex:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.(?:com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum|[A-Z]{2})$/i,replace:function(e){return"<a href='mailto:"+e+"' rel='external' target='_blank'>"+e+"</a>"}},{name:"mention",regex:/^(@[A-Z]+)(.?)$/i,replace:function(e,t,n){return"<span class='mention'>"+t+"</span>"+(n||"")}},{name:"MAGIC!",regex:/^http:\/\/gatherer.wizards.com\/Pages\/Card\/Details\.aspx[?]multiverseid=([0-9]+)$/,replace:function(e,t){var n;return m.push(n="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid="+t+"&type=card#.jpg"),o("link",n),"<a href='"+e+"' rel='external' target='_blank'>"+decodeURIComponent(i.escapeHTML(e))+"</a>"}},{name:"http link",regex:/^([\(])?((https?|ftp|www):\/\/.*?)([,)]*)$/i,replace:function(e,t,n,r,s){var a,c;null==t&&(t=""),null==s&&(s=""),a=n,a.match(/^http/i)||(a="http://"+a),o("link","Pushing link into list",a);try{c=decodeURIComponent(i.escapeHTML(n))}catch(e){return e,null}return m.push(a),t+"<a href='"+i.escapeHTML(a)+"' rel='external' target='_blank'>"+c+"</a>"+s}},{name:"tld link",regex:/^([\(])?(([-A-Z0-9-]+\.)+(?:com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum|[A-Z]{2})(?::[0-9]+)?(?:\/[-A-Z0-9-\/.%_]*)?(?:\?[-A-Z0-9+&@\#\\\/%?=~_\.]+)?)([,\)]*)$/i,replace:function(e,t,n,r,o){var s,a;null==t&&(t=""),null==o&&(o=""),s=n,s.match(/^http/)||(s="http://"+s);try{a=decodeURIComponent(i.escapeHTML(n))}catch(e){return e,null}return m.push(s),t+"<a href='"+i.escapeHTML(s)+"' rel='external' target='_blank'>"+a+"</a>"+o}}],g=e.split("\n"),a=s=0,f=g.length;s<f;a=++s){for(d=g[a],C=d.split(" "),u=c=0,p=C.length;c<p;u=++c){for(E=C[u],o("link","linking",E),v=!1,l=0,h=w.length;l<h;l++)if(y=w[l],E.match(y.regex)){if(o("link","'"+E+"'","linked with",y.name),"null"===(S=E.replace(y.regex,y.replace)))continue;C[u]=S,v=!0;break}o("link","token has match?",v),v||(C[u]=i.escapeHTML(C[u]))}o("link","formatting",d),g[a]=C.join(" "),n="&quot;|&#39;|[\\s\\(\\)\\[\\]\\{\\}*_.,;:?!'\"-]|</?(?:em|strong|del)>",b={_:"em","\\*":"strong","-":"del"};for(r in b)x=b[r],t=n.replace(new RegExp(r,"g"),""),_=new RegExp("(^|"+t+")(?:"+r+")(\\S{1,2}|(?:\\S).+?(?:\\S))(?:"+r+")("+t+"|$)","g"),o("link","regex",_),g[a]=g[a].replace(_,"$1<"+x+">$2</"+x+">$3")}return e=g.join("\n"),[e,m]},e}(),t.exports=new r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lodash:144,ltx:145,"underscore.string":260}],22:[function(e,t,n){t.exports={ON_QUEUE_ID:"e08eaf1b-ee47-4fa9-a231-1200e284798f",EXTENDED_AWAY_ID:"7ffa01cd-7866-4ad7-8faa-31e11b42f51f",OLD_DND_PRESENCE:"6d5c55bd-667d-43b2-a440-443d893df631",PRESENCE_TO_PRESENCE_ID:{dnd:"31fe3bac-dea6-44b7-bed7-47f91660a1a0",chat:"6a3af858-942f-489d-9700-5f9bcdcdae9b",online:"6a3af858-942f-489d-9700-5f9bcdcdae9b",away:"5e5c5c66-ea97-4e7f-ac41-6424784829f2",xa:"7ffa01cd-7866-4ad7-8faa-31e11b42f51f",offline:"ccf3c10a-aa2c-4845-8e8d-f59fa48c58e5"},PRESENCE_ID_TO_PRESENCE:{"6a3af858-942f-489d-9700-5f9bcdcdae9b":"chat","5e5c5c66-ea97-4e7f-ac41-6424784829f2":"away","31fe3bac-dea6-44b7-bed7-47f91660a1a0":"dnd","3e36d2b0-1f1e-4a65-b55e-c24bf6e2273f":"away","ccf3c10a-aa2c-4845-8e8d-f59fa48c58e5":"offline","e08eaf1b-ee47-4fa9-a231-1200e284798f":"dnd","7ffa01cd-7866-4ad7-8faa-31e11b42f51f":"xa","3fd96123-badb-4f69-bc03-1b1ccc6d8014":"away","d2390a99-8546-bad9-8f0a-219548e8aeb0":"away","bbdff279-7ae1-48ea-bade-7831d7234c64":"dnd","227b37e2-f1d0-4dd0-8f50-badd7cf6d158":"away"},PRESENCE_NAME_TO_PRESENCE_ID:{Available:"6a3af858-942f-489d-9700-5f9bcdcdae9b",Away:"5e5c5c66-ea97-4e7f-ac41-6424784829f2",Busy:"31fe3bac-dea6-44b7-bed7-47f91660a1a0","Out of Office":"3e36d2b0-1f1e-4a65-b55e-c24bf6e2273f",Offline:"ccf3c10a-aa2c-4845-8e8d-f59fa48c58e5","On Queue":"e08eaf1b-ee47-4fa9-a231-1200e284798f",Idle:"7ffa01cd-7866-4ad7-8faa-31e11b42f51f",Meal:"3fd96123-badb-4f69-bc03-1b1ccc6d8014",Training:"d2390a99-8546-bad9-8f0a-219548e8aeb0",Meeting:"bbdff279-7ae1-48ea-bade-7831d7234c64",Break:"227b37e2-f1d0-4dd0-8f50-badd7cf6d158"},convertXMPPShowToDirectoryPresence:function(e){switch(e){case"offline":return"offline";case"chat":return"online";case"away":return"away";case"dnd":return"busy";case"xa":return"idle";default:return"online"}},convertDirectoryPresenceToXMPPShow:function(e){return e=function(){switch(e){case"idle":return"xa";case"busy":return"dnd";case"online":return"chat";default:return e}}()}}},{}],23:[function(e,t,n){t.exports={format:function(e){return"\n"+e.toString().replace("\n","").replace(/>/g,">\n")},deformat:function(e){return e.toString().replace("\n","")},hasChildWithAttr:function(e,t,n){return e.getChildrenByFilter(function(e){var r;return(null!=(r=e.attrs)?r[t]:void 0)===n},!0).length}}},{}],24:[function(e,t,n){(function(e){var t,r;t=Math.floor(32767*Math.random()),null==e.pid&&(e.pid=Math.floor(99999*Math.random())),r=e.pid.toString(16),n.generate=function(){var e,n;for(t++>=32767&&(t=0),n=Math.round(Date.now()/1e3).toString(16),e=r+t.toString(16);e.length<12;)e="0"+e;return n+=e.substr(0,12),n+=Math.floor(65536*(1+Math.random())).toString(16).substring(1),n.substr(0,24)}}).call(this,e("_process"))},{_process:168}],25:[function(e,t,n){"use strict";var r=e("./lib/JID"),i=e("./lib/tag");t.exports=function(e,t,n){return Array.isArray(e)?i.apply(null,arguments):new r(e,t,n)},t.exports.JID=r,t.exports.tag=i,t.exports.equal=function(e,t){return e.equals(t)},t.exports.is=function(e){return e instanceof r}},{"./lib/JID":26,"./lib/tag":28}],26:[function(e,t,n){"use strict";function r(e,t,n){if(this._local=null,this.user=null,this._domain=null,this._resource=null,!e||t||n){if(!t)throw new Error("Argument error");this.setLocal(e),this.setDomain(t),this.setResource(n)}else this.parseJID(e)}var i=e("./escaping");r.prototype.parseJID=function(e){var t=e.indexOf("/");-1!==t&&(this.setResource(e.substr(t+1)),e=e.substr(0,t));var n=e.indexOf("@");-1!==n&&(this.setLocal(e.substr(0,n)),e=e.substr(n+1)),this.setDomain(e)},r.prototype.toString=function(e){var t=this._domain;return this._local&&(t=this.getLocal(e)+"@"+t),this._resource&&(t=t+"/"+this._resource),t},r.prototype.bare=function(){return this._resource?new r(this._local,this._domain,null):this},r.prototype.equals=function(e){return this._local===e._local&&this._domain===e._domain&&this._resource===e._resource},r.prototype.setLocal=function(e,t){return t=t||i.detect(e),t&&(e=i.escape(e)),this._local=e&&e.toLowerCase(),this.user=this._local,this},r.prototype.setUser=function(){console.log("JID.setUser: Use JID.setLocal instead"),this.setLocal.apply(this,arguments)},r.prototype.getUser=function(){return console.log("JID.getUser: Use JID.getLocal instead"),this.getLocal.apply(this,arguments)},r.prototype.getLocal=function(e){e=e||!1;return e?i.unescape(this._local):this._local},Object.defineProperty(r.prototype,"local",{get:r.prototype.getLocal,set:r.prototype.setLocal}),r.prototype.setDomain=function(e){return this._domain=e.toLowerCase(),this},r.prototype.getDomain=function(){return this._domain},Object.defineProperty(r.prototype,"domain",{get:r.prototype.getDomain,set:r.prototype.setDomain}),r.prototype.setResource=function(e){return this._resource=e,this},r.prototype.getResource=function(){return this._resource},Object.defineProperty(r.prototype,"resource",{get:r.prototype.getResource,set:r.prototype.setResource}),r.prototype.detectEscape=i.detectEscape,r.prototype.escapeLocal=i.escape,r.prototype.unescapeLocal=i.unescape,t.exports=r},{"./escaping":27}],27:[function(e,t,n){"use strict";t.exports.detect=function(e){return!!e&&-1!==e.replace(/\\20/g,"").replace(/\\22/g,"").replace(/\\26/g,"").replace(/\\27/g,"").replace(/\\2f/g,"").replace(/\\3a/g,"").replace(/\\3c/g,"").replace(/\\3e/g,"").replace(/\\40/g,"").replace(/\\5c/g,"").search(/\\| |"|&|'|\/|:|<|>|@/g)},t.exports.escape=function(e){return null===e?null:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/"/g,"\\22").replace(/&/g,"\\26").replace(/'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40").replace(/\3a/g,"c3a")},t.exports.unescape=function(e){return null===e?null:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}},{}],28:[function(e,t,n){"use strict";var r=e("./JID");t.exports=function(){for(var e=arguments[0],t=Array.prototype.slice.call(arguments,1),n="",i=0;i<t.length;i++)n+=e[i],n+=t[i];return n+=e[e.length-1],new r(n)}},{"./JID":26}],29:[function(e,t,n){"use strict";function r(e){o.call(this);var t=this,n=e&&e.Element||u,r=e&&e.Parser||s;this.maxStanzaSize=e&&e.maxStanzaSize,this.parser=new r,this.bytesParsed=0,this.bytesParsedOnStanzaBegin=0,this.parser.on("startElement",function(e,r){if(t.element||(t.emit("startElement",e,r),t.emit("start",new u(e,r))),t.element||"stream:stream"!==e){var i;t.element?(i=new n(e,r),t.element=t.element.cnode(i)):(i=new c(e,r),t.element=i,t.bytesParsedOnStanzaBegin=t.bytesParsed)}else t.emit("streamStart",r)}),this.parser.on("endElement",function(e){t.element||t.emit("endElement",e),t.element||"stream:stream"!==e?t.element&&e===t.element.name?t.element.parent?t.element=t.element.parent:(t.emit("element",t.element),t.emit("stanza",t.element),delete t.element,delete t.bytesParsedOnStanzaBegin):t.error("xml-not-well-formed","XML parse error"):t.end()}),this.parser.on("text",function(e){t.element&&t.element.t(e)}),this.parser.on("entityDecl",function(){t.error("xml-not-well-formed","No entity declarations allowed"),t.end()}),this.parser.on("error",this.emit.bind(this,"error"))}var i=e("inherits"),o=e("events").EventEmitter,s=e("ltx/lib/parsers/ltx"),a=e("@xmpp/xml"),c=a.Stanza,u=a.Element;i(r,o),r.prototype.checkXMLHeader=function(e){var t=e.indexOf("<?xml");if(-1!==t){var n=e.indexOf("?>");if(t>=0&&n>=0&&t<n+2){var r=e.substring(t,n+2);e=e.replace(r,"")}}return e},r.prototype.write=function(e){if(this.parser){if(e=e.toString("utf8"),e=this.checkXMLHeader(e),this.bytesParsedOnStanzaBegin&&this.maxStanzaSize&&this.bytesParsed>this.bytesParsedOnStanzaBegin+this.maxStanzaSize)return void this.error("policy-violation","Maximum stanza size exceeded");this.bytesParsed+=e.length,this.parser.write(e)}},r.prototype.end=function(e){e&&this.write(e),delete this.parser,this.emit("end")},r.prototype.error=function(e,t){var n=new Error(t);n.condition=e,this.emit("error",n)},t.exports=r},{"@xmpp/xml":30,events:86,inherits:98,"ltx/lib/parsers/ltx":155}],30:[function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=e("ltx"),o=e("./lib/tag");n=t.exports=function(){return o.apply(null,arguments)},r(n,i),n.IQ=e("./lib/IQ"),n.Message=e("./lib/Message"),n.Presence=e("./lib/Presence"),n.Stanza=e("./lib/Stanza"),n.createStanza=e("./lib/createStanza"),n.parse=e("./lib/parse"),n.Parser=e("./lib/Parser"),n.tag=e("./lib/tag"),n.ltx=i},{"./lib/IQ":31,"./lib/Message":32,"./lib/Parser":33,"./lib/Presence":34,"./lib/Stanza":35,"./lib/createStanza":36,"./lib/parse":37,"./lib/tag":38,ltx:145}],31:[function(e,t,n){"use strict";function r(e){i.call(this,"iq",e)}var i=e("./Stanza");e("inherits")(r,i),t.exports=r},{"./Stanza":35,inherits:98}],32:[function(e,t,n){"use strict";function r(e){i.call(this,"message",e)}var i=e("./Stanza");e("inherits")(r,i),t.exports=r},{"./Stanza":35,inherits:98}],33:[function(e,t,n){"use strict";function r(e){s.call(this,e)}var i=e("inherits"),o=e("./createStanza"),s=e("ltx").Parser;i(r,s),r.prototype.DefaultElement=o,t.exports=r},{"./createStanza":36,inherits:98,ltx:145}],34:[function(e,t,n){"use strict";function r(e){i.call(this,"presence",e)}var i=e("./Stanza");e("inherits")(r,i),t.exports=r},{"./Stanza":35,inherits:98}],35:[function(e,t,n){"use strict";function r(e,t){o.call(this,e,t)}var i=e("inherits"),o=e("ltx").Element;i(r,o),Object.defineProperty(r.prototype,"from",{get:function(){return this.attrs.from},set:function(e){this.attrs.from=e}}),Object.defineProperty(r.prototype,"to",{get:function(){return this.attrs.to},set:function(e){this.attrs.to=e}}),Object.defineProperty(r.prototype,"id",{get:function(){return this.attrs.id},set:function(e){this.attrs.id=e}}),Object.defineProperty(r.prototype,"type",{get:function(){return this.attrs.type},set:function(e){this.attrs.type=e}}),t.exports=r},{inherits:98,ltx:145}],36:[function(e,t,n){"use strict";var r=e("./Stanza"),i=e("ltx").Element;t.exports=function(e,t){var n;switch(e){case"presence":case"message":case"iq":n=new r(e,t);break;default:n=new i(e,t)}return Array.prototype.slice.call(arguments,2).forEach(function(e){n.cnode(e)}),n}},{"./Stanza":35,ltx:145}],37:[function(e,t,n){"use strict";var r=e("./Parser"),i=e("ltx").parse;t.exports=function(e){return i(e,r)}},{"./Parser":33,ltx:145}],38:[function(e,t,n){"use strict";var r=e("ltx").tagString,i=e("./parse");t.exports=function(){return i(r.apply(null,arguments))}},{"./parse":37,ltx:145}],39:[function(e,t,n){function r(e,t,n){function r(e,i){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,t(e),t=n):0!==r.count||o||t(null,i)}var o=!1;return n=n||i,r.count=e,0===e?t():r}function i(){}t.exports=r},{}],40:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},{}],41:[function(e,t,n){(function(n){"use strict";function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function s(e){return!i(e)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(w.isFunction(e)){if(x)return e.name;var t=e.toString(),n=t.match(k);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(x||!w.isFunction(e))return w.inspect(e);var t=a(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function f(e,t,n,r,i){throw new E.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function p(e,t){e||f(e,!0,t,"==",E.ok)}function h(e,t,n,a){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===(void 0===e?"undefined":_(e))||null!==t&&"object"===(void 0===t?"undefined":_(t))){if(s(e)&&s(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;a=a||{actual:[],expected:[]};var c=a.actual.indexOf(e);return-1!==c&&c===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),g(e,t,n,a))}return n?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=d(e),o=d(t);if(i&&!o||!i&&o)return!1;if(i)return e=C.call(e),t=C.call(t),h(e,t,n);var s,a,c=T(e),u=T(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),a=c.length-1;a>=0;a--)if(c[a]!==u[a])return!1;for(a=c.length-1;a>=0;a--)if(s=c[a],!h(e[s],t[s],n,r))return!1;return!0}function m(e,t,n){h(e,t,!0)&&f(e,t,n,"notDeepStrictEqual",m)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function b(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&f(i,n,"Missing expected exception"+r);var o="string"==typeof r,s=!e&&w.isError(i),a=!e&&i&&!n;if((s&&o&&v(i,n)||a)&&f(i,n,"Got unwanted exception"+r),e&&i&&n&&!v(i,n)||!e&&i)throw i}var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=e("util/"),S=Object.prototype.hasOwnProperty,C=Array.prototype.slice,x=function(){return"foo"===function(){}.name}(),E=t.exports=p,k=/\s*function\s+([^\(\s]*)\s*/;E.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=a(t),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},w.inherits(E.AssertionError,Error),E.fail=f,E.ok=p,E.equal=function(e,t,n){e!=t&&f(e,t,n,"==",E.equal)},E.notEqual=function(e,t,n){e==t&&f(e,t,n,"!=",E.notEqual)},E.deepEqual=function(e,t,n){h(e,t,!1)||f(e,t,n,"deepEqual",E.deepEqual)},E.deepStrictEqual=function(e,t,n){h(e,t,!0)||f(e,t,n,"deepStrictEqual",E.deepStrictEqual)},E.notDeepEqual=function(e,t,n){h(e,t,!1)&&f(e,t,n,"notDeepEqual",E.notDeepEqual)},E.notDeepStrictEqual=m,E.strictEqual=function(e,t,n){e!==t&&f(e,t,n,"===",E.strictEqual)},E.notStrictEqual=function(e,t,n){e===t&&f(e,t,n,"!==",E.notStrictEqual)},E.throws=function(e,t,n){b(!0,e,t,n)},E.doesNotThrow=function(e,t,n){b(!1,e,t,n)},E.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":309}],42:[function(t,n,r){(function(t,r){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function o(){}function s(e){return e}function a(e){return!!e}function c(e){return!e}function u(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function l(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function f(e){return z(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function p(e,t){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e)}function h(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function d(e){return h(Array(e),function(e,t){return t})}function g(e,t,n){return p(e,function(e,r,i){n=t(n,e,r,i)}),n}function m(e,t){p(J(e),function(n){t(e[n],n)})}function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function y(e){var t,n,r=-1;return f(e)?(t=e.length,function(){return r++,r<t?r:null}):(n=J(e),t=n.length,function(){return r++,r<t?n[r]:null})}function b(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r)}}}function _(e){return function(t,n,r){return e(t,r)}}function w(e){return function(t,n,r){r=l(r||o),t=t||[];var i=y(t);if(e<=0)return r(null);var s=!1,a=0,c=!1;!function o(){if(s&&a<=0)return r(null);for(;a<e&&!c;){var l=i();if(null===l)return s=!0,void(a<=0&&r(null));a+=1,n(t[l],l,u(function(e){a-=1,e?(r(e),c=!0):o()}))}}()}}function S(e){return function(t,n,r){return e(B.eachOf,t,n,r)}}function C(e){return function(t,n,r,i){return e(w(n),t,r,i)}}function x(e){return function(t,n,r){return e(B.eachOfSeries,t,n,r)}}function E(e,t,n,r){r=l(r||o),t=t||[];var i=f(t)?[]:{};e(t,function(e,t,r){n(e,function(e,n){i[t]=n,r(e)})},function(e){r(e,i)})}function k(e,t,n,r){var i=[];e(t,function(e,t,r){n(e,function(n){n&&i.push({index:t,value:e}),r()})},function(){r(h(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function T(e,t,n,r){k(e,t,function(e,t){n(e,function(e){t(!e)})},r)}function j(e,t,n){return function(r,i,o,s){function a(){s&&s(n(!1,void 0))}function c(e,r,i){if(!s)return i();o(e,function(r){s&&t(r)&&(s(n(!0,e)),s=o=!1),i()})}arguments.length>3?e(r,i,c,a):(s=o,o=i,e(r,c,a))}}function R(e,t){return t}function O(e,t,n){n=n||o;var r=f(t)?[]:{};e(t,function(e,t,n){e(b(function(e,i){i.length<=1&&(i=i[0]),r[t]=i,n(e)}))},function(e){n(e,r)})}function A(e,t,n,r){var i=[];e(t,function(e,t,r){n(e,function(e,t){i=i.concat(t||[]),r(e)})},function(e){r(e,i)})}function P(e,t,n){function r(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(e.started=!0,z(t)||(t=[t]),0===t.length&&e.idle())return B.setImmediate(function(){e.drain()});p(t,function(t){var i={data:t,callback:r||o};n?e.tasks.unshift(i):e.tasks.push(i),e.tasks.length===e.concurrency&&e.saturated()}),B.setImmediate(e.process)}function i(e,t){return function(){s-=1;var n=!1,r=arguments;p(t,function(e){p(a,function(t,r){t!==e||n||(a.splice(r,1),n=!0)}),e.callback.apply(e,r)}),e.tasks.length+s===0&&e.drain(),e.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var s=0,a=[],c={tasks:[],concurrency:t,payload:n,saturated:o,empty:o,drain:o,started:!1,paused:!1,push:function(e,t){r(c,e,!1,t)},kill:function(){c.drain=o,c.tasks=[]},unshift:function(e,t){r(c,e,!0,t)},process:function(){for(;!c.paused&&s<c.concurrency&&c.tasks.length;){var t=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),n=h(t,function(e){return e.data});0===c.tasks.length&&c.empty(),s+=1,a.push(t[0]);var r=u(i(c,t));e(n,r)}},length:function(){return c.tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return c.tasks.length+s===0},pause:function(){c.paused=!0},resume:function(){if(!1!==c.paused){c.paused=!1;for(var e=Math.min(c.concurrency,c.tasks.length),t=1;t<=e;t++)B.setImmediate(c.process)}}};return c}function I(e){return b(function(t,n){t.apply(null,n.concat([b(function(t,n){"object"===("undefined"==typeof console?"undefined":i(console))&&(t?console.error&&console.error(t):console[e]&&p(n,function(t){console[e](t)}))})]))})}function D(e){return function(t,n,r){e(d(t),n,r)}}function M(e){return b(function(t,n){var r=b(function(n){var r=this,i=n.pop();return e(t,function(e,t,i){e.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function L(e){return b(function(t){var n=t.pop();t.push(function(){var e=arguments;r?B.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var r=!0;e.apply(this,t),r=!1})}var N,B={},F="object"===("undefined"==typeof self?"undefined":i(self))&&self.self===self&&self||"object"===(void 0===r?"undefined":i(r))&&r.global===r&&r||this;null!=F&&(N=F.async),B.noConflict=function(){return F.async=N,B};var U=Object.prototype.toString,z=Array.isArray||function(e){return"[object Array]"===U.call(e)},q=function(e){var t=void 0===e?"undefined":i(e);return"function"===t||"object"===t&&!!e},J=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},V="function"==typeof setImmediate&&setImmediate,G=V?function(e){V(e)}:function(e){setTimeout(e,0)};"object"===(void 0===t?"undefined":i(t))&&"function"==typeof t.nextTick?B.nextTick=t.nextTick:B.nextTick=G,B.setImmediate=V?G:B.nextTick,B.forEach=B.each=function(e,t,n){return B.eachOf(e,_(t),n)},B.forEachSeries=B.eachSeries=function(e,t,n){return B.eachOfSeries(e,_(t),n)},B.forEachLimit=B.eachLimit=function(e,t,n,r){return w(t)(e,_(n),r)},B.forEachOf=B.eachOf=function(e,t,n){function r(e){a--,e?n(e):null===i&&a<=0&&n(null)}n=l(n||o),e=e||[];for(var i,s=y(e),a=0;null!=(i=s());)a+=1,t(e[i],i,u(r));0===a&&n(null)},B.forEachOfSeries=B.eachOfSeries=function(e,t,n){function r(){var o=!0;if(null===s)return n(null);t(e[s],s,u(function(e){if(e)n(e);else{if(null===(s=i()))return n(null);o?B.setImmediate(r):r()}})),o=!1}n=l(n||o),e=e||[];var i=y(e),s=i();r()},B.forEachOfLimit=B.eachOfLimit=function(e,t,n,r){w(t)(e,n,r)},B.map=S(E),B.mapSeries=x(E),B.mapLimit=C(E),B.inject=B.foldl=B.reduce=function(e,t,n,r){B.eachOfSeries(e,function(e,r,i){n(t,e,function(e,n){t=n,i(e)})},function(e){r(e,t)})},B.foldr=B.reduceRight=function(e,t,n,r){var i=h(e,s).reverse();B.reduce(i,t,n,r)},B.transform=function(e,t,n,r){3===arguments.length&&(r=n,n=t,t=z(e)?[]:{}),B.eachOf(e,function(e,r,i){n(t,e,r,i)},function(e){r(e,t)})},B.select=B.filter=S(k),B.selectLimit=B.filterLimit=C(k),B.selectSeries=B.filterSeries=x(k),B.reject=S(T),B.rejectLimit=C(T),B.rejectSeries=x(T),B.any=B.some=j(B.eachOf,a,s),B.someLimit=j(B.eachOfLimit,a,s),B.all=B.every=j(B.eachOf,c,c),B.everyLimit=j(B.eachOfLimit,c,c),B.detect=j(B.eachOf,s,R),B.detectSeries=j(B.eachOfSeries,s,R),B.detectLimit=j(B.eachOfLimit,s,R),B.sortBy=function(e,t,n){function r(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}B.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,h(t.sort(r),function(e){return e.value}))})},B.auto=function(e,t,n){function r(e){d.unshift(e)}function i(e){var t=v(d,e);t>=0&&d.splice(t,1)}function s(){c--,p(d.slice(0),function(e){e()})}"function"==typeof arguments[1]&&(n=t,t=null),n=l(n||o);var a=J(e),c=a.length;if(!c)return n(null);t||(t=c);var u={},f=0,h=!1,d=[];r(function(){c||n(null,u)}),p(a,function(o){function a(){return f<t&&g(y,function(e,t){return e&&u.hasOwnProperty(t)},!0)&&!u.hasOwnProperty(o)}function c(){a()&&(f++,i(c),p[p.length-1](d,u))}if(!h){for(var l,p=z(e[o])?e[o]:[e[o]],d=b(function(e,t){if(f--,t.length<=1&&(t=t[0]),e){var r={};m(u,function(e,t){r[t]=e}),r[o]=t,h=!0,n(e,r)}else u[o]=t,B.setImmediate(s)}),y=p.slice(0,p.length-1),_=y.length;_--;){if(!(l=e[y[_]]))throw new Error("Has nonexistent dependency in "+y.join(", "));if(z(l)&&v(l,o)>=0)throw new Error("Has cyclic dependencies")}a()?(f++,p[p.length-1](d,u)):r(c)}})},B.retry=function(e,t,n){function r(e,t){for(;c.times;){var n=!(c.times-=1);a.push(function(e,n){return function(r){e(function(e,t){r(!e||n,{err:e,result:t})},t)}}(c.task,n)),!n&&c.interval>0&&a.push(function(e){return function(t){setTimeout(function(){t(null)},e)}}(c.interval))}B.series(a,function(t,n){n=n[n.length-1],(e||c.callback)(n.err,n.result)})}var o=5,s=0,a=[],c={times:o,interval:s},u=arguments.length;if(u<1||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return u<=2&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||o;else{if("object"!==(void 0===t?"undefined":i(t)))throw new Error("Unsupported argument type for 'times': "+(void 0===t?"undefined":i(t)));e.times=parseInt(t.times,10)||o,e.interval=parseInt(t.interval,10)||s}}(c,e),c.callback=n,c.task=t,c.callback?r():r},B.waterfall=function(e,t){function n(e){return b(function(r,i){if(r)t.apply(null,[r].concat(i));else{var o=e.next();o?i.push(n(o)):i.push(t),L(e).apply(null,i)}})}if(t=l(t||o),!z(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();n(B.iterator(e))()},B.parallel=function(e,t){O(B.eachOf,e,t)},B.parallelLimit=function(e,t,n){O(w(t),e,n)},B.series=function(e,t){O(B.eachOfSeries,e,t)},B.iterator=function(e){function t(n){function r(){return e.length&&e[n].apply(null,arguments),r.next()}return r.next=function(){return n<e.length-1?t(n+1):null},r}return t(0)},B.apply=b(function(e,t){return b(function(n){return e.apply(null,t.concat(n))})}),B.concat=S(A),B.concatSeries=x(A),B.whilst=function(e,t,n){if(n=n||o,e()){var r=b(function(i,o){i?n(i):e.apply(this,o)?t(r):n.apply(null,[null].concat(o))});t(r)}else n(null)},B.doWhilst=function(e,t,n){var r=0;return B.whilst(function(){return++r<=1||t.apply(this,arguments)},e,n)},B.until=function(e,t,n){return B.whilst(function(){return!e.apply(this,arguments)},t,n)},B.doUntil=function(e,t,n){return B.doWhilst(e,function(){return!t.apply(this,arguments)},n)},B.during=function(e,t,n){n=n||o;var r=b(function(t,r){t?n(t):(r.push(i),e.apply(this,r))}),i=function(e,i){e?n(e):i?t(r):n(null)};e(i)},B.doDuring=function(e,t,n){var r=0;B.during(function(e){r++<1?e(null,!0):t.apply(this,arguments)},e,n)},B.queue=function(e,t){return P(function(t,n){e(t[0],n)},t,1)},B.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}function r(e,t,n){for(var r=-1,i=e.length-1;r<i;){var o=r+(i-r+1>>>1);n(t,e[o])>=0?r=o:i=o-1}return r}function i(e,t,i,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(e.started=!0,z(t)||(t=[t]),0===t.length)return B.setImmediate(function(){e.drain()});p(t,function(t){var a={data:t,priority:i,callback:"function"==typeof s?s:o};e.tasks.splice(r(e.tasks,a,n)+1,0,a),e.tasks.length===e.concurrency&&e.saturated(),B.setImmediate(e.process)})}var s=B.queue(e,t);return s.push=function(e,t,n){i(s,e,t,n)},delete s.unshift,s},B.cargo=function(e,t){return P(e,1,t)},B.log=I("log"),B.dir=I("dir"),B.memoize=function(e,t){var n={},r={},i=Object.prototype.hasOwnProperty;t=t||s;var o=b(function(o){var s=o.pop(),a=t.apply(null,o);i.call(n,a)?B.setImmediate(function(){s.apply(null,n[a])}):i.call(r,a)?r[a].push(s):(r[a]=[s],e.apply(null,o.concat([b(function(e){n[a]=e;var t=r[a];delete r[a];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,e)})])))});return o.memo=n,o.unmemoized=e,o},B.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},B.times=D(B.map),B.timesSeries=D(B.mapSeries),B.timesLimit=function(e,t,n,r){return B.mapLimit(d(e),t,n,r)},B.seq=function(){var e=arguments;return b(function(t){var n=this,r=t[t.length-1];"function"==typeof r?t.pop():r=o,B.reduce(e,t,function(e,t,r){t.apply(n,e.concat([b(function(e,t){r(e,t)})]))},function(e,t){r.apply(n,[e].concat(t))})})},B.compose=function(){return B.seq.apply(null,Array.prototype.reverse.call(arguments))},B.applyEach=M(B.eachOf),B.applyEachSeries=M(B.eachOfSeries),B.forever=function(e,t){function n(e){if(e)return r(e);i(n)}var r=u(t||o),i=L(e);n()},B.ensureAsync=L,B.constant=b(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),B.wrapSync=B.asyncify=function(e){return b(function(t){var n,r=t.pop();try{n=e.apply(this,t)}catch(e){return r(e)}
q(n)&&"function"==typeof n.then?n.then(function(e){r(null,e)}).catch(function(e){r(e.message?e:new Error(e))}):r(null,n)})},"object"===(void 0===n?"undefined":i(n))&&n.exports?n.exports=B:"function"==typeof e&&e.amd?e([],function(){return B}):F.async=B}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:168}],43:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],44:[function(e,t,n){var r=e("./lib/backoff"),i=e("./lib/strategy/exponential"),o=e("./lib/strategy/fibonacci"),s=e("./lib/function_call.js");t.exports.Backoff=r,t.exports.FunctionCall=s,t.exports.FibonacciStrategy=o,t.exports.ExponentialStrategy=i,t.exports.fibonacci=function(e){return new r(new o(e))},t.exports.exponential=function(e){return new r(new i(e))},t.exports.call=function(e,t,n){var r=Array.prototype.slice.call(arguments);return e=r[0],t=r.slice(1,r.length-1),n=r[r.length-1],new s(e,t,n)}},{"./lib/backoff":45,"./lib/function_call.js":46,"./lib/strategy/exponential":47,"./lib/strategy/fibonacci":48}],45:[function(e,t,n){function r(e){i.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}var i=e("events");e("util").inherits(r,i.EventEmitter),r.prototype.failAfter=function(e){if(e<1)throw new Error("Maximum number of retry must be greater than 0. Actual: "+e);this.maxNumberOfRetry_=e},r.prototype.backoff=function(e){if(-1!==this.timeoutID_)throw new Error("Backoff in progress.");this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},r.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},r.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},t.exports=r},{events:86,util:309}],46:[function(e,t,n){function r(e){return"function"==typeof e}function i(e,t,n){if(s.EventEmitter.call(this),!r(e))throw new Error("fn should be a function.Actual: "+(void 0===e?"undefined":o(e)));if(!r(n))throw new Error("callback should be a function.Actual: "+(void 0===e?"undefined":o(e)));this.function_=e,this.arguments_=t,this.callback_=n,this.results_=[],this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.state_=i.State_.PENDING}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("events"),a=e("util"),c=e("./backoff"),u=e("./strategy/fibonacci");a.inherits(i,s.EventEmitter),i.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},i.prototype.isPending=function(){return this.state_==i.State_.PENDING},i.prototype.isRunning=function(){return this.state_==i.State_.RUNNING},i.prototype.isCompleted=function(){return this.state_==i.State_.COMPLETED},i.prototype.isAborted=function(){return this.state_==i.State_.ABORTED},i.prototype.setStrategy=function(e){if(!this.isPending())throw new Error("FunctionCall in progress.");return this.strategy_=e,this},i.prototype.getResults=function(){return this.results_.concat()},i.prototype.failAfter=function(e){if(!this.isPending())throw new Error("FunctionCall in progress.");return this.failAfter_=e,this},i.prototype.abort=function(){if(this.isCompleted())throw new Error("FunctionCall already completed.");this.isRunning()&&this.backoff_.reset(),this.state_=i.State_.ABORTED},i.prototype.start=function(e){if(this.isAborted())throw new Error("FunctionCall aborted.");if(!this.isPending())throw new Error("FunctionCall already started.");var t=this.strategy_||new u;this.backoff_=e?e(t):new c(t),this.backoff_.on("ready",this.doCall_.bind(this)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=i.State_.RUNNING,this.doCall_()},i.prototype.doCall_=function(){var e=["call"].concat(this.arguments_);s.EventEmitter.prototype.emit.apply(this,e);var t=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(t))},i.prototype.doCallback_=function(){var e=this.results_[this.results_.length-1];this.callback_.apply(null,e)},i.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.results_.push(e),s.EventEmitter.prototype.emit.apply(this,["callback"].concat(e)),e[0]?this.backoff_.backoff(e[0]):(this.state_=i.State_.COMPLETED,this.doCallback_())}},i.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},t.exports=i},{"./backoff":45,"./strategy/fibonacci":48,events:86,util:309}],47:[function(e,t,n){function r(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}var i=e("util"),o=e("./strategy");i.inherits(r,o),r.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=2*this.backoffDelay_,this.backoffDelay_},r.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},t.exports=r},{"./strategy":49,util:309}],48:[function(e,t,n){function r(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}var i=e("util"),o=e("./strategy");i.inherits(r,o),r.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},r.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},t.exports=r},{"./strategy":49,util:309}],49:[function(e,t,n){function r(e){return void 0!==e&&null!==e}function i(e){if(e=e||{},r(e.initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(r(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(r(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}e("events"),e("util");i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},t.exports=i},{events:86,util:309}],50:[function(e,t,n){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),r=0;r<e.length;r++)t[e.charCodeAt(r)]=r;n.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(n=0;n<c;n+=4)r=t[e.charCodeAt(n)],i=t[e.charCodeAt(n+1)],o=t[e.charCodeAt(n+2)],s=t[e.charCodeAt(n+3)],f[u++]=r<<2|i>>4,f[u++]=(15&i)<<4|o>>2,f[u++]=(3&o)<<6|63&s;return l}}()},{}],51:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,s,a=e.length;o=r(e),s=new f(3*a/4-o),n=o>0?a-4:a;var c=0;for(t=0;t<n;t+=4)i=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],s[c++]=i>>16&255,s[c++]=i>>8&255,s[c++]=255&i;return 2===o?(i=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,s[c++]=255&i):1===o&&(i=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,s[c++]=i>>8&255,s[c++]=255&i),s}function s(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function a(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i="",o=[],s=0,c=n-r;s<c;s+=16383)o.push(a(e,s,s+16383>c?c:s+16383));return 1===r?(t=e[n-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=c;for(var u=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,d=p.length;h<d;++h)u[h]=p[h],l[p.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],52:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}e[t]=r}}}function r(e,t){t=t||{};var r=new o;n(e);for(var i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}function i(e,t){return n(e),new Blob(e,t||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),c=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return s?a?e.Blob:i:c?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(t,n,r){(function(t,i){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){if("object"==(void 0===r?"undefined":o(r))&&void 0!==n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var s;"undefined"!=typeof window?s=window:void 0!==i?s=i:"undefined"!=typeof self&&(s=self),s.Promise=t()}}(function(){var e,n,r;return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=u}function o(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function s(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var c;try{throw new Error}catch(e){c=e}var u=e("./schedule"),l=e("./queue"),f=e("./util");i.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},i.prototype.invoke=function(e,t,n){this._trampolineEnabled?s.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},i.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=s,i.prototype.settlePromises=a),i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=c},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(u),u instanceof e){var p={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:u};f._then(t,s,void 0,l,p),u._then(a,c,void 0,l,p),l._setOnCancel(u)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(e){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=e("./promise")();o.noConflict=r,t.exports=o},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(i)}return r}function r(e){return n(e,this.pop()).apply(e,this)}function i(e){return e[this]}function o(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var s,a=e("./util"),c=a.canEvaluate;a.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=o;else if(c){var r=s(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=s(e).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,a){return function(c){var u=a._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(c instanceof f)return o(n).call(u,c)}else if("function"==typeof f){var p=o(f).call(u,c);if(p===s)return p;if(p)return o(n).call(u,c)}else if(r.isObject(c)){for(var h=i(f),d=0;d<h.length;++d){var g=h[d];if(f[g]!=c[g])continue e}return o(n).call(u,c)}}return t}}var r=e("./util"),i=e("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){if(i)return new t}function r(){var e=o.length-1;if(e>=0)return o[e]}var i=!1,o=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=o.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=c,i=!1},i=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){function i(e,t){return{promise:t}}function s(){return!1}function a(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+U.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function c(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?U.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function u(){return this._onCancelField}function l(e){this._onCancelField=e}function f(){this._cancellationParent=void 0,this._onCancelField=void 0}function p(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function h(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function d(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function g(){this._trace=new I(this._peekContext())}function m(e,t){if(z(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=E(e);U.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),U.notEnumerableProp(e,"__stackCleaned__",!0)}}}function v(e,t,n,r,i){if(void 0===e&&null!==t&&Q){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=C(a),u=c.length-1;u>=0;--u){var l=c[u];if(!J.test(l)){var f=l.match(V);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(c.length>0)for(var p=c[0],u=0;u<a.length;++u)if(a[u]===p){u>0&&(s="\n"+a[u-1]);break}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(h,!0,t)}}function y(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),b(n)}function b(e,t,r){if(ae.warnings){var i,o=new F(e);if(t)r._attachExtraTrace(o);else if(ae.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=E(o);o.stack=s.message+"\n"+s.stack.join("\n")}ne("warning",o)||k(o,"",!0)}}function _(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function w(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function S(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=r[a];if(t[i]!==c)break;t.pop(),i--}t=r}}function C(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||G.test(r),o=i&&ie(r);i&&!o&&(W&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function x(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||G.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function E(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?x(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:C(t)}}function k(e,t,n){if("undefined"!=typeof console){var r;if(U.isObject(e)){var i=e.stack;r=t+H(i,e)}else r=t+String(e);"function"==typeof L?L(r,n):"function"!=typeof console.log&&"object"!==o(console.log)||console.log(r)}}function T(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){B.throwLater(e)}"unhandledRejection"===e?ne(e,n,r)||i||k(n,"Unhandled rejection "):ne(e,r)}function j(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():U.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+R(t)+">, no stack trace)"}function R(e){return e.length<41?e:e.substr(0,38)+"..."}function O(){return"function"==typeof se}function A(e){var t=e.match(oe);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function P(e,t){if(O()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,c=0;c<i.length;++c){var u=A(i[c]);if(u){n=u.fileName,s=u.line;break}}for(var c=0;c<o.length;++c){var u=A(o[c]);if(u){r=u.fileName,a=u.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(ie=function(e){if(q.test(e))return!0;var t=A(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}}function I(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);se(this,I),t>32&&this.uncycle()}var D,M,L,N=n._getDomain,B=n._async,F=e("./errors").Warning,U=e("./util"),z=U.canAttachTrace,q=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,J=/\((?:timers\.js):\d+:\d+\)/,V=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,G=null,H=null,W=!1,X=!(0==U.env("BLUEBIRD_DEBUG")),$=!(0==U.env("BLUEBIRD_WARNINGS")||!X&&!U.env("BLUEBIRD_WARNINGS")),Y=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!X&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),Q=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&($||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),B.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){T("rejectionHandled",D,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),T("unhandledRejection",M,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return b(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=N();M="function"==typeof e?null===t?e:U.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=N();D="function"==typeof e?null===t?e:U.domainBind(t,e):void 0};var K=function(){};n.longStackTraces=function(){if(B.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ae.longStackTraces&&O()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;ae.longStackTraces=!0,K=function(){if(B.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),B.enableTrampoline(),ae.longStackTraces=!1},n.prototype._captureStackTrace=g,n.prototype._attachExtraTrace=m,r.activateLongStackTraces(),B.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return ae.longStackTraces&&O()};var Z=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return U.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!U.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return U.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!U.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!U.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),ee=function(){return U.isNode?function(){return t.emit.apply(t,arguments)}:U.global?function(e){var t="on"+e.toLowerCase(),n=U.global[t];return!!n&&(n.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),te={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:i},ne=function(e){var t=!1;try{t=ee.apply(null,arguments)}catch(e){B.throwLater(e),t=!0}var n=!1;try{n=Z(e,te[e].apply(null,arguments))}catch(e){B.throwLater(e),n=!0}return n||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&K()),"warnings"in e){var t=e.warnings;ae.warnings=!!t,Q=ae.warnings,U.isObject(t)&&"wForgottenReturn"in t&&(Q=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ae.cancellation){if(B.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=f,n.prototype._propagateFrom=p,n.prototype._onCancel=u,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=c,n.prototype._execute=a,re=p,ae.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!ae.monitoring?(ae.monitoring=!0,n.prototype._fireEvent=ne):!e.monitoring&&ae.monitoring&&(ae.monitoring=!1,n.prototype._fireEvent=s)),n},n.prototype._fireEvent=s,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var re=h,ie=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(I,Error),r.CapturedTrace=I,I.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<e;++r){var s=t[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var c=r>0?t[r-1]:this;a<e-1?(c._parent=t[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=r-2;l>=0;--l)t[l]._length=u,u++;return}}}},I.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=E(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(C(i.stack.split("\n"))),i=i._parent;S(r),w(r),U.notEnumerableProp(e,"stack",_(n,r)),U.notEnumerableProp(e,"__stackCleaned__",!0)}};var se=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():j(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,G=e,H=t;var n=Error.captureStackTrace;return ie=function(e){return q.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),
Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return G=/@/,H=t,W=!0,function(e){e.stack=(new Error).stack};var i;try{throw new Error}catch(e){i="stack"in e}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(H=function(e,t){return"string"==typeof e?e:"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t||void 0===t.name||void 0===t.message?j(t):t.toString()},null):(G=e,H=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(L=function(e){console.warn(e)},U.isNode&&t.stderr.isTTY?L=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:U.isNode||"string"!=typeof(new Error).stack||(L=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ae={warnings:$,longStackTraces:!1,cancellation:!1,monitoring:!1};return Y&&n.longStackTraces(),{longStackTraces:function(){return ae.longStackTraces},warnings:function(){return ae.warnings},cancellation:function(){return ae.cancellation},monitoring:function(){return ae.monitoring},propagateFromFunction:function(){return re},boundValueFunction:function(){return d},checkForgottenReturns:v,setBounds:P,warn:b,deprecated:y,CapturedTrace:I,fireDomEvent:Z,fireGlobalEvent:ee}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return o(this)}function r(e,n){return i(e,n,t,t)}var i=e.reduce,o=e.all;e.prototype.each=function(e){return i(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return i(this,e,t,t)},e.each=function(e,r){return i(e,r,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){if(!(this instanceof n))return new n(r);f(this,"message","string"==typeof r?r:t),f(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}function i(e){if(!(this instanceof i))return new i(e);f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,s,a=e("./es5"),c=a.freeze,u=e("./util"),l=u.inherits,f=u.notEnumerableProp,p=r("Warning","warning"),h=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),g=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(e){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<m.length;++v)"function"==typeof Array.prototype[m[v]]&&(g.prototype[m[v]]=Array.prototype[m[v]]);a.defineProperty(g.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),g.prototype.isOperational=!0;var y=0;g.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return y--,t},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:h,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:g}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},c=function(e,t){return{value:e[t]}},u=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},f=function(e){try{return Object(e).constructor.prototype}catch(e){return s}},p=function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}};t.exports={isArray:p,keys:a,names:a,defineProperty:u,getDescriptor:c,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function s(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function a(){return u.call(this,this.promise._target()._settledValue())}function c(e){if(!s(this,e))return p.e=e,p}function u(e){var i=this.promise,u=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?u.call(i._boundValue()):u.call(i._boundValue(),e);if(l===r)return l;if(void 0!==l){i._setReturnedNonUndefined();var h=n(l,i);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var d=new f("late cancellation observer");return i._attachExtraTrace(d),p.e=d,p}h.isPending()&&h._attachCancellationCallback(new o(this))}return h._then(a,c,void 0,this,void 0)}}}return i.isRejected()?(s(this),p.e=e,p):(s(this),e)}var l=e("./util"),f=t.CancellationError,p=l.errorObj,h=e("./catch_filter")(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){s(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,u,u)},t.prototype.tap=function(e){return this._passThrough(e,1,u)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,u);var r,i=new Array(n-1),o=0;for(r=0;r<n-1;++r){var s=arguments[r];if(!l.isObject(s))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+l.classString(s)));i[o++]=s}i.length=o;var a=arguments[r];return this._passThrough(h(i,a,this),1,void 0,u)},i}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=h(n[o])(e);if(r._popContext(),s===p){r._pushContext();var a=t.reject(p.e);return r._popContext(),a}var c=i(s,r);if(c instanceof t)return c}return null}function c(e,n,i,o){if(s.cancellation()){var a=new t(r),c=this._finallyPromise=new t(r);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(r))._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var u=e("./errors"),l=u.TypeError,f=e("./util"),p=f.errorObj,h=f.tryCatch,d=[];f.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),e=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=h(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},c.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=h(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},c.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=h(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(e){var n=this._promise;if(e===p)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof t)&&null===(o=a(o,this._yieldHandlers,this._promise)))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=c,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+f.classString(e));d.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new c(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var i=[].slice.call(arguments);e&&i.pop();var r=new n(i).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,s,a){function c(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=l();this._callback=null===i?t:f.domainBind(i,t),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0)}function u(e,n,i,s){if("function"!=typeof n)return r("expecting a function but got "+f.classString(n));var a=0;if(void 0!==i){if("object"!==(void 0===i?"undefined":o(i))||null===i)return t.reject(new TypeError("options argument must be an object but it is "+f.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+f.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new c(e,n,a,s).promise()}var l=t._getDomain,f=e("./util"),p=f.tryCatch,h=f.errorObj,d=t._async;f.inherits(c,n),c.prototype._asyncInit=function(){this._init$(void 0,-2)},c.prototype._init=function(){},c.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(n<0){if(n=-1*n-1,r[n]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var u=this._promise,l=this._callback,f=u._boundValue();u._pushContext();var d=p(l).call(f,e,n,o),g=u._popContext();if(a.checkForgottenReturns(d,g,null!==s?"Promise.filter":"Promise.map",u),d===h)return this._reject(d.e),!0;var m=i(d,this._promise);if(m instanceof t){m=m._target();var v=m._bitField;if(0==(50397184&v))return c>=1&&this._inFlight++,r[n]=m,m._proxy(this,-1*(n+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);d=m._value()}r[n]=d}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},c.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},c.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},c.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=a(e).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+s.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];c=s.isArray(u)?a(e).apply(l,u):a(e).call(l,u)}else c=a(e)();var f=r._popContext();return o.checkForgottenReturns(c,f,"Promise.try",r),r._resolveFromSyncValue(c),r},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(r(e)){t=new u(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=l.keys(e),i=0;i<n.length;++i){var o=n[i];f.test(o)||(t[o]=e[o])}return t}return s.markAsOriginatingFromRejection(e),e}function o(e,t){return function(n,r){if(null!==e){if(n){var o=i(a(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}var s=e("./util"),a=s.maybeWrapAsError,c=e("./errors"),u=c.OperationalError,l=e("./es5"),f=/^(?:name|message|stack|cause)$/;t.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!o.isArray(e))return r.call(n,e,t);var i=a(t).apply(n._boundValue(),[null].concat(e));i===c&&s.throwLater(i.e)}function r(e,t){var n=this,r=n._boundValue(),i=void 0===e?a(t).call(r,null):a(t).call(r,null,e);i===c&&s.throwLater(i.e)}function i(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var i=a(t).call(n._boundValue(),e);i===c&&s.throwLater(i.e)}var o=e("./util"),s=t._async,a=o.tryCatch,c=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=r;void 0!==t&&Object(t).spread&&(o=n),this._then(o,i,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){function r(){}function i(e,t){if(null==e||e.constructor!==o)throw new b("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new b("expecting a function but got "+d.classString(t))}function o(e){e!==w&&i(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function s(e){this.promise._resolveCallback(e)}function a(e){this.promise._rejectCallback(e,!1)}function c(e){var t=new o(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var u,l=function(){return new b("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new o.PromiseInspection(this._target())},p=function(e){return o.reject(new b(e))},h={},d=e("./util");u=d.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(o,"_getDomain",u);var g=e("./es5"),m=e("./async"),v=new m;g.defineProperty(o,"_async",{value:v});var y=e("./errors"),b=o.TypeError=y.TypeError;o.RangeError=y.RangeError;var _=o.CancellationError=y.CancellationError;o.TimeoutError=y.TimeoutError,o.OperationalError=y.OperationalError,o.RejectionError=y.OperationalError,o.AggregateError=y.AggregateError;var w=function(){},S={},C={},x=e("./thenables")(o,w),E=e("./promise_array")(o,w,x,p,r),k=e("./context")(o),T=k.create,j=e("./debuggability")(o,k),R=(j.CapturedTrace,e("./finally")(o,x,C)),O=e("./catch_filter")(C),A=e("./nodeback"),P=d.errorObj,I=d.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var o=arguments[n];if(!d.isObject(o))return p("Catch statement predicate: expecting an object but got "+d.classString(o));r[i++]=o}return r.length=i,e=arguments[n],this.then(void 0,O(r,e,this))}return this.then(void 0,e)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(e,t){if(j.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+d.classString(e);arguments.length>1&&(n+=", "+d.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},o.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},o.prototype.spread=function(e){return"function"!=typeof e?p("expecting a function but got "+d.classString(e)):this.all()._then(e,void 0,void 0,S,void 0)},o.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},o.prototype.error=function(e){return this.caught(d.originatesFromRejection,e)},o.getNewLibraryCopy=n.exports,o.is=function(e){return e instanceof o},o.fromNode=o.fromCallback=function(e){var t=new o(w);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=I(e)(A(t,n));return r===P&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},o.all=function(e){return new E(e).promise()},o.cast=function(e){var t=x(e);return t instanceof o||(t=new o(w),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(e){var t=new o(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},o.setScheduler=function(e){if("function"!=typeof e)throw new b("expecting a function but got "+d.classString(e));return v.setScheduler(e)},o.prototype._then=function(e,t,n,r,i){var s=void 0!==i,a=s?i:new o(w),c=this._target(),l=c._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var f=u();if(0!=(50397184&l)){var p,h,g=c._settlePromiseCtx;0!=(33554432&l)?(h=c._rejectionHandler0,p=e):0!=(16777216&l)?(h=c._fulfillmentHandler0,p=t,c._unsetRejectionIsUnhandled()):(g=c._settlePromiseLateCancellationObserver,h=new _("late cancellation observer"),c._attachExtraTrace(h),p=t),v.invoke(g,c,{handler:null===f?p:"function"==typeof p&&d.domainBind(f,p),promise:a,receiver:r,value:h})}else c._addCallbacks(e,t,a,r,f);return a},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},o.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==h)return void 0===t&&this._isBound()?this._boundValue():t},o.prototype._promiseAt=function(e){return this[4*e-4+2]},o.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},o.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(t,n,r,i,null)},o.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:d.domainBind(i,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof e&&(this[s+0]=null===i?e:d.domainBind(i,e)),"function"==typeof t&&(this[s+1]=null===i?t:d.domainBind(i,t))}return this._setLength(o+1),o},o.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},o.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var n=x(e,this);if(!(n instanceof o))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0==(50397184&i)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(r._value());else if(0!=(16777216&i))this._reject(r._reason());else{var c=new _("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},o.prototype._rejectCallback=function(e,t,n){var r=d.ensureErrorObject(e),i=r===e;if(!i&&!n&&j.warnings()){var o="a promise was rejected with a non-error: "+d.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},o.prototype._resolveFromExecutor=function(e){if(e!==w){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},o.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){r._pushContext();var o;t===S?n&&"number"==typeof n.length?o=I(e).apply(this._boundValue(),n):(o=P,o.e=new b("cannot .spread() a non-array: "+d.classString(n))):o=I(e).call(t,n);var s=r._popContext();i=r._bitField,0==(65536&i)&&(o===C?r._reject(n):o===P?r._rejectCallback(o.e,!1):(j.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(e){this._rejectionHandler0=e},o.prototype._settlePromise=function(e,t,n,i){var s=e instanceof o,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(s&&e._invokeInternalOnCancel(),n instanceof R&&n.isFinallyHandler()?(n.cancelPromise=e,I(t).call(n,i)===P&&e._reject(P.e)):t===f?e._fulfill(f.call(n)):n instanceof r?n._promiseCancelled(e):s||e instanceof E?e._cancel():n.cancel()):"function"==typeof t?s?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,i,e)):t.call(n,i,e):n instanceof r?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(i,e):n._promiseRejected(i,e)):s&&(c&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(i):e._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof o?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},o.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},o.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},o.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():v.settlePromises(this))}},o.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return v.fatalError(e,d.isNode);(65535&t)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled()}},o.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},o.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},o.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){return j.deprecated("Promise.defer","new Promise"),{promise:new o(w),resolve:s,reject:a}},d.notEnumerableProp(o,"_makeSelfResolutionError",l),e("./method")(o,w,x,p,j),e("./bind")(o,w,x,j),e("./cancel")(o,E,p,j),e("./direct_resolve")(o),e("./synchronous_inspection")(o),e("./join")(o,E,x,w,v,u),o.Promise=o,o.version="3.5.0",e("./map.js")(o,E,p,x,w,j),e("./call_get.js")(o),e("./using.js")(o,p,x,T,w,j),e("./timers.js")(o,w,j),e("./generators.js")(o,p,w,x,r,j),e("./nodeify.js")(o),e("./promisify.js")(o,w),e("./props.js")(o,E,x,p),e("./race.js")(o,w,x,p),e("./reduce.js")(o,E,p,x,w,j),e("./settle.js")(o,E,j),e("./some.js")(o,E,p),e("./filter.js")(o,w),e("./each.js")(o,w),e("./any.js")(o),d.toFastProperties(o),d.toFastProperties(o.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new o(w)),j.setBounds(m.firstLineError,d.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){function s(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function a(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=e("./util");c.isArray;return c.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=r(this._values,this._promise);if(a instanceof t){a=a._target();var u=a._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null===(a=c.asArray(a))){var l=i("expecting an array or an iterable object but got "+c.classString(a)).reason();return void this._promise._rejectCallback(l,!1)}if(0===a.length)return void(-5===o?this._resolveEmptyArray():this._resolve(s(o)));this._iterate(a)},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<n;++a){var c=r(e[a],i);c instanceof t?(c=c._target(),s=c._bitField):s=null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){
return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!S.test(e)}function i(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function s(e,t,n){var r=d.getDataPropertyOrDefault(e,t+n,_);return!!r&&i(r)}function a(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new b("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function c(e,t,n,r){for(var o=d.inheritedDataKeys(e),c=[],u=0;u<o.length;++u){var l=o[u],f=e[l],p=r===C||C(l,f,e);"function"!=typeof f||i(f)||s(e,l,t)||!r(l,f,e,p)||c.push(l,f)}return a(c,t,n),c}function u(e,r,i,o,s,a){function c(){var i=r;r===h&&(i=this);var o=new t(n);o._captureStackTrace();var s="string"==typeof l&&this!==u?this[l]:e,c=g(o,a);try{s.apply(i,m(arguments,c))}catch(e){o._rejectCallback(v(e),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),l=e;return"string"==typeof l&&(e=o),d.notEnumerableProp(c,"__isPromisified__",!0),c}function l(e,t,n,r,i){for(var o=new RegExp(x(t)+"$"),s=c(e,t,o,n),a=0,u=s.length;a<u;a+=2){var l=s[a],f=s[a+1],p=l+t;if(r===E)e[p]=E(l,h,l,f,t,i);else{var g=r(f,function(){return E(l,h,l,f,t,i)});d.notEnumerableProp(g,"__isPromisified__",!0),e[p]=g}}return d.toFastProperties(e),e}function f(e,t,n){return E(e,t,void 0,e,null,n)}var p,h={},d=e("./util"),g=e("./nodeback"),m=d.withAppended,v=d.maybeWrapAsError,y=d.canEvaluate,b=e("./errors").TypeError,_={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],S=new RegExp("^(?:"+w.join("|")+")$"),C=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},x=function(e){return e.replace(/([$])/,"\\$")},E=y?p:u;t.promisify=function(e,t){if("function"!=typeof e)throw new b("expecting a function but got "+d.classString(e));if(i(e))return e;t=Object(t);var n=void 0===t.context?h:t.context,o=!!t.multiArgs,s=f(e,n,o);return d.copyDescriptors(e,s,r),s},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!==(void 0===e?"undefined":o(e)))throw new b("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var i=t.filter;"function"!=typeof i&&(i=C);var s=t.promisifier;if("function"!=typeof s&&(s=E),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=d.inheritedDataKeys(e),c=0;c<a.length;++c){var u=e[a[c]];"constructor"!==a[c]&&d.isClass(u)&&(l(u.prototype,r,i,s,n),l(u,r,i,s,n))}return l(e,r,i,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e){var t,n=!1;if(void 0!==a&&e instanceof a)t=f(e),n=!0;else{var r=l.keys(e),i=r.length;t=new Array(2*i);for(var o=0;o<i;++o){var s=r[o];t[o]=e[s],t[o+i]=s}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function s(e){var n,s=r(e);return u(s)?(n=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof t&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,c=e("./util"),u=c.isObject,l=e("./es5");"function"==typeof Map&&(a=Map);var f=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var i=new Array(2*r.size);return r.forEach(e,i),i}}(),p=function(e){for(var t=new a,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=p(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return s(this)},t.props=function(e){return s(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},i.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,r(this,0,this,t,this._front+this._length&t-1)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){function o(e,o){var c=r(e);if(c instanceof t)return a(c);if(null===(e=s.asArray(e)))return i("expecting an array or an iterable object but got "+s.classString(e));var u=new t(n);void 0!==o&&u._propagateFrom(o,3);for(var l=u._fulfill,f=u._reject,p=0,h=e.length;p<h;++p){var d=e[p];(void 0!==d||p in e)&&t.cast(d)._then(l,f,void 0,u,null)}return u}var s=e("./util"),a=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e,n,r,i){this.constructor$(e);var s=p();this._fn=null===s?n:h.domainBind(s,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function u(e,t,n,i){return"function"!=typeof t?r("expecting a function but got "+h.classString(t)):new a(e,t,n,i).promise()}function l(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(e){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;(o=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=t._getDomain,h=e("./util"),d=h.tryCatch;h.inherits(a,n),a.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},a.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},a.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},a.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},t.prototype.reduce=function(e,t){return u(this,e,t,null)},t.reduce=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],29:[function(e,n,r){"use strict";var o,s=e("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var u=i.setImmediate,l=t.nextTick;o=s.isRecentNode?function(e){u.call(i,e)}:function(e){l.call(t,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var f=c.resolve();o=function(e){f.then(e)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:a:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(r,t);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),i()}}();n.exports=o},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e)}var o=t.PromiseInspection;e("./util").inherits(i,n),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(e),o=n.promise();return n.setHowMany(t),n.init(),o}var s=e("./util"),a=e("./errors").RangeError,c=e("./errors").AggregateError,u=s.isArray,l={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=u(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(e){this._howMany=e},i.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new c,t=this.length();t<this._values.length;++t)this._values[t]!==l&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(e){this._values.push(e)},i.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new a(t)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,r){if(l(e)){if(e instanceof t)return e;var i=o(e);if(i===u){r&&r._pushContext();var c=t.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(s(e)){var c=new t(n);return e._then(c._fulfill,c._reject,void 0,c,null),c}return a(e,i,r)}}return e}function i(e){return e.then}function o(e){try{return i(e)}catch(e){return u.e=e,u}}function s(e){try{return f.call(e,"_promise0")}catch(e){return!1}}function a(e,r,i){function o(e){a&&(a._resolveCallback(e),a=null)}function s(e){a&&(a._rejectCallback(e,f,!0),a=null)}var a=new t(n),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var f=!0,p=c.tryCatch(r).call(e,o,s);return f=!1,a&&p===u&&(a._rejectCallback(p.e,!0,!0),a=null),l}var c=e("./util"),u=c.errorObj,l=c.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function i(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function s(e){throw clearTimeout(this.handle),e}var a=e("./util"),c=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(e){return l(+this).thenReturn(e)},l=t.delay=function(e,o){var s,a;return void 0!==o?(s=t.resolve(o)._then(u,null,null,e,void 0),r.cancellation()&&o instanceof t&&s._setOnCancel(o)):(s=new t(n),a=setTimeout(function(){s._fulfill()},+e),r.cancellation()&&s._setOnCancel(new i(a)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};t.prototype.delay=function(e){return l(e,this)};var f=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new c("operation timed out"):new c(t),a.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,a,c=new i(setTimeout(function(){n.isPending()&&f(n,t,a)},e));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,s,void 0,c,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,s){function a(e){setTimeout(function(){throw e},0)}function c(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function u(e,n){function i(){if(s>=u)return l._fulfill();var o=c(e[s++]);if(o instanceof t&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),e.promise)}catch(e){return a(e)}if(o instanceof t)return o._then(i,a,null,null,null)}i()}var s=0,u=e.length,l=new t(o);return i(),l}function l(e,t,n){this._data=e,this._promise=t,this._context=n}function f(e,t,n){this.constructor$(e,t,n)}function p(e){return l.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function h(e){this.length=e,this.promise=null,this[e-1]=null}var d=e("./util"),g=e("./errors").TypeError,m=e("./util").inherits,v=d.errorObj,y=d.tryCatch,b={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():b},l.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==b?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},m(f,l),f.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},h.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[e-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,a=!0;2===e&&Array.isArray(arguments[0])?(o=arguments[0],e=o.length,a=!1):(o=arguments,e--);for(var c=new h(e),f=0;f<e;++f){var g=o[f];if(l.isDisposer(g)){var m=g;g=g.promise(),g._setDisposable(m)}else{var b=r(g);b instanceof t&&(g=b._then(p,null,null,{resources:c,index:f},void 0))}c[f]=g}for(var _=new Array(c.length),f=0;f<_.length;++f)_[f]=t.resolve(c[f]).reflect();var w=t.all(_).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}S._pushContext(),i=y(i);var r=a?i.apply(void 0,e):i(e),o=S._popContext();return s.checkForgottenReturns(r,o,"Promise.using",S),r}),S=w.lastly(function(){var e=new t.PromiseInspection(w);return u(c,e)});return c.promise=S,S._setOnCancel(c),S},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new f(e,this,i());throw new g}}},{"./errors":12,"./util":36}],36:[function(e,n,r){"use strict";function s(){try{var e=P;return P=null,e.apply(this,arguments)}catch(e){return A.e=e,A}}function a(e){return P=e,s}function c(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"===(void 0===e?"undefined":o(e))&&null!==e}function l(e){return c(e)?new Error(b(e)):e}function f(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i}function p(e,t,n){if(!R.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(e,t,n){if(c(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return R.defineProperty(e,t,r),e}function d(e){throw e}function g(e){try{if("function"==typeof e){var t=R.names(e.prototype),n=R.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=L.test(e+"")&&R.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}}function m(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function v(e){return N.test(e)}function y(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function b(e){try{return e+""}catch(e){return"[no string representation]"}}function _(e){return null!==e&&"object"===(void 0===e?"undefined":o(e))&&"string"==typeof e.message&&"string"==typeof e.name}function w(e){try{h(e,"isOperational",!0)}catch(e){}}function S(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function C(e){return _(e)&&R.propertyIsWritable(e,"stack")}function x(e){return{}.toString.call(e)}function E(e,t,n){for(var r=R.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{R.defineProperty(t,o,R.getDescriptor(e,o))}catch(e){}}}function k(e){return q?t.env[e]:void 0}function T(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function j(e,t){return e.bind(t)}var R=e("./es5"),O="undefined"==typeof navigator,A={e:{}},P,I="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:void 0!==this?this:null,D=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},M=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(R.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(e){return r}for(var s=0;s<o.length;++s){var a=o[s];if(!i[a]){i[a]=!0;var c=Object.getOwnPropertyDescriptor(e,a);null!=c&&null==c.get&&null==c.set&&r.push(a)}}e=R.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<e.length;++s)if(r.call(e[s],o))continue e;i.push(o)}return i}}(),L=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,B=function(){return"stack"in new Error?function(e){return C(e)?e:new Error(b(e))}:function(e){if(C(e))return e;try{throw new Error(b(e))}catch(e){return e}}}(),F=function(e){return R.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};F=function(e){return R.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?U(e):null}}var z=void 0!==t&&"[object process]"===x(t).toLowerCase(),q=void 0!==t&&void 0!==t.env,J={isClass:g,isIdentifier:v,inheritedDataKeys:M,getDataPropertyOrDefault:p,thrower:d,isArray:R.isArray,asArray:F,notEnumerableProp:h,isPrimitive:c,isObject:u,isError:_,canEvaluate:O,errorObj:A,tryCatch:a,inherits:D,withAppended:f,maybeWrapAsError:l,toFastProperties:m,filledRange:y,toString:b,canAttachTrace:C,ensureErrorObject:B,originatesFromRejection:S,markAsOriginatingFromRejection:w,classString:x,copyDescriptors:E,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:z,hasEnvVariables:q,env:k,global:I,getNativePromise:T,domainBind:j};J.isRecentNode=J.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),J.isNode&&J.toFastProperties(t);try{throw new Error}catch(e){J.lastLineError=e}n.exports=J},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:168}],54:[function(e,t,n){},{}],55:[function(e,t,n){},{}],56:[function(e,t,n){function r(e){if(e&&!c(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,c=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:57}],57:[function(e,t,n){(function(t){"use strict";function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?l(e,t,n):h(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return a(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function u(e,t){if(a(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function l(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n);e=i(e,r);var s=e.write(t,n);return s!==r&&(e=e.slice(0,s)),e}function f(e,t){var n=t.length<0?0:0|d(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function h(e,t){if(o.isBuffer(t)){var n=0|d(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&K(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function m(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}var u;if(i){var l=-1;for(u=n;u<a;u++)if(o(e,u)===o(t,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===c)return l*s}else-1!==l&&(u-=u-l),l=-1}else for(n+c>a&&(n=a-c),u=n;u>=0;u--){for(var f=!0,p=0;p<c;p++)if(o(e,u+p)!==o(t,p)){f=!1;break}if(f)return u}return-1}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length
;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function S(e,t,n,r){return X(V(t,e.length-n),e,n,r)}function C(e,t,n,r){return X(G(t),e,n,r)}function x(e,t,n,r){return C(e,t,n,r)}function E(e,t,n,r){return X(W(t),e,n,r)}function k(e,t,n,r){return X(H(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,n))}function j(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var c,u,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:c=e[i+1],128==(192&c)&&(f=(31&o)<<6|63&c)>127&&(s=f);break;case 3:c=e[i+1],u=e[i+2],128==(192&c)&&128==(192&u)&&(f=(15&o)<<12|(63&c)<<6|63&u)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:c=e[i+1],u=e[i+2],l=e[i+3],128==(192&c)&&128==(192&u)&&128==(192&l)&&(f=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&l)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return R(r)}function R(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=J(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function z(e){if(e=q(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(e){return Y.toByteArray(z(e))}function X(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $(e){return e!==e}var Y=e("base64-js"),Q=e("ieee754"),K=e("isarray");n.Buffer=o,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return s(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return c(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?j(this,0,e):v.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var s=i-r,a=n-t,c=Math.min(s,a),u=this.slice(r,i),l=e.slice(t,n),f=0;f<c;++f)if(u[f]!==l[f]){s=u[f],a=l[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return C(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&n<t&&t<r)for(i=s-1;i>=0;--i)e[i+t]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var a=o.isBuffer(e)?e:V(new o(e,r).toString()),c=a.length;for(s=0;s<n-t;++s)this[s+t]=a[s%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":51,ieee754:96,isarray:102}],58:[function(e,t,n){function r(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}var i=e("safe-buffer").Buffer,o=e("stream").Transform,s=e("string_decoder").StringDecoder;e("inherits")(r,o),r.prototype.update=function(e,t,n){"string"==typeof e&&(e=i.from(e,t));var r=this._update(e);return this.hashMode?this:(n&&(r=this._toString(r,n)),r)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},r.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},r.prototype._finalOrDigest=function(e){var t=this.__final()||i.alloc(0);return e&&(t=this._toString(t,e,!0)),t},r.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new s(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},t.exports=r},{inherits:98,"safe-buffer":189,stream:223,string_decoder:56}],59:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],60:[function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],61:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],62:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function c(e){return"symbol"===(void 0===e?"undefined":v(e))}function u(e){return void 0===e}function l(e){return"[object RegExp]"===m(e)}function f(e){return"object"===(void 0===e?"undefined":v(e))&&null!==e}function p(e){return"[object Date]"===m(e)}function h(e){return"[object Error]"===m(e)||e instanceof Error}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":v(e))||void 0===e}function m(e){return Object.prototype.toString.call(e)}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=c,n.isUndefined=u,n.isRegExp=l,n.isObject=f,n.isDate=p,n.isError=h,n.isFunction=d,n.isPrimitive=g,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":101}],63:[function(e,t,n){(function(n){"use strict";function r(e){u.call(this,"digest"),this._hash=e,this.buffers=[]}function i(e){u.call(this,"digest"),this._hash=e}var o=e("inherits"),s=e("./md5"),a=e("ripemd160"),c=e("sha.js"),u=e("cipher-base");o(r,u),r.prototype._update=function(e){this.buffers.push(e)},r.prototype._final=function(){var e=n.concat(this.buffers),t=this._hash(e);return this.buffers=null,t},o(i,u),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return e=e.toLowerCase(),"md5"===e?new r(s):new i("rmd160"===e||"ripemd160"===e?new a:c(e))}}).call(this,e("buffer").Buffer)},{"./md5":65,buffer:57,"cipher-base":58,inherits:98,ripemd160:187,"sha.js":199}],64:[function(e,t,n){(function(e){"use strict";function n(t){if(t.length%r!=0){var n=t.length+(r-t.length%r);t=e.concat([t,i],n)}for(var o=new Array(t.length>>>2),s=0,a=0;s<t.length;s+=r,a++)o[a]=t.readInt32LE(s);return o}var r=4,i=new e(r);i.fill(0);t.exports=function(t,r){var i=r(n(t),8*t.length);t=new e(16);for(var o=0;o<i.length;o++)t.writeInt32LE(i[o],o<<2,!0);return t}}).call(this,e("buffer").Buffer)},{buffer:57}],65:[function(e,t,n){"use strict";function r(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,l=271733878,f=0;f<e.length;f+=16){var p=n,h=r,d=i,g=l;n=o(n,r,i,l,e[f+0],7,-680876936),l=o(l,n,r,i,e[f+1],12,-389564586),i=o(i,l,n,r,e[f+2],17,606105819),r=o(r,i,l,n,e[f+3],22,-1044525330),n=o(n,r,i,l,e[f+4],7,-176418897),l=o(l,n,r,i,e[f+5],12,1200080426),i=o(i,l,n,r,e[f+6],17,-1473231341),r=o(r,i,l,n,e[f+7],22,-45705983),n=o(n,r,i,l,e[f+8],7,1770035416),l=o(l,n,r,i,e[f+9],12,-1958414417),i=o(i,l,n,r,e[f+10],17,-42063),r=o(r,i,l,n,e[f+11],22,-1990404162),n=o(n,r,i,l,e[f+12],7,1804603682),l=o(l,n,r,i,e[f+13],12,-40341101),i=o(i,l,n,r,e[f+14],17,-1502002290),r=o(r,i,l,n,e[f+15],22,1236535329),n=s(n,r,i,l,e[f+1],5,-165796510),l=s(l,n,r,i,e[f+6],9,-1069501632),i=s(i,l,n,r,e[f+11],14,643717713),r=s(r,i,l,n,e[f+0],20,-373897302),n=s(n,r,i,l,e[f+5],5,-701558691),l=s(l,n,r,i,e[f+10],9,38016083),i=s(i,l,n,r,e[f+15],14,-660478335),r=s(r,i,l,n,e[f+4],20,-405537848),n=s(n,r,i,l,e[f+9],5,568446438),l=s(l,n,r,i,e[f+14],9,-1019803690),i=s(i,l,n,r,e[f+3],14,-187363961),r=s(r,i,l,n,e[f+8],20,1163531501),n=s(n,r,i,l,e[f+13],5,-1444681467),l=s(l,n,r,i,e[f+2],9,-51403784),i=s(i,l,n,r,e[f+7],14,1735328473),r=s(r,i,l,n,e[f+12],20,-1926607734),n=a(n,r,i,l,e[f+5],4,-378558),l=a(l,n,r,i,e[f+8],11,-2022574463),i=a(i,l,n,r,e[f+11],16,1839030562),r=a(r,i,l,n,e[f+14],23,-35309556),n=a(n,r,i,l,e[f+1],4,-1530992060),l=a(l,n,r,i,e[f+4],11,1272893353),i=a(i,l,n,r,e[f+7],16,-155497632),r=a(r,i,l,n,e[f+10],23,-1094730640),n=a(n,r,i,l,e[f+13],4,681279174),l=a(l,n,r,i,e[f+0],11,-358537222),i=a(i,l,n,r,e[f+3],16,-722521979),r=a(r,i,l,n,e[f+6],23,76029189),n=a(n,r,i,l,e[f+9],4,-640364487),l=a(l,n,r,i,e[f+12],11,-421815835),i=a(i,l,n,r,e[f+15],16,530742520),r=a(r,i,l,n,e[f+2],23,-995338651),n=c(n,r,i,l,e[f+0],6,-198630844),l=c(l,n,r,i,e[f+7],10,1126891415),i=c(i,l,n,r,e[f+14],15,-1416354905),r=c(r,i,l,n,e[f+5],21,-57434055),n=c(n,r,i,l,e[f+12],6,1700485571),l=c(l,n,r,i,e[f+3],10,-1894986606),i=c(i,l,n,r,e[f+10],15,-1051523),r=c(r,i,l,n,e[f+1],21,-2054922799),n=c(n,r,i,l,e[f+8],6,1873313359),l=c(l,n,r,i,e[f+15],10,-30611744),i=c(i,l,n,r,e[f+6],15,-1560198380),r=c(r,i,l,n,e[f+13],21,1309151649),n=c(n,r,i,l,e[f+4],6,-145523070),l=c(l,n,r,i,e[f+11],10,-1120210379),i=c(i,l,n,r,e[f+2],15,718787259),r=c(r,i,l,n,e[f+9],21,-343485551),n=u(n,p),r=u(r,h),i=u(i,d),l=u(l,g)}return[n,r,i,l]}function i(e,t,n,r,i,o){return u(l(u(u(t,e),u(r,o)),i),n)}function o(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function c(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}var f=e("./make-hash");t.exports=function(e){return f(e,r)}},{"./make-hash":64}],66:[function(e,t,n){"use strict";function r(e,t){s.call(this,"digest"),"string"==typeof t&&(t=a.from(t));var n="sha512"===e||"sha384"===e?128:64;if(this._alg=e,this._key=t,t.length>n){t=("rmd160"===e?new u:l(e)).update(t).digest()}else t.length<n&&(t=a.concat([t,f],n));for(var r=this._ipad=a.allocUnsafe(n),i=this._opad=a.allocUnsafe(n),o=0;o<n;o++)r[o]=54^t[o],i[o]=92^t[o];this._hash="rmd160"===e?new u:l(e),this._hash.update(r)}var i=e("inherits"),o=e("./legacy"),s=e("cipher-base"),a=e("safe-buffer").Buffer,c=e("create-hash/md5"),u=e("ripemd160"),l=e("sha.js"),f=a.alloc(128);i(r,s),r.prototype._update=function(e){this._hash.update(e)},r.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(e).digest()},t.exports=function(e,t){return e=e.toLowerCase(),"rmd160"===e||"ripemd160"===e?new r("rmd160",t):"md5"===e?new o(c,t):new r(e,t)}},{"./legacy":67,"cipher-base":58,"create-hash/md5":65,inherits:98,ripemd160:187,"safe-buffer":189,"sha.js":199}],67:[function(e,t,n){"use strict";function r(e,t){s.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>c?t=e(t):t.length<c&&(t=o.concat([t,a],c));for(var n=this._ipad=o.allocUnsafe(c),r=this._opad=o.allocUnsafe(c),i=0;i<c;i++)n[i]=54^t[i],r[i]=92^t[i];this._hash=[n]}var i=e("inherits"),o=e("safe-buffer").Buffer,s=e("cipher-base"),a=o.alloc(128),c=64;i(r,s),r.prototype._update=function(e){this._hash.push(e)},r.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},t.exports=r},{"cipher-base":58,inherits:98,"safe-buffer":189}],68:[function(e,t,n){(function(r){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r)}}function s(){return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}}function c(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=t.exports=e("./debug"),n.log=s,n.formatArgs=o,n.save=a,n.load=c,n.useColors=i,n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(c())}).call(this,e("_process"))},{"./debug":69,_process:168}],69:[function(e,t,n){function r(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}function i(e){function t(){if(t.enabled){var e=t,r=+new Date,i=r-(u||r);e.diff=i,e.prev=u,e.curr=r,u=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;a++;var i=n.formatters[r];if("function"==typeof i){var s=o[a];t=i.call(e,s),o.splice(a,1),a--}return t}),n.formatArgs.call(e,o);(t.log||n.log||console.log.bind(console)).apply(e,o)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=r(e),"function"==typeof n.init&&n.init(t),t}function o(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i.debug=i.default=i,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u},{ms:160}],70:[function(e,t,n){t.exports=e("./lib/index")},{"./lib/index":71}],71:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":72,"engine.io-parser":84}],72:[function(e,t,n){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);t=t||{},e&&"object"===(void 0===e?"undefined":o(e))&&(t=e,e=null),e?(e=f(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=f(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized,this.forceNode=!!t.forceNode;var i="object"===(void 0===n?"undefined":o(n))&&n;i.global===i&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("./transports/index"),a=e("component-emitter"),c=e("debug")("engine.io-client:socket"),u=e("indexof"),l=e("engine.io-parser"),f=e("parseuri"),p=e("parsejson"),h=e("parseqs");t.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=l.protocol,r.Socket=r,r.Transport=e("./transport"),r.transports=e("./transports/index"),r.parser=e("engine.io-parser"),r.prototype.createTransport=function(e){c('creating transport "%s"',e);var t=i(this.query);return t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id),new s[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,
forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},r.prototype.open=function(){var e;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},r.prototype.setTransport=function(e){c("setting transport %s",e.name);var t=this;this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},r.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;f=f||t}f||(c('probe transport "%s" opened',e),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(t){if(!f)if("pong"===t.type&&"probe"===t.data){if(c('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",l),!l)return;r.priorWebsocketSuccess="websocket"===l.name,c('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){f||"closed"!==p.readyState&&(c("changing transport and sending upgrade packet"),u(),p.setTransport(l),l.send([{type:"upgrade"}]),p.emit("upgrade",l),l=null,p.upgrading=!1,p.flush())})}else{c('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=l.name,p.emit("upgradeError",n)}}))}function n(){f||(f=!0,u(),l.close(),l=null)}function i(t){var r=new Error("probe error: "+t);r.transport=l.name,n(),c('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",r)}function o(){i("transport closed")}function s(){i("socket closed")}function a(e){l&&e.name!==l.name&&(c('"%s" works - aborting "%s"',e.name,l.name),n())}function u(){l.removeListener("open",t),l.removeListener("error",i),l.removeListener("close",o),p.removeListener("close",s),p.removeListener("upgrading",a)}c('probing transport "%s"',e);var l=this.createTransport(e,{probe:1}),f=!1,p=this;r.priorWebsocketSuccess=!1,l.once("open",t),l.once("error",i),l.once("close",o),this.once("close",s),this.once("upgrading",a),l.open()},r.prototype.onOpen=function(){if(c("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){c("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},r.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(c('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(p(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else c('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},r.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){c("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},r.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},r.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function e(){r.onClose("forced close"),c("socket closing - telling transport to close"),r.transport.close()}function t(){r.removeListener("upgrade",t),r.removeListener("upgradeError",t),e()}function n(){r.once("upgrade",t),r.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},r.prototype.onError=function(e){c("socket error %j",e),r.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},r.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){c('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~u(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":73,"./transports/index":74,"component-emitter":80,debug:81,"engine.io-parser":84,indexof:97,parsejson:164,parseqs:165,parseuri:166}],73:[function(e,t,n){function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var i=e("engine.io-parser"),o=e("component-emitter");t.exports=r,o(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":80,"engine.io-parser":84}],74:[function(e,t,n){(function(t){function r(e){var n=!1,r=!1,a=!1!==e.jsonp;if(t.location){var c="https:"===location.protocol,u=location.port;u||(u=c?443:80),n=e.hostname!==location.hostname||u!==e.port,r=e.secure!==c}if(e.xdomain=n,e.xscheme=r,"open"in new i(e)&&!e.forceJSONP)return new o(e);if(!a)throw new Error("JSONP disabled");return new s(e)}var i=e("xmlhttprequest-ssl"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");n.polling=r,n.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":75,"./polling-xhr":76,"./websocket":78,"xmlhttprequest-ssl":79}],75:[function(e,t,n){(function(n){function r(){}function i(e){o.call(this,e),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=r)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=i;var a,c=/\n/g,u=/\\n/g;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function n(){r(),t()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(e){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=l,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),e=e.replace(u,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":77,"component-inherit":61}],76:[function(e,t,n){(function(n){function r(){}function i(e){if(c.call(this,e),this.requestTimeout=e.requestTimeout,n.location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd=e.hostname!==n.location.hostname||r!==e.port,this.xs=e.secure!==t}else this.extraHeaders=e.extraHeaders}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest-ssl"),c=e("./polling"),u=e("component-emitter"),l=e("component-inherit"),f=e("debug")("engine.io-client:polling-xhr");t.exports=i,t.exports.Request=o,l(i,c),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new o(e)},i.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},i.prototype.doPoll=function(){f("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),r=this;try{f("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout(function(){r.onError(t.status)},0))},f("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,e)try{this.xhr.abort()}catch(e){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var n=new Uint8Array(this.xhr.response),r=[],i=0,o=n.length;i<o;i++)r.push(n[i]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},n.document&&(n.attachEvent?n.attachEvent("onunload",s):n.addEventListener&&n.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":77,"component-emitter":80,"component-inherit":61,debug:81,"xmlhttprequest-ssl":79}],77:[function(e,t,n){function r(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),i.call(this,e)}var i=e("../transport"),o=e("parseqs"),s=e("engine.io-parser"),a=e("component-inherit"),c=e("yeast"),u=e("debug")("engine.io-client:polling");t.exports=r;var l=function(){return null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType}();a(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(e){function t(){u("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||t()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||t()}))}else t()},r.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(e){var t=this;u("polling got data %s",e);var n=function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function e(){u("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},r.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":73,"component-inherit":61,debug:81,"engine.io-parser":84,parseqs:165,"xmlhttprequest-ssl":79,yeast:324}],78:[function(e,t,n){(function(n){function r(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=f&&!e.forceNode,this.usingBrowserWebSocket||(p=i),o.call(this,e)}var i,o=e("../transport"),s=e("engine.io-parser"),a=e("parseqs"),c=e("component-inherit"),u=e("yeast"),l=e("debug")("engine.io-client:websocket"),f=n.WebSocket||n.MozWebSocket;if("undefined"==typeof window)try{i=e("ws")}catch(e){}var p=f;p||"undefined"!=typeof window||(p=i),t.exports=r,c(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new p(e):new p(e,void 0,t)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},r.prototype.write=function(e){function t(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=e.length,o=0,a=i;o<a;o++)!function(e){s.encodePacket(e,r.supportsBinary,function(o){if(!r.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),r.perMessageDeflate){("string"==typeof o?n.Buffer.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,s)}catch(e){l("websocket closed before onclose event")}--i||t()})}(e[o])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},r.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===r.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":73,"component-inherit":61,debug:81,"engine.io-parser":84,parseqs:165,ws:54,yeast:324}],79:[function(e,t,n){(function(n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":92}],80:[function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}void 0!==t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],81:[function(e,t,n){(function(r){function i(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function s(){return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}}function c(){try{return n.storage.debug}catch(e){}if(void 0!==r&&"env"in r)return r.env.DEBUG}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=t.exports=e("./debug"),n.log=s,n.formatArgs=o,n.save=a,n.load=c,n.useColors=i,n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(c())}).call(this,e("_process"))},{"./debug":82,_process:168}],82:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;c++;var i=n.formatters[r];if("function"==typeof i){var o=s[c];t=i.call(e,o),s.splice(c,1),c--}return t}),s=n.formatArgs.apply(e,s),(i.log||n.log||console.log.bind(console)).apply(e,s)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i.debug=i,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,l=0},{ms:83}],83:[function(e,t,n){function r(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*p;case"days":case"day":case"d":return n*f;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(e){return e>=f?Math.round(e/f)+"d":e>=l?Math.round(e/l)+"h":e>=u?Math.round(e/u)+"m":e>=c?Math.round(e/c)+"s":e+"ms"}function o(e){return s(e,f,"day")||s(e,l,"hour")||s(e,u,"minute")||s(e,c,"second")||e+" ms"}function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=1e3,u=60*c,l=60*u,f=24*l,p=365.25*f;t.exports=function(e,t){t=t||{};var n=void 0===e?"undefined":a(e);if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],84:[function(e,t,n){(function(t){function r(e,t){return t("b"+n.packets[e.type]+e.data.data)}function i(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=y[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}function o(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,r)},i.readAsArrayBuffer(e.data)}function s(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(v)return o(e,t,r);var i=new Uint8Array(1);return i[0]=y[e.type],r(new w([i.buffer,e.data]))}function a(e){try{e=d.decode(e)}catch(e){return!1}return e}function c(e,t,n){for(var r=new Array(e.length),i=h(e.length,n),o=0;o<e.length;o++)!function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})}(o,e[o],i)}var u,l=e("./keys"),f=e("has-binary"),p=e("arraybuffer.slice"),h=e("after"),d=e("wtf-8");t&&t.ArrayBuffer&&(u=e("base64-arraybuffer"));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),v=g||m;n.protocol=3;var y=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=l(y),_={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return i(e,n,a);if(w&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var u=y[e.type];return void 0!==e.data&&(u+=o?d.encode(String(e.data)):String(e.data)),a(""+u)},n.encodeBase64Packet=function(e,r){var i="b"+n.packets[e.type];if(w&&e.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var a=new Uint8Array(e.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];s=String.fromCharCode.apply(null,c)}return i+=t.btoa(s),r(i)},n.decodePacket=function(e,t,r){if(void 0===e)return _;if("string"==typeof e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r&&!1===(e=a(e)))return _;var i=e.charAt(0);return Number(i)==i&&b[i]?e.length>1?{type:b[i],data:e.substring(1)}:{type:b[i]}:_}var o=new Uint8Array(e),i=o[0],s=p(e,1);return w&&"blob"===t&&(s=new w([s])),{type:b[i],data:s}},n.decodeBase64Packet=function(e,t){var n=b[e.charAt(0)];if(!u)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=u.decode(e.substr(1));return"blob"===t&&w&&(r=new w([r])),{type:n,data:r}},n.encodePayload=function(e,t,r){function i(e){return e.length+":"+e}function o(e,r){n.encodePacket(e,!!s&&t,!0,function(e){r(null,i(e))})}"function"==typeof t&&(r=t,t=null);var s=f(e);return t&&s?w&&!v?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void c(e,o,function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);"function"==typeof t&&(r=t,t=null);var i;if(""==e)return r(_,0,1);for(var o,s,a="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"!=l)a+=l;else{if(""==a||a!=(o=Number(a)))return r(_,0,1);if(s=e.substr(c+1,o),a!=s.length)return r(_,0,1);if(s.length){if(i=n.decodePacket(s,t,!0),_.type==i.type&&_.data==i.data)return r(_,0,1);if(!1===r(i,c+o,u))return}c+=o,a=""}}return""!=a?r(_,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}if(!e.length)return t(new ArrayBuffer(0));c(e,r,function(e,n){var r=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}i[o++]=t?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),t(i.buffer)})},n.encodePayloadAsBlob=function(e,t){function r(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,
"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,w){var c=new w([n.buffer,a.buffer,e]);t(null,c)}})}c(e,r,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var i=e,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",l=1;255!=a[l];l++){if(u.length>310){s=!0;break}u+=a[l]}if(s)return r(_,0,1);i=p(i,2+u.length),u=parseInt(u);var f=p(i,0,u);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var h=new Uint8Array(f);f="";for(var l=0;l<h.length;l++)f+=String.fromCharCode(h[l])}o.push(f),i=p(i,u)}var d=o.length;o.forEach(function(e,i){r(n.decodePacket(e,t,!0),i,d)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":85,after:39,"arraybuffer.slice":40,"base64-arraybuffer":50,blob:52,"has-binary":90,"wtf-8":321}],85:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],86:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"===(void 0===e?"undefined":c(e))&&null!==e}function a(e){return void 0===e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,c=0;c<r;c++)u[c].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],87:[function(e,t,n){var r=[],i=r.forEach,o=r.slice;t.exports=function(e){return i.call(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e}},{}],88:[function(e,t,n){function r(e){o.call(this);var t=e||{};this.config={chunksize:16384,pacing:0};var n;for(n in t)this.config[n]=t[n];this.file=null,this.channel=null}function i(){o.call(this),this.receiveBuffer=[],this.received=0,this.metadata={},this.channel=null}var o=e("wildemitter"),s=e("util");s.inherits(r,o),r.prototype.send=function(e,t){var n=this;this.file=e,this.channel=t;var r="number"!=typeof t.bufferedAmountLowThreshold,i=0,o=function o(){var s=new window.FileReader;s.onload=function(){return function(s){n.channel.send(s.target.result),n.emit("progress",i,e.size,s.target.result),e.size>i+s.target.result.byteLength?r?window.setTimeout(o,n.config.pacing):t.bufferedAmount<=t.bufferedAmountLowThreshold&&window.setTimeout(o,0):(n.emit("progress",e.size,e.size,null),n.emit("sentFile")),i+=n.config.chunksize}}();var a=e.slice(i,i+n.config.chunksize);s.readAsArrayBuffer(a)};r||(t.bufferedAmountLowThreshold=8*this.config.chunksize,t.addEventListener("bufferedamountlow",o)),window.setTimeout(o,0)},s.inherits(i,o),i.prototype.receive=function(e,t){var n=this;e&&(this.metadata=e),this.channel=t,t.binaryType="arraybuffer",this.channel.onmessage=function(e){var t=e.data.byteLength;n.received+=t,n.receiveBuffer.push(e.data),n.emit("progress",n.received,n.metadata.size,e.data),n.received===n.metadata.size?(n.emit("receivedFile",new window.Blob(n.receiveBuffer),n.metadata),n.receiveBuffer=[]):n.received>n.metadata.size&&(console.error("received more than expected, discarding..."),n.receiveBuffer=[])}},t.exports={},t.exports.support="undefined"!=typeof window&&window&&window.File&&window.FileReader&&window.Blob,t.exports.Sender=r,t.exports.Receiver=i},{util:309,wildemitter:320}],89:[function(e,t,n){function r(e){o.call(this);var t=this;this.base=new c.Sender(e);var n=e||{};n.hash||(n.hash="sha-1"),this.hash=a.createHash(n.hash),this.base.on("progress",function(e,n,r){t.emit("progress",e,n,r),r&&t.hash.update(new Uint8Array(r))}),this.base.on("sentFile",function(){t.emit("sentFile",{hash:t.hash.digest("hex"),algo:n.hash})})}function i(e){o.call(this);var t=this;this.base=new c.Receiver(e);var n=e||{};n.hash||(n.hash="sha-1"),this.hash=a.createHash(n.hash),this.base.on("progress",function(e,n,r){t.emit("progress",e,n,r),r&&t.hash.update(new Uint8Array(r))}),this.base.on("receivedFile",function(e,n){n.actualhash=t.hash.digest("hex"),t.emit("receivedFile",e,n)})}var o=e("wildemitter"),s=e("util"),a=e("iana-hashes"),c=e("./filetransfer");s.inherits(r,o),r.prototype.send=function(){this.base.send.apply(this.base,arguments)},s.inherits(i,o),i.prototype.receive=function(){this.base.receive.apply(this.base,arguments)},Object.defineProperty(i.prototype,"metadata",{get:function(){return this.base.metadata},set:function(e){this.base.metadata=e}}),t.exports={},t.exports.support=c.support,t.exports.Sender=r,t.exports.Receiver=i},{"./filetransfer":88,"iana-hashes":94,util:309,wildemitter:320}],90:[function(e,t,n){(function(n){function r(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(o(e)){for(var r=0;r<e.length;r++)if(t(e[r]))return!0}else if(e&&"object"==(void 0===e?"undefined":i(e))){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0}return!1}return t(e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("isarray");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:91}],91:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],92:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],93:[function(e,t,n){(function(n){"use strict";function r(e){i.call(this),this._block=new n(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var i=e("stream").Transform;e("inherits")(r,i),r.prototype._transform=function(e,t,r){var i=null;try{"buffer"!==t&&(e=new n(e,t)),this.update(e)}catch(e){i=e}r(i)},r.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(e){t=e}e(t)},r.prototype.update=function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=new n(e,t||"binary"));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var s=0,a=8*e.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},r.prototype._update=function(e){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:57,inherits:98,stream:223}],94:[function(e,t,n){var r=e("create-hash"),i=e("create-hmac"),o=e("./lib/get-hashes"),s={md2:"md2",md5:"md5","sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512"},a=Object.keys(s);n.getHashes=function(){for(var e=[],t=o(),n=0,r=a.length;n<r;n++)t.indexOf(s[a[n]])>=0&&e.push(a[n]);return e},n.createHash=function(e){return e=e.toLowerCase(),s[e]&&(e=s[e]),r(e)},n.createHmac=function(e,t){return e=e.toLowerCase(),s[e]&&(e=s[e]),i(e,t)}},{"./lib/get-hashes":95,"create-hash":63,"create-hmac":66}],95:[function(e,t,n){t.exports=function(){return["sha1","sha224","sha256","sha384","sha512","md5","rmd160"]}},{}],96:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),o-=u}return(h?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),t+=s+f>=1?p/c:p*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+h]=255&s,h+=d,s/=256,u-=8);e[n+h-d]|=128*g}},{}],97:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],98:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],99:[function(e,t,n){function r(e,t){for(var n=[],r=0;r<e.length;r++)i(t,e[r])>-1&&n.push(e[r]);return n}function i(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}t.exports=r,r.big=function(e,t){for(var n=[],r={},i=0;i<t.length;i++)r[t[i]]=!0;for(var i=0;i<e.length;i++)r[e[i]]&&n.push(e[i]);return n}},{}],100:[function(e,t,n){(function(){var n,r,i,o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};n=5e3,r=e("events").EventEmitter,i=function(e){function t(e,t){if(this.interval=e.interval,this.maxSize=e.maxSize,this.callback=t,this.cache=[],null==this.interval&&(this.interval=n),null==this.maxSize&&(this.maxSize=0),"function"!=typeof this.callback)throw new Error("callback required to be function")}return s(t,e),t.prototype.cache=null,t.prototype.interval=null,t.prototype.timeoutId=null,t.prototype.push=function(e){this.cache.push(e),this.cache.length===this.maxSize&&this.burst(),this.timeoutId||(this.timeoutId=setTimeout(function(e){return function(){return e.burst()}}(this),this.interval))},t.prototype.burst=function(){return this.callback(this.cache),this.cancel(),this.emit("burst")},t.prototype.cancel=function(){this.cache=[],this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},t}(r),t.exports=i}).call(this)},{events:86}],101:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],102:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],103:[function(e,t,n){function r(e){s.call(this,e),this.pc=new a({iceServers:e.iceServers||[],useJingle:!0},e.constraints||{}),this.pc.on("ice",this.onIceCandidate.bind(this)),this.pc.on("iceConnectionStateChange",this.onIceStateChange.bind(this)),this.pc.on("addChannel",this.onChannelAdded.bind(this)),this.sender=null,this.receiver=null}var i=e("util"),o=e("extend-object"),s=e("jingle-session"),a=e("rtcpeerconnection"),c=e("filetransfer/hashed");i.inherits(r,s),r.prototype=o(r.prototype,{start:function(e){var t=this;this.state="pending",this.pc.isInitiator=!0,this.sender=new c.Sender,this.sender.on("progress",function(e,n){t._log("info","Send progress "+e+"/"+n)}),this.sender.on("sentFile",function(e){t._log("info","Sent file",e.name);var n=t.pc.localDescription.contents[0];delete n.transport,n.application={applicationType:"filetransfer",offer:{hash:{algo:e.algo,value:e.hash}}},t.send("description-info",{contents:[n]}),t.emit("sentFile",t,e)});var n=this.pc.createDataChannel("filetransfer");n.onopen=function(){t.sender.send(e,n)};var r={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this.pc.offer(r,function(n,r){if(n)return t._log("error","Could not create WebRTC offer",n),t.end("failed-application",!0);r.jingle.contents[0].application={applicationType:"filetransfer",offer:{date:e.lastModifiedDate,name:e.name,size:e.size,hash:{algo:"sha-1",value:""}}},t.send("session-initiate",r.jingle)})},accept:function(){var e=this;this._log("info","Accepted incoming session"),this.state="active",this.pc.answer(function(t,n){if(t)return e._log("error","Could not create WebRTC answer",t),e.end("failed-application");e.send("session-accept",n.jingle)})},end:function(e,t){this.pc.close(),s.prototype.end.call(this,e,t)},maybeReceivedFile:function(){this.receiver.metadata.hash.value&&(this.receiver.metadata.hash.value===this.receiver.metadata.actualhash?(this._log("info","File hash matches"),this.emit("receivedFile",this,this.receivedFile,this.receiver.metadata),this.end("success")):(this._log("error","File hash does not match"),this.end("media-error")))},onIceCandidate:function(e){this._log("info","Discovered new ICE candidate",e.jingle),this.send("transport-info",e.jingle)},onIceStateChange:function(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":"stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected";break;case"failed":this.connectionState="failed",this.end("failed-transport");break;case"closed":this.connectionState="disconnected"}},onChannelAdded:function(e){this.receiver.receive(null,e)},onSessionInitiate:function(e,t){var n=this;this._log("info","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1;var r=e.contents[0].application;this.receiver=new c.Receiver({hash:r.offer.hash.algo}),this.receiver.on("progress",function(e,t){n._log("info","Receive progress "+e+"/"+t)}),this.receiver.on("receivedFile",function(e){n.receivedFile=e,n.maybeReceivedFile()}),this.receiver.metadata=r.offer,e.contents[0].application={applicationType:"datachannel"},this.pc.handleOffer({type:"offer",jingle:e},function(e){if(e)return n._log("error","Could not create WebRTC answer"),t({condition:"general-error"});t()})},onSessionAccept:function(e,t){var n=this;this.state="active",e.contents[0].application={applicationType:"datachannel"},this.pc.handleAnswer({type:"answer",jingle:e},function(e){if(e)return n._log("error","Could not process WebRTC answer"),t({condition:"general-error"});n.emit("accepted",n),t()})},onSessionTerminate:function(e,t){this._log("info","Terminating session"),this.pc.close(),s.prototype.end.call(this,e.reason,!0),t()},onDescriptionInfo:function(e,t){var n=e.contents[0].application.offer.hash;this.receiver.metadata.hash=n,this.receiver.metadata.actualhash&&this.maybeReceivedFile(),t()},onTransportInfo:function(e,t){this.pc.processIce(e,function(){t()})}}),t.exports=r},{"extend-object":87,"filetransfer/hashed":89,"jingle-session":108,rtcpeerconnection:104,util:309}],104:[function(e,t,n){function r(e,t){var n,r=this;s.call(this),e=e||{},e.iceServers=e.iceServers||[];var i=c.browserDetails.browser;this.enableChromeNativeSimulcast=!1,t&&t.optional&&"chrome"===i&&null===navigator.appVersion.match(/Chromium\//)&&t.optional.forEach(function(e){e.enableChromeNativeSimulcast&&(r.enableChromeNativeSimulcast=!0)}),this.enableMultiStreamHacks=!1,t&&t.optional&&"chrome"===i&&t.optional.forEach(function(e){e.enableMultiStreamHacks&&(r.enableMultiStreamHacks=!0)}),this.restrictBandwidth=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetRestrictBandwidth&&(r.restrictBandwidth=e.andyetRestrictBandwidth)}),this.batchIceCandidates=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetBatchIce&&(r.batchIceCandidates=e.andyetBatchIce)}),this.batchedIceCandidates=[],t&&t.optional&&"chrome"===i&&t.optional.forEach(function(e){e.andyetFasterICE&&(r.eliminateDuplicateCandidates=e.andyetFasterICE)}),t&&t.optional&&t.optional.forEach(function(e){e.andyetDontSignalCandidates&&(r.dontSignalCandidates=e.andyetDontSignalCandidates)}),this.assumeSetLocalSuccess=!1,t&&t.optional&&t.optional.forEach(function(e){e.andyetAssumeSetLocalSuccess&&(r.assumeSetLocalSuccess=e.andyetAssumeSetLocalSuccess)}),"firefox"===i&&t&&t.optional&&(this.wtFirefox=0,t.optional.forEach(function(e){e.andyetFirefoxMakesMeSad&&(r.wtFirefox=e.andyetFirefoxMakesMeSad,r.wtFirefox>0&&(r.firefoxcandidatebuffer=[]))})),this.pc=new a(e,t),this.getLocalStreams=this.pc.getLocalStreams.bind(this.pc),this.getRemoteStreams=this.pc.getRemoteStreams.bind(this.pc),this.addStream=this.pc.addStream.bind(this.pc),this.removeStream=this.pc.removeStream.bind(this.pc),this.pc.on("*",function(){r.emit.apply(r,arguments)}),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onaddstream=this.emit.bind(this,"addStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.localDescription={contents:[]},this.remoteDescription={contents:[]},this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1},this.iceCredentials={local:{},remote:{}};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){(e.logger||console).log("PeerConnection event:",arguments)}),this.hadLocalStunCandidate=!1,this.hadRemoteStunCandidate=!1,this.hadLocalRelayCandidate=!1,this.hadRemoteRelayCandidate=!1,this.hadLocalIPv6Candidate=!1,this.hadRemoteIPv6Candidate=!1,this._remoteDataChannels=[],this._localDataChannels=[],this._candidateBuffer=[]}var i=e("util"),o=e("sdp-jingle-json"),s=e("wildemitter"),a=e("traceablepeerconnection"),c=e("webrtc-adapter"),u=e("lodash.clonedeep");i.inherits(r,s),Object.defineProperty(r.prototype,"signalingState",{get:function(){return this.pc.signalingState}}),Object.defineProperty(r.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}}),r.prototype._role=function(){return this.isInitiator?"initiator":"responder"},r.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},r.prototype._checkLocalCandidate=function(e){var t=o.toCandidateJSON(e);"srflx"==t.type?this.hadLocalStunCandidate=!0:"relay"==t.type&&(this.hadLocalRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)},r.prototype._checkRemoteCandidate=function(e){var t=o.toCandidateJSON(e);"srflx"==t.type?this.hadRemoteStunCandidate=!0:"relay"==t.type&&(this.hadRemoteRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)},r.prototype.processIce=function(e,t){t=t||function(){};var n=this;if("closed"===this.pc.signalingState)return t();if(e.contents||e.jingle&&e.jingle.contents){var r=this.remoteDescription.contents.map(function(e){return e.name});(e.contents||e.jingle.contents).forEach(function(e){var i=e.transport||{},s=i.candidates||[],a=r.indexOf(e.name),c=e.name,u=n.remoteDescription.contents.find(function(t){return t.name===e.name}),l=function(){s.forEach(function(e){var t=o.toCandidateSDP(e)+"\r\n";n.pc.addIceCandidate(new RTCIceCandidate({candidate:t,sdpMLineIndex:a,sdpMid:c}),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(t)}),t()};if(n.iceCredentials.remote[e.name]&&i.ufrag&&n.iceCredentials.remote[e.name].ufrag!==i.ufrag)if(u){u.transport.ufrag=i.ufrag,u.transport.pwd=i.pwd;var f={type:"offer",jingle:n.remoteDescription};f.sdp=o.toSessionSDP(f.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.pc.setRemoteDescription(new RTCSessionDescription(f),function(){l()},function(e){n.emit("error",e)})}else n.emit("error","ice restart failed to find matching content");else l()})}else{if(e.candidate&&0!==e.candidate.candidate.indexOf("a=")&&(e.candidate.candidate="a="+e.candidate.candidate),this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(e.candidate),t();n.pc.addIceCandidate(new RTCIceCandidate(e.candidate),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate.candidate),t()}},r.prototype.offer=function(e,t){var n=this,r=2===arguments.length,i=r&&e?e:{offerToReceiveAudio:1,offerToReceiveVideo:1};if(t=r?t:e,t=t||function(){},"closed"===this.pc.signalingState)return t("Already closed");this.pc.createOffer(function(e){var r={type:"offer",sdp:e.sdp};n.assumeSetLocalSuccess&&(n.emit("offer",r),t(null,r)),n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){var i;n.config.useJingle&&(i=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),i.sid=n.config.sid,n.localDescription=i,i.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.local[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),r.jingle=i),r.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.assumeSetLocalSuccess||(n.emit("offer",r),t(null,r))},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},i)},r.prototype.handleOffer=function(e,t){t=t||function(){};var n=this;if(e.type="offer",e.jingle){if(this.enableChromeNativeSimulcast&&e.jingle.contents.forEach(function(e){"video"===e.name&&(e.application.googConferenceFlag=!0)}),this.enableMultiStreamHacks&&e.jingle.contents.forEach(function(e){if("video"===e.name){var t=e.application.sources||[];0!==t.length&&"3735928559"===t[0].ssrc||(t.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),e.application.sources=t)}}),n.restrictBandwidth>0&&e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name){var r=e.jingle.contents[1];r.application&&r.application.bandwidth&&r.application.bandwidth.bandwidth||(e.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:n.restrictBandwidth.toString()},e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"}))}e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle}e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){t()},t)},r.prototype.answerAudioOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(t,e)},r.prototype.answerBroadcastOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(t,e)},r.prototype.answer=function(e,t){var n=2===arguments.length,r=n?t:e,i=n&&e?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(i,r)},r.prototype.handleAnswer=function(e,t){t=t||function(){};var n=this;e.jingle&&(e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle,e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})})),e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){n.wtFirefox&&window.setTimeout(function(){n.firefoxcandidatebuffer.forEach(function(e){n.pc.addIceCandidate(new RTCIceCandidate(e),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate)}),n.firefoxcandidatebuffer=null},n.wtFirefox),t(null)},t)},r.prototype.close=function(){this.pc.close(),this._localDataChannels=[],this._remoteDataChannels=[],this.emit("close")},r.prototype._answer=function(e,t){t=t||function(){};var n=this;if(!this.pc.remoteDescription)throw new Error("remoteDescription not set");if("closed"===this.pc.signalingState)return t("Already closed");n.pc.createAnswer(function(e){var r=[];if(n.enableChromeNativeSimulcast&&(e.jingle=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name)){var i=e.jingle.contents[1].application.sourceGroups||[],s=!1;if(i.forEach(function(e){"SIM"==e.semantics&&(s=!0)}),!s&&e.jingle.contents[1].application.sources.length){var a=JSON.parse(JSON.stringify(e.jingle.contents[1].application.sources[0]));a.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(a),r.push(e.jingle.contents[1].application.sources[0].ssrc),r.push(a.ssrc),i.push({semantics:"SIM",sources:r});var c=JSON.parse(JSON.stringify(a));c.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(c),i.push({semantics:"FID",sources:[a.ssrc,c.ssrc]}),e.jingle.contents[1].application.sourceGroups=i,e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"})}}var l={type:"answer",sdp:e.sdp};if(n.assumeSetLocalSuccess){var f=u(l);n.emit("answer",f),t(null,f)}n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){if(n.config.useJingle){var r=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"});r.sid=n.config.sid,n.localDescription=r,l.jingle=r}if(n.enableChromeNativeSimulcast&&(l.jingle||(l.jingle=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"})),l.jingle.contents[1].application.sources.forEach(function(e,t){e.parameters=e.parameters.map(function(e){return"msid"===e.key&&(e.value+="-"+Math.floor(t/2)),e})}),l.sdp=o.toSessionSDP(l.jingle,{sid:n.sdpSessionID,role:n._role(),direction:"outgoing"})),l.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),!n.assumeSetLocalSuccess){var i=u(l);n.emit("answer",i),t(null,i)}},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},e)},r.prototype._onIce=function(e){var t=this;if(e.candidate){if(this.dontSignalCandidates)return;var n=e.candidate,r={candidate:{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex}};this._checkLocalCandidate(n.candidate);var i,s,a=o.toCandidateJSON(n.candidate);if(this.eliminateDuplicateCandidates&&"relay"===a.type&&(i=this._candidateBuffer.filter(function(e){return"relay"===e.type}).map(function(e){return e.foundation+":"+e.component}),(s=i.indexOf(a.foundation+":"+a.component))>-1&&a.priority>>24>=i[s].priority>>24))return;if("max-bundle"===this.config.bundlePolicy&&(i=this._candidateBuffer.filter(function(e){return a.type===e.type}).map(function(e){return e.address+":"+e.port}),(s=i.indexOf(a.address+":"+a.port))>-1))return;if("require"===this.config.rtcpMuxPolicy&&"2"===a.component)return;if(this._candidateBuffer.push(a),t.config.useJingle){if(n.sdpMid||(t.pc.remoteDescription&&"offer"===t.pc.remoteDescription.type?n.sdpMid=t.remoteDescription.contents[n.sdpMLineIndex].name:n.sdpMid=t.localDescription.contents[n.sdpMLineIndex].name),!t.iceCredentials.local[n.sdpMid]){o.toSessionJSON(t.pc.localDescription.sdp,{role:t._role(),direction:"outgoing"}).contents.forEach(function(e){var n=e.transport||{};n.ufrag&&(t.iceCredentials.local[e.name]={ufrag:n.ufrag,pwd:n.pwd})})}if(r.jingle={contents:[{name:n.sdpMid,creator:t._role(),transport:{transportType:"iceUdp",ufrag:t.iceCredentials.local[n.sdpMid].ufrag,pwd:t.iceCredentials.local[n.sdpMid].pwd,candidates:[a]}}]},t.batchIceCandidates>0)return 0===t.batchedIceCandidates.length&&window.setTimeout(function(){var e={};t.batchedIceCandidates.forEach(function(t){t=t.contents[0],e[t.name]||(e[t.name]=t),e[t.name].transport.candidates.push(t.transport.candidates[0])});var n={jingle:{contents:[]}};Object.keys(e).forEach(function(t){n.jingle.contents.push(e[t])}),t.batchedIceCandidates=[],t.emit("ice",n)},t.batchIceCandidates),void t.batchedIceCandidates.push(r.jingle)}this.emit("ice",r)}else this.emit("endOfCandidates")},r.prototype._onDataChannel=function(e){var t=e.channel;this._remoteDataChannels.push(t),this.emit("addChannel",t)},r.prototype.createDataChannel=function(e,t){var n=this.pc.createDataChannel(e,t);return this._localDataChannels.push(n),n},r.prototype.getStats=function(e){this.pc.getStats(null,function(t){e(null,t)},function(t){e(t)})},t.exports=r},{"lodash.clonedeep":139,"sdp-jingle-json":191,
traceablepeerconnection:226,util:309,"webrtc-adapter":310,wildemitter:320}],105:[function(e,t,n){function r(e){s.call(this,e),this.pc.on("addChannel",this.handleDataChannelAdded.bind(this)),this._channels={}}var i=e("util"),o=e("extend-object"),s=e("jingle-media-session-purecloud");i.inherits(r,s),Object.defineProperties(r.prototype,{channels:{get:function(){return this._channels}}}),r.prototype=o(r.prototype,{start:function(e,t){this.getDataChannel("jingle-media-session"),s.prototype.start.call(this,e,t)},sendDirectly:function(e,t,n,r){var i={type:t,creator:n,payload:r},o=this.getDataChannel(e);return"open"==o.readyState&&(o.send(JSON.stringify(i)),!0)},getDataChannel:function(e,t){if(!this.pc.createDataChannel)return this.emit("error",new Error("createDataChannel not supported"));var n=this.channels[e];return t=t||{},n||(n=this.channels[e]=this.pc.createDataChannel(e,t),this._observeDataChannel(n),n)},handleDataChannelAdded:function(e){this.channels[e.label]=e,this._observeDataChannel(e)},_observeDataChannel:function(e){var t=this;e.onclose=this.emit.bind(this,"channelClose",e),e.onerror=this.emit.bind(this,"channelError",e),e.onmessage=function(n){t.emit("channelMessage",t,e.label,JSON.parse(n.data),e,n)},e.onopen=this.emit.bind(this,"channelOpen",e)}}),t.exports=r},{"extend-object":87,"jingle-media-session-purecloud":106,util:309}],106:[function(e,t,n){function r(e,t){"rtp"===e.application.applicationType&&(delete e.transport,delete e.application.payloads,delete e.application.headerExtensions,e.application.mux=!1,e.application.sources&&(e.application.sources=e.application.sources.filter(function(e){return t.id===e.parameters[1].value.split(" ")[0]})),e.application.sourceGroups&&(e.application.sourceGroups=e.application.sourceGroups.filter(function(t){for(var n=!1,r=0;r<e.application.sources.length;r++)if(e.application.sources[r].ssrc===t.sources[0]){n=!0;break}return n})))}function i(e){(e.application.sources||[]).forEach(function(e){e.parameters=e.parameters.filter(function(e){return!("mslabel"===e.key||"label"===e.key)})})}function o(e){u.call(this,e),this.pc=new l({iceServers:e.iceServers||[],useJingle:!0},e.constraints||{}),this.pc.on("ice",this.onIceCandidate.bind(this,e)),this.pc.on("endOfCandidates",this.onIceEndOfCandidates.bind(this,e)),this.pc.on("iceConnectionStateChange",this.onIceStateChange.bind(this,e)),this.pc.on("addStream",this.onAddStream.bind(this)),this.pc.on("removeStream",this.onRemoveStream.bind(this)),this.pc.on("addChannel",this.onAddChannel.bind(this)),e.stream&&this.addStream(e.stream),this._ringing=!1}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("util"),c=e("extend-object"),u=e("jingle-session"),l=e("rtcpeerconnection");a.inherits(o,u),Object.defineProperties(o.prototype,{ringing:{get:function(){return this._ringing},set:function(e){e!==this._ringing&&(this._ringing=e,this.emit("change:ringing",e))}},streams:{get:function(){return"closed"!==this.pc.signalingState?this.pc.getRemoteStreams():[]}}}),o.prototype=c(o.prototype,{start:function(e,t){var n=this;this.state="pending",t=t||function(){},this.pc.isInitiator=!0,this.pc.offer(e,function(r,o){if(r)return n._log("error","Could not create WebRTC offer",r),n.end("failed-application",!0);e&&e.mandatory&&o.jingle.contents.forEach(function(t){var n=t.application.media;"rtp"===t.application.applicationType&&(e.mandatory.OfferToReceiveAudio||"audio"!==n||(t.senders="initiator"),e.mandatory.OfferToReceiveVideo||"video"!==n||(t.senders="initiator"))}),o.jingle.contents.forEach(i),n.send("session-initiate",o.jingle),t()})},accept:function(e,t){var n=this;1===arguments.length&&"function"==typeof e&&(t=e,e={}),t=t||function(){},e=e||{};var r=e.constraints||{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};n.constraints=r,t=t||function(){},e=e||{},n.constraints=e.constraints||{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this._log("info","Accepted incoming session"),this.state="active",this.pc.answer(n.constraints,function(e,r){if(e)return n._log("error","Could not create WebRTC answer",e),n.end("failed-application");r.jingle.contents.forEach(i),n.send("session-accept",r.jingle),t()})},end:function(e,t){var n=this;this.streams.forEach(function(e){n.onRemoveStream({stream:e})}),"closed"!==this.pc.signalingState&&this.pc.close(),u.prototype.end.call(this,e,t)},ring:function(){this._log("info","Ringing on incoming session"),this.ringing=!0,this.send("session-info",{ringing:!0})},mute:function(e,t){this._log("info","Muting",t),this.send("session-info",{mute:{creator:e,name:t}})},unmute:function(e,t){this._log("info","Unmuting",t),this.send("session-info",{unmute:{creator:e,name:t}})},hold:function(){this._log("info","Placing on hold"),this.send("session-info",{hold:!0})},resume:function(){this._log("info","Resuming from hold"),this.send("session-info",{active:!0})},addStream:function(e,t,n){var i=this;n=n||function(){},this.pc.addStream(e),t&&("object"===(void 0===t?"undefined":s(t))&&(i.constraints=t),this.pc.isInitiator?this.pc.offer(i.constraints,function(t,o){if(t)return i._log("error","Could not create offer for adding new stream",t),n(t);i.pc.handleAnswer({type:"answer",jingle:i.pc.remoteDescription},function(t){if(t)return i._log("error","Could not process answer for adding new stream",t),n(t);o.jingle.contents.forEach(function(t){r(t,e)}),o.jingle.contents=o.jingle.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete o.jingle.groups,i.send("source-add",o.jingle),n()})}):this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(t){if(t)return i._log("error","Could not process offer for adding new stream",t),n(t);i.pc.answer(i.constraints,function(t,o){if(t)return i._log("error","Could not create answer for adding new stream",t),n(t);o.jingle.contents.forEach(function(t){r(t,e)}),o.jingle.contents=o.jingle.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete o.jingle.groups,i.send("source-add",o.jingle),n()})}))},addStream2:function(e,t){this.addStream(e,!0,t)},removeStream:function(e,t,n){var i=this;if(n=n||function(){},!t)return void this.pc.removeStream(e);"object"===(void 0===t?"undefined":s(t))&&(i.constraints=t);var o=this.pc.localDescription;o.contents.forEach(function(t){r(t,e)}),o.contents=o.contents.filter(function(e){return"rtp"===e.application.applicationType&&e.application.sources&&e.application.sources.length}),delete o.groups,this.send("source-remove",o),this.pc.removeStream(e),this.pc.isInitiator?this.pc.offer(i.constraints,function(e){if(e)return i._log("error","Could not create offer for removing stream",e),n(e);i.pc.handleAnswer({type:"answer",jingle:i.pc.remoteDescription},function(e){if(e)return i._log("error","Could not process answer for removing stream",e),n(e);n()})}):this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){if(e)return i._log("error","Could not process offer for removing stream",e),n(e);i.pc.answer(i.constraints,function(e){if(e)return i._log("error","Could not create answer for removing stream",e),n(e);n()})})},removeStream2:function(e,t){this.removeStream(e,!0,t)},switchStream:function(e,t,n){var r=this;n=n||function(){};var i=this.pc.localDescription;i.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),this.pc.removeStream(e),this.send("source-remove",i),this.pc.addStream(t),this.pc.isInitiator?this.pc.offer(r.constraints,function(e,t){if(e)return r._log("error","Could not create offer for switching streams",e),n(e);t.jingle.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),r.pc.handleAnswer({type:"answer",jingle:r.pc.remoteDescription},function(e){if(e)return r._log("error","Could not process answer for switching streams",e),n(e);r.send("source-add",t.jingle),n()})}):this.pc.handleOffer({type:"offer",jingle:this.pc.remoteDescription},function(e){if(e)return r._log("error","Could not process offer for switching streams",e),n(e);r.pc.answer(r.constraints,function(e,t){if(e)return r._log("error","Could not create answer for switching streams",e),n(e);t.jingle.contents.forEach(function(e){delete e.transport,delete e.application.payloads}),r.send("source-add",t.jingle),n()})})},onIceCandidate:function(e,t){this._log("info","Discovered new ICE candidate",t.jingle),this.send("transport-info",t.jingle),e.signalEndOfCandidates&&(this.lastCandidate=t)},onIceEndOfCandidates:function(e){if(this._log("info","ICE end of candidates"),e.signalEndOfCandidates&&this.lastCandidate){var t=this.lastCandidate.jingle;t.contents[0].transport={transportType:t.contents[0].transport.transportType,gatheringComplete:!0},this.lastCandidate=null,this.send("transport-info",t)}else if("connecting"!==this.connectionState){var n={msg:"ICE End of candidates signaled with no candidates gathered.",signalingState:this.pc&&this.pc.signalingState,connectionState:this.connectionState,localDescription:this.pc&&this.pc.localDescription&&this.pc.localDescription.sdp,remoteDescription:this.pc&&this.pc.remoteDescription&&this.pc.remoteDescription.sdp,sid:this.sid};this.emit("log:warn",n)}},onIceStateChange:function(e){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting",e&&e.signalEndOfCandidates&&this.onIceEndOfCandidates(e);break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":"stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected";break;case"failed":this.connectionState="failed",this.end("failed-transport");break;case"closed":this.connectionState="disconnected"}},onAddStream:function(e){this._log("info","Stream added"),this.emit("peerStreamAdded",this,e.stream)},onRemoveStream:function(e){this._log("info","Stream removed"),this.emit("peerStreamRemoved",this,e.stream)},onSessionInitiate:function(e,t){var n=this;this._log("info","Initiating incoming session"),this.state="pending",this.pc.isInitiator=!1,this.pc.handleOffer({type:"offer",jingle:e},function(e){if(e)return n._log("error","Could not create WebRTC answer",e),t({condition:"general-error"});t()})},onSessionAccept:function(e,t){var n=this;this.state="active",this.pc.handleAnswer({type:"answer",jingle:e},function(e){if(e)return n._log("error","Could not process WebRTC answer",e),t({condition:"general-error"});n.emit("accepted",n),t()})},onSessionTerminate:function(e,t){var n=this;this._log("info","Terminating session"),this.streams.forEach(function(e){n.onRemoveStream({stream:e})}),this.pc.close(),u.prototype.end.call(this,e.reason,!0),t()},onSessionInfo:function(e,t){return e.ringing?(this._log("info","Outgoing session is ringing"),this.ringing=!0,this.emit("ringing",this),t()):e.hold?(this._log("info","On hold"),this.emit("hold",this),t()):e.active?(this._log("info","Resuming from hold"),this.emit("resumed",this),t()):e.mute?(this._log("info","Muting",e.mute),this.emit("mute",this,e.mute),t()):e.unmute?(this._log("info","Unmuting",e.unmute),this.emit("unmute",this,e.unmute),t()):void t()},onTransportInfo:function(e,t){this.pc.processIce(e,function(){t()})},onSourceAdd:function(e,t){var n=this;this._log("info","Adding new stream source");var r=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(t,n){var i=t.application,o=i.sources||[],s=i.sourceGroups||[];e.contents.forEach(function(e){if(t.name===e.name){var i=e.application,a=i.sources||[];o=o.concat(a),r.contents[n].application.sources=JSON.parse(JSON.stringify(o));var c=i.sourceGroups||[];s=s.concat(c),r.contents[n].application.sourceGroups=JSON.parse(JSON.stringify(s))}})}),this.pc.isInitiator?this.pc.offer(this.constraints,function(e){if(e)return n._log("error","Error adding new stream source",e),t({condition:"general-error"});n.pc.handleAnswer({type:"answer",jingle:r},function(e){if(e)return n._log("error","Error adding new stream source",e),t({condition:"general-error"});t()})}):this.pc.handleOffer({type:"offer",jingle:r},function(e){if(e)return n._log("error","Error adding new stream source",e),t({condition:"general-error"});n.pc.answer(n.constraints,function(e){if(e)return n._log("error","Error adding new stream source",e),t({condition:"general-error"});t()})})},onSourceRemove:function(e,t){var n=this;this._log("info","Removing stream source");var r=this.pc.remoteDescription;this.pc.remoteDescription.contents.forEach(function(t,n){var i=t.application,o=i.sources||[],s=i.sourceGroups||[];e.contents.forEach(function(e){if(t.name===e.name){var i,a,c,u,l=e.application,f=l.sources||[],p=l.sourceGroups||[];for(a=0;a<f.length;a++){for(i=-1,c=0;c<o.length;c++)if(f[a].ssrc===o[c].ssrc){i=c;break}i>-1&&(o.splice(i,1),r.contents[n].application.sources=JSON.parse(JSON.stringify(o)))}for(a=0;a<p.length;a++){for(i=-1,c=0;c<s.length;c++)if(p[a].semantics===s[c].semantics&&p[a].sources.length===s[c].sources.length){var h=!0;for(u=0;u<p[a].sources.length;u++)if(p[a].sources[u]!==s[c].sources[u]){h=!1;break}if(h){i=c;break}}i>-1&&(s.splice(i,1),r.contents[n].application.sourceGroups=JSON.parse(JSON.stringify(s)))}}})}),this.pc.isInitiator?this.pc.offer(this.constraints,function(e){if(e)return n._log("error","Error removing stream source",e),t({condition:"general-error"});n.pc.handleAnswer({type:"answer",jingle:r},function(e){if(e)return n._log("error","Error removing stream source",e),t({condition:"general-error"});t()})}):this.pc.handleOffer({type:"offer",jingle:r},function(e){if(e)return n._log("error","Error removing stream source",e),t({condition:"general-error"});n.pc.answer(n.constraints,function(e){if(e)return n._log("error","Error removing stream source",e),t({condition:"general-error"});t()})})},onAddChannel:function(e){this.emit("addChannel",e)}}),t.exports=o},{"extend-object":87,"jingle-session":108,rtcpeerconnection:188,util:309}],107:[function(e,t,n){function r(e){s.call(this),e=e||{},this.jid=e.jid,this.selfID=e.selfID||this.jid&&this.jid.full||this.jid||"",this.sessions={},this.peers={},this.prepareSession=e.prepareSession||function(e){return e.applicationTypes.indexOf("rtp")>=0?new u(e):e.applicationTypes.indexOf("filetransfer")>=0?new l(e):void 0},this.performTieBreak=e.performTieBreak||function(e,t){var n=t.jingle.contents.map(function(e){if(e.application)return e.application.applicationType});return o(e.pendingApplicationTypes,n).length>0},this.screenSharingSupport=a.screenSharing,this.capabilities=["urn:xmpp:jingle:1"],a.support&&(this.capabilities=["urn:xmpp:jingle:1","urn:xmpp:jingle:apps:rtp:1","urn:xmpp:jingle:apps:rtp:audio","urn:xmpp:jingle:apps:rtp:video","urn:xmpp:jingle:apps:rtp:rtcb-fb:0","urn:xmpp:jingle:apps:rtp:rtp-hdrext:0","urn:xmpp:jingle:apps:rtp:ssma:0","urn:xmpp:jingle:apps:dtls:0","urn:xmpp:jingle:apps:grouping:0","urn:xmpp:jingle:apps:file-transfer:3","urn:xmpp:jingle:transports:ice-udp:1","urn:xmpp:jingle:transports.dtls-sctp:1","urn:ietf:rfc:3264","urn:ietf:rfc:5576","urn:ietf:rfc:5888"]),this.config={debug:!1,peerConnectionConfig:{iceServers:e.iceServers||[{url:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!1}]},media:{audio:!0,video:!0}};for(var t in e)this.config[t]=e[t];this.iceServers=this.config.peerConnectionConfig.iceServers}var i=e("util"),o=e("intersect"),s=e("wildemitter"),a=e("webrtcsupport"),c=e("jingle-session"),u=e("jingle-media-session-purecloud"),l=e("jingle-filetransfer-session");i.inherits(r,s),r.prototype.addICEServer=function(e){"string"==typeof e&&(e={url:e}),this.iceServers.push(e)},r.prototype.addSession=function(e){var t=this,n=e.sid,r=e.peerID;return this.sessions[n]=e,this.peers[r]||(this.peers[r]=[]),this.peers[r].push(e),e.on("terminated",function(){var i=t.peers[r]||[];i.length&&i.splice(i.indexOf(e),1),delete t.sessions[n]}),e.on("*",function(n,r,i,o){if("send"===n){var s=r.jingle&&r.jingle.action;e.isInitiator&&"session-initiate"===s&&t.emit("outgoing",e)}!t.config.debug||"log:debug"!==n&&"log:error"!==n||console.log("Jingle:",r,i,o),0!==n.indexOf("change")&&t.emit(n,r,i,o)}),this.emit("createdSession",e),e},r.prototype.createMediaSession=function(e,t,n){var r=new u({sid:t,peer:e,initiator:!0,stream:n,parent:this,iceServers:this.iceServers,constraints:this.config.peerConnectionConstraints});return this.addSession(r),r},r.prototype.createFileTransferSession=function(e,t){var n=new l({sid:t,peer:e,initiator:!0,parent:this});return this.addSession(n),n},r.prototype.endPeerSessions=function(e,t,n){e=e.full||e;var r=this.peers[e]||[];delete this.peers[e],r.forEach(function(e){e.end(t||"gone",n)})},r.prototype.endAllSessions=function(e,t){var n=this;Object.keys(this.peers).forEach(function(r){n.endPeerSessions(r,e,t)})},r.prototype._createIncomingSession=function(e,t){var n;return this.prepareSession&&(n=this.prepareSession(e,t)),n||(n=new c(e)),this.addSession(n),n},r.prototype._sendError=function(e,t,n){n.type||(n.type="cancel"),this.emit("send",{to:e,id:t,type:"error",error:n})},r.prototype._log=function(e,t){this.emit("log:"+e,t)},r.prototype.process=function(e){var t=this,n=e.jingle?e.jingle.sid:null,r=this.sessions[n]||null,i=e.id,o=e.from.full||e.from;if("error"===e.type){var s=e.error&&"tie-break"===e.error.jingleCondition;return r&&r.pending&&s?r.end("alternative-session",!0):(r&&(r.pendingAction=!1),this.emit("error",e))}if("result"===e.type)return void(r&&(r.pendingAction=!1));var a=e.jingle.action,c=e.jingle.contents||[],u=c.map(function(e){if(e.application)return e.application.applicationType}),l=c.map(function(e){if(e.transport)return e.transport.transportType});if("session-initiate"!==a){if(!r)return this._log("error","Unknown session",n),this._sendError(o,i,{condition:"item-not-found",jingleCondition:"unknown-session"});if(r.peerID!==o||r.ended)return this._log("error","Session has ended, or action has wrong sender"),this._sendError(o,i,{condition:"item-not-found",jingleCondition:"unknown-session"});if("session-accept"===a&&!r.pending)return this._log("error","Tried to accept session twice",n),this._sendError(o,i,{condition:"unexpected-request",jingleCondition:"out-of-order"});if("session-terminate"!==a&&a===r.pendingAction&&(this._log("error","Tie break during pending request"),r.isInitiator))return this._sendError(o,i,{condition:"conflict",jingleCondition:"tie-break"})}else if(r){if(r.peerID!==o)return this._log("error","Duplicate sid from new sender"),this._sendError(o,i,{condition:"service-unavailable"});if(!r.pending)return this._log("error","Someone is doing this wrong"),this._sendError(o,i,{condition:"unexpected-request",jingleCondition:"out-of-order"});if(this.selfID>r.peerID&&this.performTieBreak(r,e))return this._log("error","Tie break new session because of duplicate sids"),this._sendError(o,i,{condition:"conflict",jingleCondition:"tie-break"})}else if(this.peers[o]&&this.peers[o].length)for(var f=0,p=this.peers[o].length;f<p;f++){var h=this.peers[o][f];if(h&&h.pending&&h.sid>n&&this.performTieBreak(h,e))return this._log("info","Tie break session-initiate"),this._sendError(o,i,{condition:"conflict",jingleCondition:"tie-break"})}if("session-initiate"===a){if(!c.length)return t._sendError(o,i,{condition:"bad-request"});r=this._createIncomingSession({sid:n,peer:e.from,peerID:o,initiator:!1,parent:this,applicationTypes:u,transportTypes:l,iceServers:this.iceServers,constraints:this.config.peerConnectionConstraints},e)}r.process(a,e.jingle,function(n){n?(t._log("error","Could not process request",e,n),t._sendError(o,i,n)):(t.emit("send",{to:o,id:i,type:"result"}),"session-initiate"===a&&t.emit("incoming",r))})},t.exports=r},{intersect:99,"jingle-filetransfer-session":103,"jingle-media-session-purecloud":106,"jingle-session":108,util:309,webrtcsupport:319,wildemitter:320}],108:[function(e,t,n){function r(e){c.call(this);var t=this;this.sid=e.sid||o.v4(),this.peer=e.peer,this.peerID=e.peerID||this.peer.full||this.peer,this.isInitiator=e.initiator||!1,this.parent=e.parent,this.state="starting",this.connectionState="starting",this.pendingApplicationTypes=e.applicationTypes||[],this.pendingAction=!1,this.processingQueue=s.queue(function(e,n){if(t.ended)return n();var r=e.action,i=e.changes,o=e.cb;if(t._log("debug",r),!u[r])return t._log("error","Invalid action: "+r),o({condition:"bad-request"}),n();t[u[r]](i,function(e,t){return o(e,t),n()})})}var i=e("util"),o=e("uuid"),s=e("async"),a=e("extend-object"),c=e("wildemitter"),u={"content-accept":"onContentAccept","content-add":"onContentAdd","content-modify":"onContentModify","content-reject":"onContentReject","content-remove":"onContentRemove","description-info":"onDescriptionInfo","security-info":"onSecurityInfo","session-accept":"onSessionAccept","session-info":"onSessionInfo","session-initiate":"onSessionInitiate","session-terminate":"onSessionTerminate","transport-accept":"onTransportAccept","transport-info":"onTransportInfo","transport-reject":"onTransportReject","transport-replace":"onTransportReplace","source-add":"onSourceAdd","source-remove":"onSourceRemove"};i.inherits(r,c),Object.keys(u).forEach(function(e){var t=u[e];r.prototype[t]=function(t,n){this._log("error","Unsupported action: "+e),n()}}),Object.defineProperties(r.prototype,{state:{get:function(){return this._sessionState},set:function(e){if(e!==this._sessionState){var t=this._sessionState;this._log("info","Changing session state to: "+e),this._sessionState=e,this.emit("change:sessionState",this,e),this.emit("change:"+e,this,!0),t&&this.emit("change:"+t,this,!1)}}},connectionState:{get:function(){return this._connectionState},set:function(e){if(e!==this._connectionState){var t=this._connectionState;this._log("info","Changing connection state to: "+e),this._connectionState=e,this.emit("change:connectionState",this,e),this.emit("change:"+e,this,!0),t&&this.emit("change:"+t,this,!1)}}},starting:{get:function(){return"starting"===this._sessionState}},pending:{get:function(){return"pending"===this._sessionState}},active:{get:function(){return"active"===this._sessionState}},ended:{get:function(){return"ended"===this._sessionState}},connected:{get:function(){return"connected"===this._connectionState}},connecting:{get:function(){return"connecting"===this._connectionState}},disconnected:{get:function(){return"disconnected"===this._connectionState}},interrupted:{get:function(){return"interrupted"===this._connectionState}}}),r.prototype=a(r.prototype,{_log:function(e,t){t=this.sid+": "+t,this.emit("log:"+e,t)},send:function(e,t){t=t||{},t.sid=this.sid,t.action=e;var n={"session-inititate":!0,"session-accept":!0,"content-add":!0,"content-remove":!0,"content-reject":!0,"content-accept":!0,"content-modify":!0,"transport-replace":!0,"transport-reject":!0,"transport-accept":!0,"source-add":!0,"source-remove":!0};this.pendingAction=!!n[e]&&e,this.emit("send",{to:this.peer,id:o.v4(),type:"set",jingle:t})},process:function(e,t,n){this.processingQueue.push({action:e,changes:t,cb:n})},start:function(){this._log("error","Can not start base sessions"),this.end("unsupported-applications",!0)},accept:function(){this._log("error","Can not accept base sessions"),this.end("unsupported-applications")},cancel:function(){this.end("cancel")},decline:function(){this.end("decline")},end:function(e,t){this.state="ended",this.processingQueue.kill(),e||(e="success"),"string"==typeof e&&(e={condition:e}),t||this.send("session-terminate",{reason:e}),this.emit("terminated",this,e)},onSessionTerminate:function(e,t){this.end(e.reason,!0),t()},onSessionInfo:function(e,t){var n={sid:!0,action:!0,initiator:!0,responder:!0},r=!1;Object.keys(e).forEach(function(e){n[e]||(r=!0)}),r?t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"}):t()},onDescriptionInfo:function(e,t){t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onTransportInfo:function(e,t){t({type:"modify",condition:"feature-not-implemented",jingleCondition:"unsupported-info"})},onContentAdd:function(e,t){t(),this.send("content-reject",{reason:{condition:"failed-application",text:"content-add is not supported"}})},onTransportReplace:function(e,t){t(),this.send("transport-reject",{reason:{condition:"failed-application",text:"transport-replace is not supported"}})}}),t.exports=r},{async:42,"extend-object":87,util:309,uuid:110,wildemitter:320}],109:[function(e,t,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],110:[function(e,t,n){function r(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=u[e])});i<16;)t[r+i++]=0;return t}function i(e,t){var n=t||0,r=c;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function o(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:h,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:g+1,u=a-d+(c-g)/1e4;if(u<0&&void 0===e.clockseq&&(s=s+1&16383),(u<0||a>d)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,g=c,h=s,a+=122192928e5;var l=(1e4*(268435455&a)+c)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var f=a/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var m=e.node||p,v=0;v<6;v++)o[r+v]=m[v];return t||i(o)}function s(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;s++)t[r+s]=o[s];return t||i(o)}for(var a=e("./rng"),c=[],u={},l=0;l<256;l++)c[l]=(l+256).toString(16).substr(1),u[c[l]]=l;var f=a(),p=[1|f[0],f[1],f[2],f[3],f[4],f[5]],h=16383&(f[6]<<8|f[7]),d=0,g=0,m=s;m.v1=o,m.v4=s,m.parse=r,m.unparse=i,t.exports=m},{"./rng":109}],111:[function(e,t,n){"use strict";var r=e("jxt").createRegistry();r.use(e("jxt-xmpp-types")),r.use(e("./stanzas/iq")),r.use(e("./stanzas/message")),r.use(e("./stanzas/error")),r.use(e("./stanzas/jingle")),r.use(e("./stanzas/rtp")),r.use(e("./stanzas/file")),r.use(e("./stanzas/iceUdp")),r.use(e("./stanzas/extdisco")),r.use(e("./stanzas/jingleMessage")),t.exports={getXml:function(e){return new(r.getIq())(e)},getMessageXml:function(e){return new(r.getMessage())(e)},getData:function(e){return"string"!=typeof e&&(e=e.toString()),r.parse(e)}}},{"./stanzas/error":112,"./stanzas/extdisco":113,"./stanzas/file":114,"./stanzas/iceUdp":115,"./stanzas/iq":116,"./stanzas/jingle":117,"./stanzas/jingleMessage":118,"./stanzas/message":119,"./stanzas/rtp":120,jxt:123,"jxt-xmpp-types":122}],112:[function(e,t,n){"use strict";var r="urn:ietf:params:xml:ns:xmpp-stanzas",i=["bad-request","conflict","feature-not-implemented","forbidden","gone","internal-server-error","item-not-found","jid-malformed","not-acceptable","not-allowed","not-authorized","payment-required","recipient-unavailable","redirect","registration-required","remote-server-not-found","remote-server-timeout","resource-constraint","service-unavailable","subscription-required","undefined-condition","unexpected-request"];t.exports=function(e){var t=e.utils,n=e.define({name:"error",namespace:"jabber:client",element:"error",fields:{lang:{get:function(){return(this.parent||{}).lang||""}},condition:t.enumSub(r,i),gone:{get:function(){return t.getSubText(this.xml,r,"gone")},set:function(e){this.condition="gone",t.setSubText(this.xml,r,"gone",e)}},redirect:{get:function(){return t.getSubText(this.xml,r,"redirect")},set:function(e){this.condition="redirect",t.setSubText(this.xml,r,"redirect",e)}},code:t.attribute("code"),type:t.attribute("type"),by:t.jidAttribute("by"),$text:{get:function(){return t.getSubLangText(this.xml,r,"text",this.lang)}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,r,"text",e,this.lang)}}}});e.withMessage(function(t){e.extend(t,n)}),e.withPresence(function(t){e.extend(t,n)}),e.withIq(function(t){e.extend(t,n)})}},{}],113:[function(e,t,n){"use strict";var r="urn:xmpp:extdisco:1";t.exports=function(e){var t=e.utils,i=n.Services=e.define({name:"services",namespace:r,element:"services",fields:{type:t.attribute("type")}}),o=n.Credentials=e.define({name:"credentials",namespace:r,element:"credentials"}),s=e.define({name:"service",namespace:r,element:"service",fields:{host:t.attribute("host"),port:t.attribute("port"),transport:t.attribute("transport"),type:t.attribute("type"),username:t.attribute("username"),password:t.attribute("password")}});e.extend(i,s,"services"),e.extend(o,s),e.withDataForm(function(t){e.extend(s,t)}),e.withIq(function(t){e.extend(t,i),e.extend(t,o)})}},{}],114:[function(e,t,n){"use strict";var r="urn:xmpp:jingle:apps:file-transfer:3";t.exports=function(e){var t=e.utils,n=e.define({name:"_file",namespace:r,element:"file",fields:{name:t.textSub(r,"name"),desc:t.textSub(r,"desc"),size:t.numberSub(r,"size"),date:t.dateSub(r,"date")}}),i=e.define({name:"range",namespace:r,element:"range",fields:{offset:t.numberAttribute("offset")}}),o=e.define({name:"thumbnail",namespace:"urn:xmpp:thumbs:0",element:"thumbnail",fields:{cid:t.attribute("cid"),mimeType:t.attribute("mime-type"),width:t.numberAttribute("width"),height:t.numberAttribute("height")}}),s=e.define({name:"_filetransfer",namespace:r,element:"description",tags:["jingle-application"],fields:{descType:{value:"filetransfer"},offer:t.subExtension("offer",r,"offer",n),request:t.subExtension("request",r,"request",n)}});e.extend(n,i),e.extend(n,o),e.withDefinition("hash","urn:xmpp:hashes:1",function(t){e.extend(n,t,"hashes")}),e.withDefinition("content","urn:xmpp:jingle:1",function(t){e.extend(t,s)})}},{}],115:[function(e,t,n){"use strict";var r="urn:xmpp:jingle:transports:ice-udp:1";t.exports=function(e){var t=e.utils,n=e.define({name:"_iceUdp",namespace:r,element:"transport",tags:["jingle-transport"],fields:{transType:{value:"iceUdp"},transportType:{value:"iceUdp"},pwd:t.attribute("pwd"),ufrag:t.attribute("ufrag")}}),i=e.define({name:"_iceUdp2",namespace:r,element:"transport",tags:["jingle-transport"],fields:{transportType:{value:"iceUdp"},pwd:t.attribute("pwd"),ufrag:t.attribute("ufrag")}}),o=e.define({name:"remoteCandidate",namespace:r,element:"remote-candidate",fields:{component:t.attribute("component"),ip:t.attribute("ip"),port:t.attribute("port")}}),s=e.define({name:"_iceUdpCandidate",namespace:r,element:"candidate",fields:{component:t.attribute("component"),foundation:t.attribute("foundation"),generation:t.attribute("generation"),id:t.attribute("id"),ip:t.attribute("ip"),network:t.attribute("network"),port:t.attribute("port"),priority:t.attribute("priority"),protocol:t.attribute("protocol"),relAddr:t.attribute("rel-addr"),relPort:t.attribute("rel-port"),tcpType:t.attribute("tcptype"),type:t.attribute("type")}}),a=e.define({name:"_iceFingerprint",namespace:"urn:xmpp:jingle:apps:dtls:0",element:"fingerprint",fields:{hash:t.attribute("hash"),setup:t.attribute("setup"),value:t.text(),required:t.boolAttribute("required")}}),c=e.define({name:"_sctpMap",namespace:"urn:xmpp:jingle:transports:dtls-sctp:1",element:"sctpmap",fields:{number:t.attribute("number"),protocol:t.attribute("protocol"),streams:t.attribute("streams")}}),u=e.define({name:"gatheringComplete",element:"gathering-complete"});e.extend(n,s,"candidates"),e.extend(n,o),e.extend(n,a,"fingerprints"),e.extend(n,c,"sctp"),
e.extend(n,u),e.extend(i,s,"candidates"),e.extend(i,o),e.extend(i,a,"fingerprints"),e.extend(i,c,"sctp"),e.extend(i,u),e.withDefinition("content","urn:xmpp:jingle:1",function(t){e.extend(t,n),e.extend(t,i)})}},{}],116:[function(e,t,n){"use strict";t.exports=function(e){var t=e.utils,n=e.define({name:"iq",namespace:"jabber:client",element:"iq",topLevel:!0,fields:{lang:t.langAttribute(),id:t.attribute("id"),to:t.jidAttribute("to",!0),from:t.jidAttribute("from",!0),type:t.attribute("type")}}),r=n.prototype.toJSON;n.prototype.toJSON=function(){var e=r.call(this);return e.resultReply=this.resultReply,e.errorReply=this.errorReply,e},n.prototype.resultReply=function(e){return e=e||{},e.to=this.from,e.id=this.id,e.type="result",new n(e)},n.prototype.errorReply=function(e){return e=e||{},e.to=this.from,e.id=this.id,e.type="error",new n(e)}}},{}],117:[function(e,t,n){"use strict";var r="urn:xmpp:jingle:1",i=["out-of-order","tie-break","unknown-session","unsupported-info"],o=["alternative-session","busy","cancel","connectivity-error","decline","expired","failed-application","failed-transport","general-error","gone","incompatible-parameters","media-error","security-error","success","timeout","unsupported-applications","unsupported-transports"];t.exports=function(e){var t=e.utils,n=e.define({name:"jingle",namespace:r,element:"jingle",fields:{action:t.attribute("action"),initiator:t.attribute("initiator"),responder:t.attribute("responder"),sid:t.attribute("sid")}}),s=e.define({name:"_jingleContent",namespace:r,element:"content",fields:{creator:t.attribute("creator"),disposition:t.attribute("disposition","session"),name:t.attribute("name"),senders:t.attribute("senders","both"),application:{get:function(){for(var t=e.tagged("jingle-application").map(function(e){return e.prototype._name}),n=0,r=t.length;n<r;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function(e){this["_"+e.applicationType]=e}},transport:{get:function(){for(var t=e.tagged("jingle-transport").map(function(e){return e.prototype._name}),n=0,r=t.length;n<r;n++)if(this._extensions[t[n]])return this._extensions[t[n]]},set:function(e){this["_"+e.transportType]=e}}}}),a=e.define({name:"reason",namespace:r,element:"reason",fields:{condition:t.enumSub(r,o),alternativeSession:{get:function(){return t.getSubText(this.xml,r,"alternative-session")},set:function(e){this.condition="alternative-session",t.setSubText(this.xml,r,"alternative-session",e)}},text:t.textSub(r,"text")}});e.extend(n,s,"contents"),e.extend(n,a),e.withStanzaError(function(n){e.add(n,"jingleCondition",t.enumSub("urn:xmpp:jingle:errors:1",i))}),e.withIq(function(t){e.extend(t,n)})}},{}],118:[function(e,t,n){"use strict";var r="urn:xmpp:jingle-message:0";t.exports=function(e){var t=e.utils,n=e.define({name:"accept",namespace:r,element:"accept",fields:{id:t.attribute("id")}}),i=e.define({name:"propose",namespace:r,element:"propose",fields:{id:t.attribute("id")}});e.withDefinition("description","urn:xmpp:jingle:apps:rtp:1",function(t){e.extend(i,t,"descriptions")});var o=e.define({name:"retract",namespace:r,element:"retract",fields:{id:t.attribute("id")}}),s=e.define({name:"reject",namespace:r,element:"reject",fields:{id:t.attribute("id")}}),a=e.define({name:"proceed",namespace:r,element:"proceed",fields:{id:t.attribute("id")}});e.withMessage(function(t){e.extend(t,n),e.extend(t,i),e.extend(t,o),e.extend(t,s),e.extend(t,a)})}},{}],119:[function(e,t,n){"use strict";t.exports=function(e){var t=e.utils;e.define({name:"message",namespace:"jabber:client",element:"message",topLevel:!0,fields:{lang:t.langAttribute(),id:t.attribute("id"),to:t.jidAttribute("to",!0),from:t.jidAttribute("from",!0),type:t.attribute("type","normal"),thread:t.textSub("jabber:client","thread"),parentThread:t.subAttribute("jabber:client","thread","parent"),subject:t.textSub("jabber:client","subject"),$body:{get:function(){return t.getSubLangText(this.xml,this._NS,"body",this.lang)}},body:{get:function(){return this.$body[this.lang]||""},set:function(e){t.setSubLangText(this.xml,this._NS,"body",e,this.lang)}},attention:t.boolSub("urn:xmpp:attention:0","attention"),chatState:t.enumSub("http://jabber.org/protocol/chatstates",["active","composing","paused","inactive","gone"]),replace:t.subAttribute("urn:xmpp:message-correct:0","replace","id"),requestReceipt:t.boolSub("urn:xmpp:receipts","request"),receipt:t.subAttribute("urn:xmpp:receipts","received","id")}})}},{}],120:[function(e,t,n){"use strict";var r="urn:xmpp:jingle:apps:rtp:1",i="urn:xmpp:jingle:apps:rtp:rtcp-fb:0",o="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",s="urn:xmpp:jingle:apps:rtp:info:1",a="urn:xmpp:jingle:apps:rtp:ssma:0",c="urn:xmpp:jingle:apps:grouping:0";t.exports=function(e){var t=e.utils,n={get:function(){var e=t.find(this.xml,i,"rtcp-fb"),n=[];return e.forEach(function(e){n.push({type:t.getAttribute(e,"type"),subtype:t.getAttribute(e,"subtype")})}),e=t.find(this.xml,i,"rtcp-fb-trr-int"),e.forEach(function(e){n.push({type:t.getAttribute(e,"type"),value:t.getAttribute(e,"value")})}),n},set:function(e){var n=this,o=t.find(this.xml,i,"rtcp-fb");o.forEach(function(e){n.xml.removeChild(e)}),o=t.find(this.xml,i,"rtcp-fb-trr-int"),o.forEach(function(e){n.xml.removeChild(e)}),e.forEach(function(e){var o;"trr-int"===e.type?(o=t.createElement(i,"rtcp-fb-trr-int",r),t.setAttribute(o,"type",e.type),t.setAttribute(o,"value",e.value)):(o=t.createElement(i,"rtcp-fb",r),t.setAttribute(o,"type",e.type),t.setAttribute(o,"subtype",e.subtype)),n.xml.appendChild(o)})}},u=e.define({name:"bandwidth",namespace:r,element:"bandwidth",fields:{type:t.attribute("type"),bandwidth:t.text()}}),l=e.define({name:"_rtp",namespace:r,element:"description",tags:["jingle-application"],fields:{applicationType:{value:"rtp"},media:t.attribute("media"),ssrc:t.attribute("ssrc"),mux:t.boolSub(r,"rtcp-mux"),encryption:{get:function(){var e=t.find(this.xml,r,"encryption");if(!e.length)return[];e=e[0];var n=this,i=t.find(e,r,"crypto"),o=[];return i.forEach(function(e){o.push(new h({},e,n).toJSON())}),o},set:function(e){var n=t.find(this.xml,r,"encryption");if(n.length&&this.xml.removeChild(n),e.length){t.setBoolSubAttribute(this.xml,r,"encryption","required",!0),n=t.find(this.xml,r,"encryption")[0];var i=this;e.forEach(function(e){var t=new h(e,null,i);n.appendChild(t.xml)})}}},feedback:n,headerExtensions:{get:function(){var e=t.find(this.xml,o,"rtp-hdrext"),n=[];return e.forEach(function(e){n.push({id:t.getAttribute(e,"id"),uri:t.getAttribute(e,"uri"),senders:t.getAttribute(e,"senders")})}),n},set:function(e){var n=this;t.find(this.xml,o,"rtp-hdrext").forEach(function(e){n.xml.removeChild(e)}),e.forEach(function(e){var i=t.createElement(o,"rtp-hdrext",r);t.setAttribute(i,"id",e.id),t.setAttribute(i,"uri",e.uri),t.setAttribute(i,"senders",e.senders),n.xml.appendChild(i)})}}}}),f=e.define({name:"_datachannel",namespace:"urn:xmpp:jingle:transports:webrtc-datachannel:0",element:"description",tags:["jingle-application"],fields:{applicationType:{value:"datachannel"}}}),p=e.define({name:"_payloadType",namespace:r,element:"payload-type",fields:{channels:t.attribute("channels"),clockrate:t.attribute("clockrate"),id:t.attribute("id"),maxptime:t.attribute("maxptime"),name:t.attribute("name"),ptime:t.attribute("ptime"),feedback:n,parameters:{get:function(){var e=[];return t.find(this.xml,r,"parameter").forEach(function(n){e.push({key:t.getAttribute(n,"name"),value:t.getAttribute(n,"value")})}),e},set:function(e){var n=this;e.forEach(function(e){var i=t.createElement(r,"parameter");t.setAttribute(i,"name",e.key),t.setAttribute(i,"value",e.value),n.xml.appendChild(i)})}}}}),h=e.define({name:"crypto",namespace:r,element:"crypto",fields:{cipherSuite:t.attribute("crypto-suite"),keyParams:t.attribute("key-params"),sessionParams:t.attribute("session-params"),tag:t.attribute("tag")}}),d=e.define({name:"_group",namespace:c,element:"group",fields:{semantics:t.attribute("semantics"),contents:t.multiSubAttribute(c,"content","name")}}),g=e.define({name:"_sourceGroup",namespace:a,element:"ssrc-group",fields:{semantics:t.attribute("semantics"),sources:t.multiSubAttribute(a,"source","ssrc")}}),m=e.define({name:"_source",namespace:a,element:"source",fields:{ssrc:t.attribute("ssrc"),parameters:{get:function(){var e=[];return t.find(this.xml,a,"parameter").forEach(function(n){e.push({key:t.getAttribute(n,"name"),value:t.getAttribute(n,"value")})}),e},set:function(e){var n=this;e.forEach(function(e){var r=t.createElement(a,"parameter");t.setAttribute(r,"name",e.key),t.setAttribute(r,"value",e.value),n.xml.appendChild(r)})}}}}),v=e.define({name:"mute",namespace:s,element:"mute",fields:{creator:t.attribute("creator"),name:t.attribute("name")}}),y=e.define({name:"unmute",namespace:s,element:"unmute",fields:{creator:t.attribute("creator"),name:t.attribute("name")}});e.extend(l,u),e.extend(l,p,"payloads"),e.extend(l,m,"sources"),e.extend(l,g,"sourceGroups"),e.withDefinition("content","urn:xmpp:jingle:1",function(t){e.extend(t,l),e.extend(t,f)}),e.withDefinition("jingle","urn:xmpp:jingle:1",function(n){e.extend(n,v),e.extend(n,y),e.extend(n,d,"groups"),e.add(n,"ringing",t.boolSub(s,"ringing")),e.add(n,"hold",t.boolSub(s,"hold")),e.add(n,"active",t.boolSub(s,"active"))})}},{}],121:[function(t,n,r){(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function o(e,t){function n(e){if(n[e]!==v)return n[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=n("json-stringify")&&n("json-parse");else{var o,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,u="function"==typeof c&&_;if(u){(o=function(){return 1}).toJSON=o;try{u="0"===c(0)&&"0"===c(new r)&&'""'==c(new s)&&c(b)===v&&c(v)===v&&c()===v&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([v])&&"null"==c(null)&&"[null,null,null]"==c([v,b,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new l(-1))}catch(e){u=!1}}i=u}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){o=f(a);var p=5==o.a.length&&1===o.a[0];if(p){try{p=!f('"\t"')}catch(e){}if(p)try{p=1!==f("01")}catch(e){}if(p)try{p=1!==f("1.")}catch(e){}}}}catch(e){p=!1}i=p}}return n[e]=!!i}e||(e=u.Object()),t||(t=u.Object());var r=e.Number||u.Number,s=e.String||u.String,c=e.Object||u.Object,l=e.Date||u.Date,f=e.SyntaxError||u.SyntaxError,p=e.TypeError||u.TypeError,h=e.Math||u.Math,d=e.JSON||u.JSON;"object"==(void 0===d?"undefined":i(d))&&d&&(t.stringify=d.stringify,t.parse=d.parse);var g,m,v,y=c.prototype,b=y.toString,_=new l(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(e){}if(!n("json")){var w=n("bug-string-char-index");if(!_)var S=h.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return C[t]+365*(e-1970)+S((e-1969+(t=+(t>1)))/4)-S((e-1901+t)/100)+S((e-1601+t)/400)};if((g=y.hasOwnProperty)||(g=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?g=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,g=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,g.call(this,e)}),m=function(e,t){var n,r,o,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)g.call(r,o)&&s++;return n=r=null,s?m=2==s?function(e,t){var n,r={},i="[object Function]"==b.call(e);for(n in e)i&&"prototype"==n||g.call(r,n)||!(r[n]=1)||!g.call(e,n)||t(n)}:function(e,t){var n,r,i="[object Function]"==b.call(e);for(n in e)i&&"prototype"==n||!g.call(e,n)||(r="constructor"===n)||t(n);(r||g.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,o,s="[object Function]"==b.call(e),c=!s&&"function"!=typeof e.constructor&&a[i(e.hasOwnProperty)]&&e.hasOwnProperty||g;for(n in e)s&&"prototype"==n||!c.call(e,n)||t(n);for(o=r.length;n=r[--o];c.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},k=function(e,t){return("000000"+(t||0)).slice(-e)},T=function(e){for(var t='"',n=0,r=e.length,i=!w||r>10,o=i&&(w?e.split(""):e);n<r;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=E[s];break;default:if(s<32){t+="\\u00"+k(2,s.toString(16));break}t+=i?o[n]:e.charAt(n)}}return t+'"'},j=function e(t,n,r,o,s,a,c){var u,l,f,h,d,y,_,w,C,E,j,R,O,A,P,I;try{u=n[t]}catch(e){}if("object"==(void 0===u?"undefined":i(u))&&u)if("[object Date]"!=(l=b.call(u))||g.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=l&&"[object String]"!=l&&"[object Array]"!=l||g.call(u,"toJSON"))&&(u=u.toJSON(t));else if(u>-1/0&&u<1/0){if(x){for(d=S(u/864e5),f=S(d/365.2425)+1970-1;x(f+1,0)<=d;f++);for(h=S((d-x(f,0))/30.42);x(f,h+1)<=d;h++);d=1+d-x(f,h),y=(u%864e5+864e5)%864e5,_=S(y/36e5)%24,w=S(y/6e4)%60,C=S(y/1e3)%60,E=y%1e3}else f=u.getUTCFullYear(),h=u.getUTCMonth(),d=u.getUTCDate(),_=u.getUTCHours(),w=u.getUTCMinutes(),C=u.getUTCSeconds(),E=u.getUTCMilliseconds();u=(f<=0||f>=1e4?(f<0?"-":"+")+k(6,f<0?-f:f):k(4,f))+"-"+k(2,h+1)+"-"+k(2,d)+"T"+k(2,_)+":"+k(2,w)+":"+k(2,C)+"."+k(3,E)+"Z"}else u=null;if(r&&(u=r.call(n,t,u)),null===u)return"null";if("[object Boolean]"==(l=b.call(u)))return""+u;if("[object Number]"==l)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==l)return T(""+u);if("object"==(void 0===u?"undefined":i(u))){for(A=c.length;A--;)if(c[A]===u)throw p();if(c.push(u),j=[],P=a,a+=s,"[object Array]"==l){for(O=0,A=u.length;O<A;O++)R=e(O,u,r,o,s,a,c),j.push(R===v?"null":R);I=j.length?s?"[\n"+a+j.join(",\n"+a)+"\n"+P+"]":"["+j.join(",")+"]":"[]"}else m(o||u,function(t){var n=e(t,u,r,o,s,a,c);n!==v&&j.push(T(t)+":"+(s?" ":"")+n)}),I=j.length?s?"{\n"+a+j.join(",\n"+a)+"\n"+P+"}":"{"+j.join(",")+"}":"{}";return c.pop(),I}};t.stringify=function(e,t,n){var r,o,s,c;if(a[void 0===t?"undefined":i(t)]&&t)if("[object Function]"==(c=b.call(t)))o=t;else if("[object Array]"==c){s={};for(var u,l=0,f=t.length;l<f;u=t[l++],("[object String]"==(c=b.call(u))||"[object Number]"==c)&&(s[u]=1));}if(n)if("[object Number]"==(c=b.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==c&&(r=n.length<=10?n:n.slice(0,10));return j("",(u={},u[""]=e,u),o,s,r,"",[])}}if(!n("json-parse")){var R,O,A=s.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I=function(){throw R=O=null,f()},D=function(){for(var e,t,n,r,i,o=O,s=o.length;R<s;)switch(i=o.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=w?o.charAt(R):o[R],R++,e;case 34:for(e="@",R++;R<s;)if((i=o.charCodeAt(R))<32)I();else if(92==i)switch(i=o.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[i],R++;break;case 117:for(t=++R,n=R+4;R<n;R++)(i=o.charCodeAt(R))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||I();e+=A("0x"+o.slice(t,R));break;default:I()}else{if(34==i)break;for(i=o.charCodeAt(R),t=R;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++R);e+=o.slice(t,R)}if(34==o.charCodeAt(R))return R++,e;I();default:if(t=R,45==i&&(r=!0,i=o.charCodeAt(++R)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(R+1))>=48&&i<=57&&I(),r=!1;R<s&&(i=o.charCodeAt(R))>=48&&i<=57;R++);if(46==o.charCodeAt(R)){for(n=++R;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==R&&I(),R=n}if(101==(i=o.charCodeAt(R))||69==i){for(i=o.charCodeAt(++R),43!=i&&45!=i||R++,n=R;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==R&&I(),R=n}return+o.slice(t,R)}if(r&&I(),"true"==o.slice(R,R+4))return R+=4,!0;if("false"==o.slice(R,R+5))return R+=5,!1;if("null"==o.slice(R,R+4))return R+=4,null;I()}return"$"},M=function e(t){var n,r;if("$"==t&&I(),"string"==typeof t){if("@"==(w?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(n=[];"]"!=(t=D());r||(r=!0))r&&(","==t?"]"==(t=D())&&I():I()),","==t&&I(),n.push(e(t));return n}if("{"==t){for(n={};"}"!=(t=D());r||(r=!0))r&&(","==t?"}"==(t=D())&&I():I()),","!=t&&"string"==typeof t&&"@"==(w?t.charAt(0):t[0])&&":"==D()||I(),n[t.slice(1)]=e(D());return n}I()}return t},L=function(e,t,n){var r=N(e,t,n);r===v?delete e[t]:e[t]=r},N=function(e,t,n){var r,o=e[t];if("object"==(void 0===o?"undefined":i(o))&&o)if("[object Array]"==b.call(o))for(r=o.length;r--;)L(o,r,n);else m(o,function(e){L(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return R=0,O=""+e,n=M(D()),"$"!=D()&&I(),R=O=null,t&&"[object Function]"==b.call(t)?N((r={},r[""]=n,r),"",t):n}}}return t.runInContext=o,t}var s="function"==typeof e&&e.amd,a={function:!0,object:!0},c=a[void 0===r?"undefined":i(r)]&&r&&!r.nodeType&&r,u=a["undefined"==typeof window?"undefined":i(window)]&&window||this,l=c&&a[void 0===n?"undefined":i(n)]&&n&&!n.nodeType&&"object"==(void 0===t?"undefined":i(t))&&t;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),c&&!s)o(u,c);else{var f=u.JSON,p=u.JSON3,h=!1,d=o(u,u.JSON3={noConflict:function(){return h||(h=!0,u.JSON=f,u.JSON3=p,f=p=null),d}});u.JSON={parse:d.parse,stringify:d.stringify}}s&&e(function(){return d})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],122:[function(e,t,n){"use strict";var r=e("xmpp-jid").JID;t.exports=function(e){var t=e.utils;e.withIq=function(e){this.withDefinition("iq","jabber:client",e),this.withDefinition("iq","jabber:component:accept",e)},e.withMessage=function(e){this.withDefinition("message","jabber:client",e),this.withDefinition("message","jabber:component:accept",e)},e.withPresence=function(e){this.withDefinition("presence","jabber:client",e),this.withDefinition("presence","jabber:component:accept",e)},e.withStreamFeatures=function(e){this.withDefinition("features","http://etherx.jabber.org/streams",e)},e.withStanzaError=function(e){this.withDefinition("error","jabber:client",e),this.withDefinition("error","jabber:component:accept",e)},e.withDataForm=function(e){this.withDefinition("x","jabber:x:data",e)},e.withPubsubItem=function(e){this.withDefinition("item","http://jabber.org/protocol/pubsub",e),this.withDefinition("item","http://jabber.org/protocol/pubsub#event",e)},e.getMessage=function(){return this.getDefinition("message","jabber:client")},e.getPresence=function(){return this.getDefinition("presence","jabber:client")},e.getIq=function(){return this.getDefinition("iq","jabber:client")},e.getStreamError=function(){return this.getDefinition("error","http://etherx.jabber.org/streams")},e.getComponentMessage=function(){return this.getDefinition("message","jabber:component:accept")},e.getComponentPresence=function(){return this.getDefinition("presence","jabber:component:accept")},e.getComponentIq=function(){return this.getDefinition("iq","jabber:component:accept")},e.utils.jidAttribute=function(e,n){return{get:function(){var i=new r(t.getAttribute(this.xml,e));return n&&(i.prepped=!0),i},set:function(n){t.setAttribute(this.xml,e,(n||"").toString())}}},e.utils.jidSub=function(e,n,i){return{get:function(){var o=new r(t.getSubText(this.xml,e,n));return i&&(o.prepped=!0),o},set:function(r){t.setSubText(this.xml,e,n,(r||"").toString())}}},e.utils.tzoSub=t.field(function(e,n,r,i){var o,s,a,c=-1,u=t.getSubText(e,n,r);return u?("-"===u.charAt(0)&&(c=1,u=u.slice(1)),o=u.split(":"),s=parseInt(o[0],10),a=parseInt(o[1],10),(60*s+a)*c):i},function(e,n,r,i){var o,s,a="-";"number"==typeof i?(i<0&&(i=-i,a="+"),o=i/60,s=i%60,a+=(o<10?"0":"")+o+":"+(s<10?"0":"")+s):a=i,t.setSubText(e,n,r,a)})}},{"xmpp-jid":322}],123:[function(e,t,n){"use strict";function r(){this._LOOKUP={},this._LOOKUP_EXT={},this._TAGS={},this._CB_DEFINITION={},this._CB_TAG={},this._ID=o.v4(),this.utils=i({},s,a)}var i=e("lodash.assign"),o=e("uuid"),s=e("./lib/types"),a=e("./lib/helpers"),c=e("./lib/stanza");r.prototype.use=function(e){return e["__JXT_LOADED_"+this._ID]||e(this),e["__JXT_LOADED_"+this._ID]=!0,this},r.prototype.getDefinition=function(e,t,n){var r=this._LOOKUP[t+"|"+e];if(n&&!r)throw new Error("Could not find definition for <"+e+' xmlns="'+t+'" />');return r},r.prototype.getExtensions=function(e,t){return this._LOOKUP_EXT[t+"|"+e]||{}},r.prototype.withDefinition=function(e,t,n){var r=t+"|"+e;this._CB_DEFINITION[r]||(this._CB_DEFINITION[r]=[]),this._CB_DEFINITION[r].push(n),this._LOOKUP[r]&&n(this._LOOKUP[r])},r.prototype.withTag=function(e,t){this._CB_TAG[e]||(this._CB_TAG[e]=[]),this._CB_TAG[e].push(t),this.tagged(e).forEach(function(e){t(e)})},r.prototype.tagged=function(e){return this._TAGS[e]||[]},r.prototype.build=function(e){var t=this.getDefinition(e.localName,e.namespaceURI);if(t)return new t(null,e)},r.prototype.parse=function(e){var t=a.parse(e);if(t)return this.build(t)},r.prototype.extend=function(e,t,n,r){var i=e.prototype._NS+"|"+e.prototype._EL,o=t.prototype._name,a=t.prototype._NS+"|"+t.prototype._EL;this._LOOKUP[a]=t,this._LOOKUP_EXT[a]||(this._LOOKUP_EXT[a]={}),this._LOOKUP_EXT[i]||(this._LOOKUP_EXT[i]={}),this._LOOKUP_EXT[i][o]=t,(!n||n&&!r)&&this.add(e,o,s.extension(t)),n&&this.add(e,n,s.multiExtension(t))},r.prototype.add=function(e,t,n){n.enumerable=!0,Object.defineProperty(e.prototype,t,n)},r.prototype.define=function(e){var t=this,n=c(this,e),r=n.prototype._NS,i=n.prototype._EL,o=n.prototype._TAGS,s=r+"|"+i;return this._LOOKUP[s]=n,o.forEach(function(e){t._TAGS[e]||(t._TAGS[e]=[]),t._TAGS[e].push(n)}),Object.keys(e.fields||{}).forEach(function(r){t.add(n,r,e.fields[r])}),this._CB_DEFINITION[s]&&this._CB_DEFINITION[s].forEach(function(e){e(n)}),o.forEach(function(e){t._CB_TAG[e]&&t._CB_TAG[e].forEach(function(e){e(n)})}),n},r.createRegistry=function(){return new r},i(r,a),i(r,s);var u=new r;r.define=u.define.bind(u),r.extend=u.extend.bind(u),r.add=u.add.bind(u),r.parse=u.parse.bind(u),r.build=u.build.bind(u),r.getExtensions=u.getExtensions.bind(u),r.getDefinition=u.getDefinition.bind(u),r.withDefinition=u.withDefinition.bind(u),r.withTag=u.withTag.bind(u),r.tagged=u.tagged.bind(u),r.getGlobalJXT=function(){return u},t.exports=r},{"./lib/helpers":124,"./lib/stanza":125,"./lib/types":126,"lodash.assign":138,uuid:128}],124:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("ltx"),o=e("ltx/lib/DOMElement"),s=n.XML_NS="http://www.w3.org/XML/1998/namespace";n.parse=function(e){var t=i.parse(e,{Element:o});if(1===t.nodeType)return t},n.createElement=function(e,t,r){var i=new o(t);return r&&r===e||n.setAttribute(i,"xmlns",e),i};var a=n.find=function(e,t,n){for(var r=[],i=e.getElementsByTagName(n),o=0,s=i.length;o<s;o++){var a=i[o];a.namespaceURI===t&&a.parentNode===e&&r.push(a)}return r};n.findOrCreate=function(e,t,r){var i=n.find(e,t,r);if(i.length)return i[0];var o=n.createElement(t,r,e.namespaceURI);return e.appendChild(o),o},n.getAttribute=function(e,t,n){return e.getAttribute(t)||n||""},n.getAttributeNS=function(e,t,n,r){return e.getAttributeNS(t,n)||r||""},n.setAttribute=function(e,t,n,r){n||r?e.setAttribute(t,n):e.removeAttribute(t)},n.setAttributeNS=function(e,t,n,r,i){r||i?e.setAttributeNS(t,n,r):e.removeAttributeNS(t,n)},n.getBoolAttribute=function(e,t,n){var r=e.getAttribute(t)||n||"";return"true"===r||"1"===r},n.setBoolAttribute=function(e,t,n){n?e.setAttribute(t,"1"):e.removeAttribute(t)},n.getSubAttribute=function(e,t,n,r,i){var o=a(e,t,n);if(!o)return"";for(var s=0;s<o.length;s++)return o[s].getAttribute(r)||i||"";return""},n.setSubAttribute=function(e,t,r,i,o){var s=a(e,t,r);if(s.length)for(var c=0;c<s.length;c++){if(o)return void s[c].setAttribute(i,o);s[c].removeAttribute(i)}else o&&(r=n.createElement(t,r,e.namespaceURI),r.setAttribute(i,o),e.appendChild(r))},n.getBoolSubAttribute=function(e,t,n,r,i){var o=e.getSubAttribute(t,n,r)||i||"";return"true"===o||"1"===o},n.setBoolSubAttribute=function(e,t,r,i,o){o=o?"1":"",n.setSubAttribute(e,t,r,i,o)},n.getText=function(e){return e.textContent},n.setText=function(e,t){e.textContent=t},n.getSubText=n.getTextSub=function(e,t,n,r){var i=a(e,t,n);return r=r||"",i.length?i[0].textContent||r:r},n.setSubText=n.setTextSub=function(e,t,r,i){var o=a(e,t,r);if(o.length)for(var s=0;s<o.length;s++)e.removeChild(o[s]);if(i){var c=n.createElement(t,r,e.namespaceURI);!0!==i&&(c.textContent=i),e.appendChild(c)}},n.getMultiSubText=function(e,t,n,r){var i=a(e,t,n),o=[];r=r||function(e){return e.textContent||""};for(var s=0;s<i.length;s++)o.push(r(i[s]));return o},n.setMultiSubText=function(e,t,r,i,o){var s=a(e,t,r),c=[];o=o||function(i){if(i){var o=n.createElement(t,r,e.namespaceURI);o.textContent=i,e.appendChild(o)}},c="string"==typeof i?(i||"").split("\n"):i;var u,l;for(u=0,l=s.length;u<l;u++)e.removeChild(s[u]);for(u=0,l=c.length;u<l;u++)o(c[u])},n.getMultiSubAttribute=function(e,t,r,i){return n.getMultiSubText(e,t,r,function(e){return n.getAttribute(e,i)})},n.setMultiSubAttribute=function(e,t,r,i,o){n.setMultiSubText(e,t,r,o,function(o){var s=n.createElement(t,r,e.namespaceURI);n.setAttribute(s,i,o),e.appendChild(s)})},n.getSubLangText=function(e,t,n,r){var i=a(e,t,n);if(!i.length)return{};for(var o,c,u={},l=[],f=0;f<i.length;f++)c=i[f],o=c.getAttributeNS(s,"lang")||r,l.push(o),u[o]=c.textContent||"";return u},n.setSubLangText=function(e,t,i,o,c){var u,l,f=a(e,t,i);if(f.length)for(var p=0;p<f.length;p++)e.removeChild(f[p]);if("string"==typeof o)u=n.createElement(t,i,e.namespaceURI),u.textContent=o,e.appendChild(u);else if("object"===(void 0===o?"undefined":r(o)))for(l in o)o.hasOwnProperty(l)&&(u=n.createElement(t,i,e.namespaceURI),l!==c&&u.setAttributeNS(s,"lang",l),u.textContent=o[l],e.appendChild(u))},n.getBoolSub=function(e,t,n){return!!a(e,t,n).length},n.setBoolSub=function(e,t,r,i){var o=a(e,t,r);if(o.length)for(var s=0;s<o.length;s++){if(i)return;e.removeChild(o[s])}else if(i){var c=n.createElement(t,r,e.namespaceURI);e.appendChild(c)}}},{ltx:145,"ltx/lib/DOMElement":146}],125:[function(e,t,n){"use strict";var r=e("./helpers"),i=e("lodash.assign"),o={constructor:!0,parent:!0,prototype:!0,toJSON:!0,toString:!0,xml:!0};t.exports=function(e,t){function n(n,o,s){var a=this,c=(o||{}).parentNode||(s||{}).xml,u=(c||{}).namespaceURI;a.xml=o||r.createElement(a._NS,a._EL,u),Object.keys(a._PREFIXES).forEach(function(e){var t=a._PREFIXES[e];a.xml.setAttribute("xmlns:"+e,t)}),a._extensions={};for(var l=0,f=a.xml.childNodes.length;l<f;l++){var p=a.xml.childNodes[l],h=e.getDefinition(p.localName,p.namespaceURI);if(void 0!==h){var d=h.prototype._name;a._extensions[d]=new h(null,p),a._extensions[d].parent=a}}return i(a,n),t.init&&t.init.apply(a,[n]),a}return n.prototype._isJXT=!0,n.prototype._name=t.name,n.prototype._eventname=t.eventName,n.prototype._NS=t.namespace,n.prototype._EL=t.element||t.name,n.prototype._PREFIXES=t.prefixes||{},n.prototype._TAGS=t.tags||[],n.prototype.toString=function(){return this.xml.toString()},n.prototype.toJSON=function(){var t,n={};for(t in this._extensions)this._extensions[t].toJSON&&"_"!==t[0]&&(n[t]=this._extensions[t].toJSON());for(t in this){var r=!o[t]&&"_"!==t[0],i=e.getExtensions(this._EL,this._NS)[t];if(r&&!i){var s=this[t];if("function"==typeof s)continue;var a=Object.prototype.toString.call(s);if(a.indexOf("Object")>=0)Object.keys(s).length>0&&(s._isJXT?n[t]=s.toJSON():n[t]=s);else if(a.indexOf("Array")>=0){if(s.length>0){for(var c=[],u=s.length,l=0;l<u;l++){var f=s[l];void 0!==f&&(f._isJXT?c.push(f.toJSON()):c.push(f))}n[t]=c}}else void 0!==s&&!1!==s&&""!==s&&(n[t]=s)}}return n},n}},{"./helpers":124,"lodash.assign":138}],126:[function(e,t,n){(function(t){"use strict";var r=e("./helpers"),i=e("lodash.assign"),o=r.find,s=r.createElement,a=n.field=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return{get:function(){return e.apply(null,[this.xml].concat(n))},set:function(e){t.apply(null,[this.xml].concat(n).concat([e]))}}}};n.boolAttribute=a(r.getBoolAttribute,r.setBoolAttribute),n.subAttribute=a(r.getSubAttribute,r.setSubAttribute),n.boolSubAttribute=a(r.getSubBoolAttribute,r.setSubBoolAttribute),n.text=a(r.getText,r.setText),n.textSub=n.subText=a(r.getSubText,r.setSubText),n.multiTextSub=n.multiSubText=a(r.getMultiSubText,r.setMultiSubText),n.multiSubAttribute=a(r.getMultiSubAttribute,r.setMultiSubAttribute),n.langTextSub=n.subLangText=a(r.getSubLangText,r.setSubLangText),n.boolSub=a(r.getBoolSub,r.setBoolSub),n.langAttribute=a(function(e){return e.getAttributeNS(r.XML_NS,"lang")||""},function(e,t){e.setAttributeNS(r.XML_NS,"lang",t)}),n.b64Text=a(function(e){return e.textContent&&"="!==e.textContent?new t(e.textContent,"base64"):""},function(e,n){if("string"==typeof n){var r=new t(n).toString("base64");e.textContent=r||"="}else e.textContent=""}),n.dateAttribute=function(e,t){return{get:function(){var n=r.getAttribute(this.xml,e);return n?new Date(n):t?new Date(Date.now()):void 0},set:function(t){t&&("string"!=typeof t&&(t=t.toISOString()),r.setAttribute(this.xml,e,t))}}},n.dateSub=function(e,t,n){return{get:function(){var i=r.getSubText(this.xml,e,t);return i?new Date(i):n?new Date(Date.now()):void 0},set:function(n){n&&("string"!=typeof n&&(n=n.toISOString()),r.setSubText(this.xml,e,t,n))}}},n.dateSubAttribute=function(e,t,n,i){return{get:function(){var o=r.getSubAttribute(this.xml,e,t,n);return o?new Date(o):i?new Date(Date.now()):void 0},set:function(i){i&&("string"!=typeof i&&(i=i.toISOString()),r.setSubAttribute(this.xml,e,t,n,i))}}},n.numberAttribute=function(e,t,n){return{get:function(){var i=t?parseFloat:parseInt,o=r.getAttribute(this.xml,e,"");if(!o)return n;var s=i(o,10);return isNaN(s)?n:s},set:function(t){r.setAttribute(this.xml,e,t.toString())}}},n.numberSub=function(e,t,n,i){return{get:function(){var o=n?parseFloat:parseInt,s=r.getSubText(this.xml,e,t,"");if(!s)return i;var a=o(s,10);return isNaN(a)?i:a},set:function(n){r.setSubText(this.xml,e,t,n.toString())}}},n.attribute=function(e,t){return{get:function(){return r.getAttribute(this.xml,e,t)},set:function(t){r.setAttribute(this.xml,e,t)}}},n.attributeNS=function(e,t,n){return{get:function(){return r.getAttributeNS(this.xml,e,t,n)},set:function(n){r.setAttributeNS(this.xml,e,t,n)}}},n.extension=function(e){return{get:function(){var t=this,n=e.prototype._name;if(!this._extensions[n]){var r=o(this.xml,e.prototype._NS,e.prototype._EL);r.length?this._extensions[n]=new e(null,r[0],t):(this._extensions[n]=new e({},null,t),this.xml.appendChild(this._extensions[n].xml)),this._extensions[n].parent=this}return this._extensions[n]},set:function(t){if(t){var n=this[e.prototype._name];!0===t&&(t={}),i(n,t)}}}},n.multiExtension=function(e){return{get:function(){for(var t=this,n=o(this.xml,e.prototype._NS,e.prototype._EL),r=[],i=0,s=n.length;i<s;i++)r.push(new e({},n[i],t));return r},set:function(t){t=t||[];var n,r,i=this,s=o(this.xml,e.prototype._NS,e.prototype._EL);for(n=0,r=s.length;n<r;n++)i.xml.removeChild(s[n]);for(n=0,r=t.length;n<r;n++){var a=new e(t[n],null,i);i.xml.appendChild(a.xml)}}}},n.enumSub=function(e,t){return{get:function(){var n=this,r=[];return t.forEach(function(t){var i=o(n.xml,e,t);i.length&&r.push(i[0].nodeName)}),r[0]||""},set:function(n){var r=this,i=!1;if(t.forEach(function(t){var s=o(r.xml,e,t);s.length&&(t===n?i=!0:r.xml.removeChild(s[0]))}),n&&!i){var a=s(e,n);this.xml.appendChild(a)}}}},n.subExtension=function(e,t,n,r){return{get:function(){if(!this._extensions[e]){var i=o(this.xml,t,n);i.length?i=i[0]:(i=s(t,n,this._NS),this.xml.appendChild(i));var a=o(i,r.prototype._NS,r.prototype._EL)
;a.length?this._extensions[e]=new r(null,a[0],{xml:i}):(this._extensions[e]=new r({},null,{xml:i}),i.appendChild(this._extensions[e].xml)),this._extensions[e].parent=this}return this._extensions[e]},set:function(r){var s=o(this.xml,t,n);if(s.length&&!r&&this.xml.removeChild(s[0]),r){var a=this[e];!0===r&&(r={}),i(a,r)}}}},n.subMultiExtension=function(e,t,n){return{get:function(){var r=this,i=[],s=o(this.xml,e,t);return s.length?(s=s[0],o(s,n.prototype._NS,n.prototype._EL).forEach(function(e){i.push(new n({},e,r))}),i):i},set:function(r){var i=this,a=o(this.xml,e,t);a.length&&i.xml.removeChild(a[0]),r.length&&(a=s(e,t,this._NS),r.forEach(function(t){var r=new n(t,null,{xml:{namespaceURI:e}});a.appendChild(r.xml)}),i.xml.appendChild(a))}}}}).call(this,e("buffer").Buffer)},{"./helpers":124,buffer:57,"lodash.assign":138}],127:[function(e,t,n){arguments[4][109][0].apply(n,arguments)},{dup:109}],128:[function(e,t,n){arguments[4][110][0].apply(n,arguments)},{"./rng":127,dup:110}],129:[function(e,t,n){n.RateLimiter=e("./lib/rateLimiter"),n.TokenBucket=e("./lib/tokenBucket")},{"./lib/rateLimiter":130,"./lib/tokenBucket":131}],130:[function(e,t,n){(function(n){var r=e("./tokenBucket"),i=function(e,t,n){this.tokenBucket=new r(e,e,t,null),this.tokenBucket.content=e,this.curIntervalStart=+new Date,this.tokensThisInterval=0,this.fireImmediately=n};i.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(e,t){function r(n,r){if(n)return t(n,null);i.tokensThisInterval+=e,t(null,r)}if(e>this.tokenBucket.bucketSize)return n.nextTick(t.bind(null,"Requested tokens "+e+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var i=this,o=Date.now();if(o-this.curIntervalStart>=this.tokenBucket.interval&&(this.curIntervalStart=o,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)n.nextTick(t.bind(null,null,-1));else{var s=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-o);setTimeout(function(){i.tokenBucket.removeTokens(e,r)},s)}return!1}return this.tokenBucket.removeTokens(e,r)},tryRemoveTokens:function(e){if(e>this.tokenBucket.bucketSize)return!1;var t=Date.now();return t-this.curIntervalStart>=this.tokenBucket.interval&&(this.curIntervalStart=t,this.tokensThisInterval=0),!(e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)&&this.tokenBucket.tryRemoveTokens(e)},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},t.exports=i}).call(this,e("_process"))},{"./tokenBucket":131,_process:168}],131:[function(e,t,n){(function(e){var n=function(e,t,n,r){if(this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5}else this.interval=n;this.parentBucket=r,this.content=0,this.lastDrip=+new Date};n.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(t,n){function r(){var e=Math.ceil((t-i.content)*(i.interval/i.tokensPerInterval));return setTimeout(function(){i.removeTokens(t,n)},e),!1}var i=this;return this.bucketSize?t>this.bucketSize?(e.nextTick(n.bind(null,"Requested tokens "+t+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),t>this.content?r():this.parentBucket?this.parentBucket.removeTokens(t,function(e,o){return e?n(e,null):t>i.content?r():(i.content-=t,void n(null,Math.min(o,i.content)))}):(this.content-=t,e.nextTick(n.bind(null,null,this.content)),!0)):(e.nextTick(n.bind(null,null,t,Number.POSITIVE_INFINITY)),!0)},tryRemoveTokens:function(e){return!this.bucketSize||!(e>this.bucketSize)&&(this.drip(),!(e>this.content)&&(!(this.parentBucket&&!this.parent.tryRemoveTokens(e))&&(this.content-=e,!0)))},drip:function(){if(!this.tokensPerInterval)return void(this.content=this.bucketSize);var e=+new Date,t=Math.max(e-this.lastDrip,0);this.lastDrip=e;var n=t*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+n,this.bucketSize)}},t.exports=n}).call(this,e("_process"))},{_process:168}],132:[function(e,t,n){function r(e,t){return null==t?e:i(t,o(t),e)}var i=e("lodash._basecopy"),o=e("lodash.keys");t.exports=r},{"lodash._basecopy":133,"lodash.keys":142}],133:[function(e,t,n){function r(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}t.exports=r},{}],134:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,s){return e.call(t,n,r,i,o,s)}}return function(){return e.apply(t,arguments)}}function i(e){return e}t.exports=r},{}],135:[function(e,t,n){function r(e){return s(function(t,n){var r=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=i(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),c&&o(n[0],n[1],c)&&(a=s<3?void 0:a,s=1);++r<s;){var l=n[r];l&&e(t,l,a)}return t})}var i=e("lodash._bindcallback"),o=e("lodash._isiterateecall"),s=e("lodash.restparam");t.exports=r},{"lodash._bindcallback":134,"lodash._isiterateecall":137,"lodash.restparam":143}],136:[function(e,t,n){function r(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function i(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function o(e){return s(e)&&d.call(e)==u}function s(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return null!=e&&(o(e)?g.test(p.call(e)):r(e)&&l.test(e))}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="[object Function]",l=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,h=f.hasOwnProperty,d=f.toString,g=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{}],137:[function(e,t,n){function r(e){return null!=e&&s(f(e))}function i(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?l:t,e>-1&&e%1==0&&e<t}function o(e,t,n){if(!a(n))return!1;var o=void 0===t?"undefined":c(t);if("number"==o?r(n)&&i(t,n.length):"string"==o&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function a(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=/^\d+$/,l=9007199254740991,f=function(e){return function(t){return null==t?void 0:t[e]}}("length");t.exports=o},{}],138:[function(e,t,n){function r(e,t,n){for(var r=-1,i=s(t),o=i.length;++r<o;){var a=i[r],c=e[a],u=n(c,t[a],a,e,t);(u===u?u===c:c!==c)&&(void 0!==c||a in e)||(e[a]=u)}return e}var i=e("lodash._baseassign"),o=e("lodash._createassigner"),s=e("lodash.keys"),a=o(function(e,t,n){return n?r(e,t,n):i(e,t)});t.exports=a},{"lodash._baseassign":132,"lodash._createassigner":135,"lodash.keys":142}],139:[function(e,t,n){(function(e){function r(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function a(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function c(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function u(e,t){return null==e?void 0:e[t]}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function p(e,t){return function(n){return e(t(n))}}function h(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function d(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function g(){this.__data__=Lt?Lt(null):{}}function m(e){return this.has(e)&&delete this.__data__[e]}function v(e){var t=this.__data__;if(Lt){var n=t[e];return n===Oe?void 0:n}return yt.call(t,e)?t[e]:void 0}function y(e){var t=this.__data__;return Lt?void 0!==t[e]:yt.call(t,e)}function b(e,t){return this.__data__[e]=Lt&&void 0===t?Oe:t,this}function _(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(){this.__data__=[]}function S(e){var t=this.__data__,n=U(t,e);return!(n<0)&&(n==t.length-1?t.pop():Tt.call(t,n,1),!0)}function C(e){var t=this.__data__,n=U(t,e);return n<0?void 0:t[n][1]}function x(e){return U(this.__data__,e)>-1}function E(e,t){var n=this.__data__,r=U(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(){this.__data__={hash:new d,map:new(Pt||_),string:new d}}function j(e){return se(this,e).delete(e)}function R(e){return se(this,e).get(e)}function O(e){return se(this,e).has(e)}function A(e,t){return se(this,e).set(e,t),this}function P(e){this.__data__=new _(e)}function I(){this.__data__=new _}function D(e){return this.__data__.delete(e)}function M(e){return this.__data__.get(e)}function L(e){return this.__data__.has(e)}function N(e,t){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!Pt||r.length<Re-1)return r.push([e,t]),this;n=this.__data__=new k(r)}return n.set(e,t),this}function B(e,t){var n=Ht(e)||ye(e)?c(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!yt.call(e,o)||i&&("length"==o||fe(o,r))||n.push(o);return n}function F(e,t,n){var r=e[t];yt.call(e,t)&&ve(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function U(e,t){for(var n=e.length;n--;)if(ve(e[n][0],t))return n;return-1}function z(e,t){return e&&re(t,Ee(t),e)}function q(e,t,n,r,i,s,a){var c;if(r&&(c=s?r(e,i,s,a):r(e)),void 0!==c)return c;if(!Ce(e))return e;var u=Ht(e);if(u){if(c=ce(e),!t)return ne(e,c)}else{var f=Gt(e),p=f==Me||f==Le;if(Wt(e))return X(e,t);if(f==Fe||f==Pe||p&&!s){if(l(e))return s?e:{};if(c=ue(p?{}:e),!t)return ie(e,z(c,e))}else{if(!ot[f])return s?e:{};c=le(e,f,q,t)}}a||(a=new P);var h=a.get(e);if(h)return h;if(a.set(e,c),!u)var d=n?oe(e):Ee(e);return o(d||e,function(i,o){d&&(o=i,i=e[o]),F(c,o,q(i,t,n,r,o,e,a))}),c}function J(e){return Ce(e)?Et(e):{}}function V(e,t,n){var r=t(e);return Ht(e)?r:s(r,n(e))}function G(e){return bt.call(e)}function H(e){return!(!Ce(e)||he(e))&&(we(e)||l(e)?_t:rt).test(ge(e))}function W(e){if(!de(e))return Ot(e);var t=[];for(var n in Object(e))yt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function X(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function $(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t}function Y(e,t){var n=t?$(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Q(e,t,n){return a(t?n(f(e),!0):f(e),r,new e.constructor)}function K(e){var t=new e.constructor(e.source,nt.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,n){return a(t?n(h(e),!0):h(e),i,new e.constructor)}function ee(e){return Jt?Object(Jt.call(e)):{}}function te(e,t){var n=t?$(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function re(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=r?r(n[s],e[s],s,n,e):void 0;F(n,s,void 0===a?e[s]:a)}return n}function ie(e,t){return re(e,Vt(e),t)}function oe(e){return V(e,Ee,Vt)}function se(e,t){var n=e.__data__;return pe(t)?n["string"==typeof t?"string":"hash"]:n.map}function ae(e,t){var n=u(e,t);return H(n)?n:void 0}function ce(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&yt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ue(e){return"function"!=typeof e.constructor||de(e)?{}:J(xt(e))}function le(e,t,n,r){var i=e.constructor;switch(t){case Ve:return $(e);case Ie:case De:return new i(+e);case Ge:return Y(e,r);case He:case We:case Xe:case $e:case Ye:case Qe:case Ke:case Ze:case et:return te(e,r);case Ne:return Q(e,r,n);case Be:case qe:return new i(e);case Ue:return K(e);case ze:return Z(e,r,n);case Je:return ee(e)}}function fe(e,t){return!!(t=null==t?Ae:t)&&("number"==typeof e||it.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=void 0===e?"undefined":je(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function he(e){return!!mt&&mt in e}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||dt)}function ge(e){if(null!=e){try{return vt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function me(e){return q(e,!0,!0)}function ve(e,t){return e===t||e!==e&&t!==t}function ye(e){return _e(e)&&yt.call(e,"callee")&&(!kt.call(e,"callee")||bt.call(e)==Pe)}function be(e){return null!=e&&Se(e.length)&&!we(e)}function _e(e){return xe(e)&&be(e)}function we(e){var t=Ce(e)?bt.call(e):"";return t==Me||t==Le}function Se(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ae}function Ce(e){var t=void 0===e?"undefined":je(e);return!!e&&("object"==t||"function"==t)}function xe(e){return!!e&&"object"==(void 0===e?"undefined":je(e))}function Ee(e){return be(e)?B(e):W(e)}function ke(){return[]}function Te(){return!1}var je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re=200,Oe="__lodash_hash_undefined__",Ae=9007199254740991,Pe="[object Arguments]",Ie="[object Boolean]",De="[object Date]",Me="[object Function]",Le="[object GeneratorFunction]",Ne="[object Map]",Be="[object Number]",Fe="[object Object]",Ue="[object RegExp]",ze="[object Set]",qe="[object String]",Je="[object Symbol]",Ve="[object ArrayBuffer]",Ge="[object DataView]",He="[object Float32Array]",We="[object Float64Array]",Xe="[object Int8Array]",$e="[object Int16Array]",Ye="[object Int32Array]",Qe="[object Uint8Array]",Ke="[object Uint8ClampedArray]",Ze="[object Uint16Array]",et="[object Uint32Array]",tt=/[\\^$.*+?()[\]{}|]/g,nt=/\w*$/,rt=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,ot={};ot[Pe]=ot["[object Array]"]=ot[Ve]=ot[Ge]=ot[Ie]=ot[De]=ot[He]=ot[We]=ot[Xe]=ot[$e]=ot[Ye]=ot[Ne]=ot[Be]=ot[Fe]=ot[Ue]=ot[ze]=ot[qe]=ot[Je]=ot[Qe]=ot[Ke]=ot[Ze]=ot[et]=!0,ot["[object Error]"]=ot[Me]=ot["[object WeakMap]"]=!1;var st="object"==(void 0===e?"undefined":je(e))&&e&&e.Object===Object&&e,at="object"==("undefined"==typeof self?"undefined":je(self))&&self&&self.Object===Object&&self,ct=st||at||Function("return this")(),ut="object"==(void 0===n?"undefined":je(n))&&n&&!n.nodeType&&n,lt=ut&&"object"==(void 0===t?"undefined":je(t))&&t&&!t.nodeType&&t,ft=lt&&lt.exports===ut,pt=Array.prototype,ht=Function.prototype,dt=Object.prototype,gt=ct["__core-js_shared__"],mt=function(){var e=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),vt=ht.toString,yt=dt.hasOwnProperty,bt=dt.toString,_t=RegExp("^"+vt.call(yt).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=ft?ct.Buffer:void 0,St=ct.Symbol,Ct=ct.Uint8Array,xt=p(Object.getPrototypeOf,Object),Et=Object.create,kt=dt.propertyIsEnumerable,Tt=pt.splice,jt=Object.getOwnPropertySymbols,Rt=wt?wt.isBuffer:void 0,Ot=p(Object.keys,Object),At=ae(ct,"DataView"),Pt=ae(ct,"Map"),It=ae(ct,"Promise"),Dt=ae(ct,"Set"),Mt=ae(ct,"WeakMap"),Lt=ae(Object,"create"),Nt=ge(At),Bt=ge(Pt),Ft=ge(It),Ut=ge(Dt),zt=ge(Mt),qt=St?St.prototype:void 0,Jt=qt?qt.valueOf:void 0;d.prototype.clear=g,d.prototype.delete=m,d.prototype.get=v,d.prototype.has=y,d.prototype.set=b,_.prototype.clear=w,_.prototype.delete=S,_.prototype.get=C,_.prototype.has=x,_.prototype.set=E,k.prototype.clear=T,k.prototype.delete=j,k.prototype.get=R,k.prototype.has=O,k.prototype.set=A,P.prototype.clear=I,P.prototype.delete=D,P.prototype.get=M,P.prototype.has=L,P.prototype.set=N;var Vt=jt?p(jt,Object):ke,Gt=G;(At&&Gt(new At(new ArrayBuffer(1)))!=Ge||Pt&&Gt(new Pt)!=Ne||It&&"[object Promise]"!=Gt(It.resolve())||Dt&&Gt(new Dt)!=ze||Mt&&"[object WeakMap]"!=Gt(new Mt))&&(Gt=function(e){var t=bt.call(e),n=t==Fe?e.constructor:void 0,r=n?ge(n):void 0;if(r)switch(r){case Nt:return Ge;case Bt:return Ne;case Ft:return"[object Promise]";case Ut:return ze;case zt:return"[object WeakMap]"}return t});var Ht=Array.isArray,Wt=Rt||Te;t.exports=me}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],140:[function(e,t,n){function r(e){return o(e)&&m.call(e,"callee")&&(!y.call(e,"callee")||v.call(e)==p)}function i(e){return null!=e&&a(e.length)&&!s(e)}function o(e){return u(e)&&i(e)}function s(e){var t=c(e)?v.call(e):"";return t==h||t==d}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function c(e){var t=void 0===e?"undefined":l(e);return!!e&&("object"==t||"function"==t)}function u(e){return!!e&&"object"==(void 0===e?"undefined":l(e))}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=9007199254740991,p="[object Arguments]",h="[object Function]",d="[object GeneratorFunction]",g=Object.prototype,m=g.hasOwnProperty,v=g.toString,y=g.propertyIsEnumerable;t.exports=r},{}],141:[function(e,t,n){function r(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function o(e){return s(e)&&d.call(e)==u}function s(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return null!=e&&(o(e)?g.test(p.call(e)):r(e)&&l.test(e))}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="[object Function]",l=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,h=f.hasOwnProperty,d=f.toString,g=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=function(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}(Array,"isArray"),v=9007199254740991,y=m||function(e){return r(e)&&i(e.length)&&"[object Array]"==d.call(e)};t.exports=y},{}],142:[function(e,t,n){function r(e){return null!=e&&o(y(e))}function i(e,t){return e="number"==typeof e||h.test(e)?+e:-1,t=null==t?v:t,e>-1&&e%1==0&&e<t}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function s(e){for(var t=c(e),n=t.length,r=n&&e.length,s=!!r&&o(r)&&(p(e)||f(e)),a=-1,u=[];++a<n;){var l=t[a];(s&&i(l,r)||g.call(e,l))&&u.push(l)}return u}function a(e){var t=void 0===e?"undefined":u(e);return!!e&&("object"==t||"function"==t)}function c(e){if(null==e)return[];a(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(p(e)||f(e))&&t||0;for(var n=e.constructor,r=-1,s="function"==typeof n&&n.prototype===e,c=Array(t),u=t>0;++r<t;)c[r]=r+"";for(var l in e)u&&i(l,t)||"constructor"==l&&(s||!g.call(e,l))||c.push(l);return c}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e("lodash._getnative"),f=e("lodash.isarguments"),p=e("lodash.isarray"),h=/^\d+$/,d=Object.prototype,g=d.hasOwnProperty,m=l(Object,"keys"),v=9007199254740991,y=function(e){return function(t){return null==t?void 0:t[e]}}("length"),b=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?s(e):a(e)?m(e):[]}:s;t.exports=b},{"lodash._getnative":136,"lodash.isarguments":140,"lodash.isarray":141}],143:[function(e,t,n){function r(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-t,0),s=Array(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=s,e.apply(this,a)}}var i="Expected a function",o=Math.max;t.exports=r},{}],144:[function(t,n,r){(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){function o(e,t){return e.set(t[0],t[1]),e}function s(e,t){return e.add(t),e}function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function c(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function f(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function p(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function h(e,t){return!!(null==e?0:e.length)&&x(e,t,0)>-1}function d(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function g(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function m(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function v(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function y(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function b(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function _(e){return e.split("")}function w(e){return e.match(Ut)||[]}function S(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function C(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function x(e,t,n){return t===t?Q(e,t,n):C(e,k,n)}function E(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function k(e){return e!==e}function T(e,t){var n=null==e?0:e.length;return n?P(e,t)/n:Me}function j(e){return function(t){return null==t?ie:t[e]}}function R(e){return function(t){return null==e?ie:e[t]}}function O(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function A(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function P(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==ie&&(n=n===ie?o:n+o)}return n}function I(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function D(e,t){return g(t,function(t){return[t,e[t]]})}function M(e){return function(t){return e(t)}}function L(e,t){return g(t,function(t){return e[t]})}function N(e,t){return e.has(t)}function B(e,t){for(var n=-1,r=e.length;++n<r&&x(t,e[n],0)>-1;);return n}function F(e,t){for(var n=e.length;n--&&x(t,e[n],0)>-1;);return n}function U(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function z(e){return"\\"+jn[e]}function q(e,t){return null==e?ie:e[t]}function J(e){return bn.test(e)}function V(e){return _n.test(e)}function G(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function W(e,t){return function(n){return e(t(n))}}function X(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==le||(e[n]=le,o[i++]=n)}return o}function $(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Y(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function Q(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function K(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function Z(e){return J(e)?te(e):Gn(e)}function ee(e){return J(e)?ne(e):_(e)}function te(e){for(var t=vn.lastIndex=0;vn.test(e);)++t;return t}function ne(e){return e.match(vn)||[]}function re(e){return e.match(yn)||[]}var ie,oe=200,se="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",ce="__lodash_hash_undefined__",ue=500,le="__lodash_placeholder__",fe=1,pe=2,he=4,de=1,ge=2,me=1,ve=2,ye=4,be=8,_e=16,we=32,Se=64,Ce=128,xe=256,Ee=512,ke=30,Te="...",je=800,Re=16,Oe=1,Ae=2,Pe=1/0,Ie=9007199254740991,De=1.7976931348623157e308,Me=NaN,Le=4294967295,Ne=Le-1,Be=Le>>>1,Fe=[["ary",Ce],["bind",me],["bindKey",ve],["curry",be],["curryRight",_e],["flip",Ee],["partial",we],["partialRight",Se],["rearg",xe]],Ue="[object Arguments]",ze="[object Array]",qe="[object AsyncFunction]",Je="[object Boolean]",Ve="[object Date]",Ge="[object DOMException]",He="[object Error]",We="[object Function]",Xe="[object GeneratorFunction]",$e="[object Map]",Ye="[object Number]",Qe="[object Null]",Ke="[object Object]",Ze="[object Proxy]",et="[object RegExp]",tt="[object Set]",nt="[object String]",rt="[object Symbol]",it="[object Undefined]",ot="[object WeakMap]",st="[object WeakSet]",at="[object ArrayBuffer]",ct="[object DataView]",ut="[object Float32Array]",lt="[object Float64Array]",ft="[object Int8Array]",pt="[object Int16Array]",ht="[object Int32Array]",dt="[object Uint8Array]",gt="[object Uint8ClampedArray]",mt="[object Uint16Array]",vt="[object Uint32Array]",yt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,St=/[&<>"']/g,Ct=RegExp(wt.source),xt=RegExp(St.source),Et=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,Tt=/<%=([\s\S]+?)%>/g,jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rt=/^\w*$/,Ot=/^\./,At=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Pt.source),Dt=/^\s+|\s+$/g,Mt=/^\s+/,Lt=/\s+$/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,qt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Jt=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Gt=/^0b[01]+$/i,Ht=/^\[object .+?Constructor\]$/,Wt=/^0o[0-7]+$/i,Xt=/^(?:0|[1-9]\d*)$/,$t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Qt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",en="["+Zt+"]",tn="["+Kt+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Zt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",sn="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",cn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",un="(?:"+nn+"|"+rn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",sn,an].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*",pn="[\\ufe0e\\ufe0f]?"+ln+fn,hn="(?:"+["[\\u2700-\\u27bf]",sn,an].join("|")+")"+pn,dn="(?:"+["[^\\ud800-\\udfff]"+tn+"?",tn,sn,an,"[\\ud800-\\udfff]"].join("|")+")",gn=RegExp("[']","g"),mn=RegExp(tn,"g"),vn=RegExp(on+"(?="+on+")|"+dn+pn,"g"),yn=RegExp([cn+"?"+nn+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[en,cn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[en,cn+un,"$"].join("|")+")",cn+"?"+un+"+(?:['](?:d|ll|m|re|s|t|ve))?",cn+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",hn].join("|"),"g"),bn=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),_n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sn=-1,Cn={};Cn[ut]=Cn[lt]=Cn[ft]=Cn[pt]=Cn[ht]=Cn[dt]=Cn[gt]=Cn[mt]=Cn[vt]=!0,Cn[Ue]=Cn[ze]=Cn[at]=Cn[Je]=Cn[ct]=Cn[Ve]=Cn[He]=Cn[We]=Cn[$e]=Cn[Ye]=Cn[Ke]=Cn[et]=Cn[tt]=Cn[nt]=Cn[ot]=!1;var xn={};xn[Ue]=xn[ze]=xn[at]=xn[ct]=xn[Je]=xn[Ve]=xn[ut]=xn[lt]=xn[ft]=xn[pt]=xn[ht]=xn[$e]=xn[Ye]=xn[Ke]=xn[et]=xn[tt]=xn[nt]=xn[rt]=xn[dt]=xn[gt]=xn[mt]=xn[vt]=!0,xn[He]=xn[We]=xn[ot]=!1;var En={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rn=parseFloat,On=parseInt,An="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,Pn="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,In=An||Pn||Function("return this")(),Dn="object"==(void 0===r?"undefined":i(r))&&r&&!r.nodeType&&r,Mn=Dn&&"object"==(void 0===n?"undefined":i(n))&&n&&!n.nodeType&&n,Ln=Mn&&Mn.exports===Dn,Nn=Ln&&An.process,Bn=function(){try{return Nn&&Nn.binding&&Nn.binding("util")}catch(e){}}(),Fn=Bn&&Bn.isArrayBuffer,Un=Bn&&Bn.isDate,zn=Bn&&Bn.isMap,qn=Bn&&Bn.isRegExp,Jn=Bn&&Bn.isSet,Vn=Bn&&Bn.isTypedArray,Gn=j("length"),Hn=R(En),Wn=R(kn),Xn=R(Tn),$n=function e(t){function n(e){if(sc(e)&&!yp(e)&&!(e instanceof R)){if(e instanceof _)return e;if(vl.call(e,"__wrapped__"))return rs(e)}return new _(e)}function r(){}function _(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ie}function R(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function Q(){
var e=new R(this.__wrapped__);return e.__actions__=Bi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Bi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Bi(this.__views__),e}function te(){if(this.__filtered__){var e=new R(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ne(){var e=this.__wrapped__.value(),t=this.__dir__,n=yp(e),r=t<0,i=n?e.length:0,o=jo(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,f=l.length,p=0,h=Wl(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return bi(e,this.__actions__);var d=[];e:for(;c--&&p<h;){u+=t;for(var g=-1,m=e[u];++g<f;){var v=l[g],y=v.iteratee,b=v.type,_=y(m);if(b==Ae)m=_;else if(!_){if(b==Oe)continue e;break e}}d[p++]=m}return d}function Ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kt(){this.__data__=rf?rf(null):{},this.size=0}function Zt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function en(e){var t=this.__data__;if(rf){var n=t[e];return n===ce?ie:n}return vl.call(t,e)?t[e]:ie}function tn(e){var t=this.__data__;return rf?t[e]!==ie:vl.call(t,e)}function nn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=rf&&t===ie?ce:t,this}function rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function on(){this.__data__=[],this.size=0}function sn(e){var t=this.__data__,n=Qn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Al.call(t,n,1),--this.size,!0)}function an(e){var t=this.__data__,n=Qn(t,e);return n<0?ie:t[n][1]}function cn(e){return Qn(this.__data__,e)>-1}function un(e,t){var n=this.__data__,r=Qn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function fn(){this.size=0,this.__data__={hash:new Ut,map:new(Zl||rn),string:new Ut}}function pn(e){var t=xo(this,e).delete(e);return this.size-=t?1:0,t}function hn(e){return xo(this,e).get(e)}function dn(e){return xo(this,e).has(e)}function vn(e,t){var n=xo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ln;++t<n;)this.add(e[t])}function bn(e){return this.__data__.set(e,ce),this}function _n(e){return this.__data__.has(e)}function En(e){var t=this.__data__=new rn(e);this.size=t.size}function kn(){this.__data__=new rn,this.size=0}function Tn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function jn(e){return this.__data__.get(e)}function An(e){return this.__data__.has(e)}function Pn(e,t){var n=this.__data__;if(n instanceof rn){var r=n.__data__;if(!Zl||r.length<oe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ln(r)}return n.set(e,t),this.size=n.size,this}function Dn(e,t){var n=yp(e),r=!n&&vp(e),i=!n&&!r&&_p(e),o=!n&&!r&&!i&&Ep(e),s=n||r||i||o,a=s?I(e.length,ll):[],c=a.length;for(var u in e)!t&&!vl.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Lo(u,c))||a.push(u);return a}function Mn(e){var t=e.length;return t?e[ei(0,t-1)]:ie}function Nn(e,t){return Zo(Bi(e),rr(t,0,e.length))}function Bn(e){return Zo(Bi(e))}function Gn(e,t,n){(n===ie||Ha(e[t],n))&&(n!==ie||t in e)||tr(e,t,n)}function Yn(e,t,n){var r=e[t];vl.call(e,t)&&Ha(r,n)&&(n!==ie||t in e)||tr(e,t,n)}function Qn(e,t){for(var n=e.length;n--;)if(Ha(e[n][0],t))return n;return-1}function Kn(e,t,n,r){return mf(e,function(e,i,o){t(r,e,n(e),o)}),r}function Zn(e,t){return e&&Fi(t,zc(t),e)}function er(e,t){return e&&Fi(t,qc(t),e)}function tr(e,t,n){"__proto__"==t&&Ml?Ml(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function nr(e,t){for(var n=-1,r=t.length,i=rl(r),o=null==e;++n<r;)i[n]=o?ie:Bc(e,t[n]);return i}function rr(e,t,n){return e===e&&(n!==ie&&(e=e<=n?e:n),t!==ie&&(e=e>=t?e:t)),e}function ir(e,t,n,r,i,o){var s,a=t&fe,c=t&pe,l=t&he;if(n&&(s=i?n(e,r,i,o):n(e)),s!==ie)return s;if(!oc(e))return e;var f=yp(e);if(f){if(s=Ao(e),!a)return Bi(e,s)}else{var p=jf(e),h=p==We||p==Xe;if(_p(e))return ki(e,a);if(p==Ke||p==Ue||h&&!i){if(s=c||h?{}:Po(e),!a)return c?zi(e,er(s,e)):Ui(e,Zn(s,e))}else{if(!xn[p])return i?e:{};s=Io(e,p,ir,a)}}o||(o=new En);var d=o.get(e);if(d)return d;o.set(e,s);var g=l?c?_o:bo:c?qc:zc,m=f?ie:g(e);return u(m||e,function(r,i){m&&(i=r,r=e[i]),Yn(s,i,ir(r,t,n,i,e,o))}),s}function or(e){var t=zc(e);return function(n){return sr(n,e,t)}}function sr(e,t,n){var r=n.length;if(null==e)return!r;for(e=cl(e);r--;){var i=n[r],o=t[i],s=e[i];if(s===ie&&!(i in e)||!o(s))return!1}return!0}function ar(e,t,n){if("function"!=typeof e)throw new fl(ae);return Af(function(){e.apply(ie,n)},t)}function cr(e,t,n,r){var i=-1,o=h,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;n&&(t=g(t,M(n))),r?(o=d,s=!1):t.length>=oe&&(o=N,s=!1,t=new yn(t));e:for(;++i<a;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,s&&f===f){for(var p=u;p--;)if(t[p]===f)continue e;c.push(l)}else o(t,f,r)||c.push(l)}return c}function ur(e,t){var n=!0;return mf(e,function(e,r,i){return n=!!t(e,r,i)}),n}function lr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(a===ie?s===s&&!vc(s):n(s,a)))var a=s,c=o}return c}function fr(e,t,n,r){var i=e.length;for(n=Cc(n),n<0&&(n=-n>i?0:i+n),r=r===ie||r>i?i:Cc(r),r<0&&(r+=i),r=n>r?0:xc(r);n<r;)e[n++]=t;return e}function pr(e,t){var n=[];return mf(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function hr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=Mo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?hr(a,t-1,n,r,i):m(i,a):r||(i[i.length]=a)}return i}function dr(e,t){return e&&yf(e,t,zc)}function gr(e,t){return e&&bf(e,t,zc)}function mr(e,t){return p(t,function(t){return nc(e[t])})}function vr(e,t){t=xi(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[es(t[n++])];return n&&n==r?e:ie}function yr(e,t,n){var r=t(e);return yp(e)?r:m(r,n(e))}function br(e){return null==e?e===ie?it:Qe:Dl&&Dl in cl(e)?To(e):Wo(e)}function _r(e,t){return e>t}function wr(e,t){return null!=e&&vl.call(e,t)}function Sr(e,t){return null!=e&&t in cl(e)}function Cr(e,t,n){return e>=Wl(t,n)&&e<Hl(t,n)}function xr(e,t,n){for(var r=n?d:h,i=e[0].length,o=e.length,s=o,a=rl(o),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=g(l,M(t))),c=Wl(l.length,c),a[s]=!n&&(t||i>=120&&l.length>=120)?new yn(s&&l):ie}l=e[0];var f=-1,p=a[0];e:for(;++f<i&&u.length<c;){var m=l[f],v=t?t(m):m;if(m=n||0!==m?m:0,!(p?N(p,v):r(u,v,n))){for(s=o;--s;){var y=a[s];if(!(y?N(y,v):r(e[s],v,n)))continue e}p&&p.push(v),u.push(m)}}return u}function Er(e,t,n,r){return dr(e,function(e,i,o){t(r,n(e),i,o)}),r}function kr(e,t,n){t=xi(t,e),e=$o(e,t);var r=null==e?e:e[es(Ss(t))];return null==r?ie:a(r,e,n)}function Tr(e){return sc(e)&&br(e)==Ue}function jr(e){return sc(e)&&br(e)==at}function Rr(e){return sc(e)&&br(e)==Ve}function Or(e,t,n,r,i){return e===t||(null==e||null==t||!sc(e)&&!sc(t)?e!==e&&t!==t:Ar(e,t,n,r,Or,i))}function Ar(e,t,n,r,i,o){var s=yp(e),a=yp(t),c=s?ze:jf(e),u=a?ze:jf(t);c=c==Ue?Ke:c,u=u==Ue?Ke:u;var l=c==Ke,f=u==Ke,p=c==u;if(p&&_p(e)){if(!_p(t))return!1;s=!0,l=!1}if(p&&!l)return o||(o=new En),s||Ep(e)?go(e,t,n,r,i,o):mo(e,t,c,n,r,i,o);if(!(n&de)){var h=l&&vl.call(e,"__wrapped__"),d=f&&vl.call(t,"__wrapped__");if(h||d){var g=h?e.value():e,m=d?t.value():t;return o||(o=new En),i(g,m,n,r,o)}}return!!p&&(o||(o=new En),vo(e,t,n,r,i,o))}function Pr(e){return sc(e)&&jf(e)==$e}function Ir(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=cl(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var c=a[0],u=e[c],l=a[1];if(s&&a[2]){if(u===ie&&!(c in e))return!1}else{var f=new En;if(r)var p=r(u,l,c,e,t,f);if(!(p===ie?Or(l,u,de|ge,r,f):p))return!1}}return!0}function Dr(e){return!(!oc(e)||zo(e))&&(nc(e)?Cl:Ht).test(ts(e))}function Mr(e){return sc(e)&&br(e)==et}function Lr(e){return sc(e)&&jf(e)==tt}function Nr(e){return sc(e)&&ic(e.length)&&!!Cn[br(e)]}function Br(e){return"function"==typeof e?e:null==e?Au:"object"==(void 0===e?"undefined":i(e))?yp(e)?Vr(e[0],e[1]):Jr(e):Fu(e)}function Fr(e){if(!qo(e))return Gl(e);var t=[];for(var n in cl(e))vl.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!oc(e))return Ho(e);var t=qo(e),n=[];for(var r in e)("constructor"!=r||!t&&vl.call(e,r))&&n.push(r);return n}function zr(e,t){return e<t}function qr(e,t){var n=-1,r=Wa(e)?rl(e.length):[];return mf(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Jr(e){var t=Eo(e);return 1==t.length&&t[0][2]?Vo(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Vr(e,t){return Bo(e)&&Jo(t)?Vo(es(e),t):function(n){var r=Bc(n,e);return r===ie&&r===t?Uc(n,e):Or(t,r,de|ge)}}function Gr(e,t,n,r,i){e!==t&&yf(t,function(o,s){if(oc(o))i||(i=new En),Hr(e,t,s,n,Gr,r,i);else{var a=r?r(e[s],o,s+"",e,t,i):ie;a===ie&&(a=o),Gn(e,s,a)}},qc)}function Hr(e,t,n,r,i,o,s){var a=e[n],c=t[n],u=s.get(c);if(u)return void Gn(e,n,u);var l=o?o(a,c,n+"",e,t,s):ie,f=l===ie;if(f){var p=yp(c),h=!p&&_p(c),d=!p&&!h&&Ep(c);l=c,p||h||d?yp(a)?l=a:Xa(a)?l=Bi(a):h?(f=!1,l=ki(c,!0)):d?(f=!1,l=Ii(c,!0)):l=[]:dc(c)||vp(c)?(l=a,vp(a)?l=kc(a):(!oc(a)||r&&nc(a))&&(l=Po(c))):f=!1}f&&(s.set(c,l),i(l,c,r,o,s),s.delete(c)),Gn(e,n,l)}function Wr(e,t){var n=e.length;if(n)return t+=t<0?n:0,Lo(t,n)?e[t]:ie}function Xr(e,t,n){var r=-1;return t=g(t.length?t:[Au],M(Co())),A(qr(e,function(e,n,i){return{criteria:g(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return Mi(e,t,n)})}function $r(e,t){return Yr(e,t,function(t,n){return Uc(e,n)})}function Yr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=vr(e,s);n(a,s)&&si(o,xi(s,e),a)}return o}function Qr(e){return function(t){return vr(t,e)}}function Kr(e,t,n,r){var i=r?E:x,o=-1,s=t.length,a=e;for(e===t&&(t=Bi(t)),n&&(a=g(e,M(n)));++o<s;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==e&&Al.call(a,c,1),Al.call(e,c,1);return e}function Zr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Lo(i)?Al.call(e,i,1):mi(e,i)}}return e}function ei(e,t){return e+Ul(Yl()*(t-e+1))}function ti(e,t,n,r){for(var i=-1,o=Hl(Fl((t-e)/(n||1)),0),s=rl(o);o--;)s[r?o:++i]=e,e+=n;return s}function ni(e,t){var n="";if(!e||t<1||t>Ie)return n;do{t%2&&(n+=e),(t=Ul(t/2))&&(e+=e)}while(t);return n}function ri(e,t){return Pf(Xo(e,t,Au),e+"")}function ii(e){return Mn(eu(e))}function oi(e,t){var n=eu(e);return Zo(n,rr(t,0,n.length))}function si(e,t,n,r){if(!oc(e))return e;t=xi(t,e);for(var i=-1,o=t.length,s=o-1,a=e;null!=a&&++i<o;){var c=es(t[i]),u=n;if(i!=s){var l=a[c];u=r?r(l,c,a):ie,u===ie&&(u=oc(l)?l:Lo(t[i+1])?[]:{})}Yn(a,c,u),a=a[c]}return e}function ai(e){return Zo(eu(e))}function ci(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=rl(i);++r<i;)o[r]=e[r+t];return o}function ui(e,t){var n;return mf(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function li(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Be){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!vc(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return fi(e,t,Au,n)}function fi(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,s=t!==t,a=null===t,c=vc(t),u=t===ie;i<o;){var l=Ul((i+o)/2),f=n(e[l]),p=f!==ie,h=null===f,d=f===f,g=vc(f);if(s)var m=r||d;else m=u?d&&(r||p):a?d&&p&&(r||!h):c?d&&p&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);m?i=l+1:o=l}return Wl(o,Ne)}function pi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Ha(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function hi(e){return"number"==typeof e?e:vc(e)?Me:+e}function di(e){if("string"==typeof e)return e;if(yp(e))return g(e,di)+"";if(vc(e))return df?df.call(e):"";var t=e+"";return"0"==t&&1/e==-Pe?"-0":t}function gi(e,t,n){var r=-1,i=h,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=d;else if(o>=oe){var u=t?null:xf(e);if(u)return $(u);s=!1,i=N,c=new yn}else c=t?[]:a;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,s&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),a.push(l)}else i(c,f,n)||(c!==a&&c.push(f),a.push(l))}return a}function mi(e,t){return t=xi(t,e),null==(e=$o(e,t))||delete e[es(Ss(t))]}function vi(e,t,n,r){return si(e,t,n(vr(e,t)),r)}function yi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ci(e,r?0:o,r?o+1:i):ci(e,r?o+1:0,r?i:o)}function bi(e,t){var n=e;return n instanceof R&&(n=n.value()),v(t,function(e,t){return t.func.apply(t.thisArg,m([e],t.args))},n)}function _i(e,t,n){var r=e.length;if(r<2)return r?gi(e[0]):[];for(var i=-1,o=rl(r);++i<r;)for(var s=e[i],a=-1;++a<r;)a!=i&&(o[i]=cr(o[i]||s,e[a],t,n));return gi(hr(o,1),t,n)}function wi(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var a=r<o?t[r]:ie;n(s,e[r],a)}return s}function Si(e){return Xa(e)?e:[]}function Ci(e){return"function"==typeof e?e:Au}function xi(e,t){return yp(e)?e:Bo(e,t)?[e]:If(jc(e))}function Ei(e,t,n){var r=e.length;return n=n===ie?r:n,!t&&n>=r?e:ci(e,t,n)}function ki(e,t){if(t)return e.slice();var n=e.length,r=Tl?Tl(n):new e.constructor(n);return e.copy(r),r}function Ti(e){var t=new e.constructor(e.byteLength);return new kl(t).set(new kl(e)),t}function ji(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ri(e,t,n){return v(t?n(H(e),fe):H(e),o,new e.constructor)}function Oi(e){var t=new e.constructor(e.source,Jt.exec(e));return t.lastIndex=e.lastIndex,t}function Ai(e,t,n){return v(t?n($(e),fe):$(e),s,new e.constructor)}function Pi(e){return hf?cl(hf.call(e)):{}}function Ii(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Di(e,t){if(e!==t){var n=e!==ie,r=null===e,i=e===e,o=vc(e),s=t!==ie,a=null===t,c=t===t,u=vc(t);if(!a&&!u&&!o&&e>t||o&&s&&c&&!a&&!u||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!u&&e<t||u&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!c)return-1}return 0}function Mi(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var c=Di(i[r],o[r]);if(c){if(r>=a)return c;return c*("desc"==n[r]?-1:1)}}return e.index-t.index}function Li(e,t,n,r){for(var i=-1,o=e.length,s=n.length,a=-1,c=t.length,u=Hl(o-s,0),l=rl(c+u),f=!r;++a<c;)l[a]=t[a];for(;++i<s;)(f||i<o)&&(l[n[i]]=e[i]);for(;u--;)l[a++]=e[i++];return l}function Ni(e,t,n,r){for(var i=-1,o=e.length,s=-1,a=n.length,c=-1,u=t.length,l=Hl(o-a,0),f=rl(l+u),p=!r;++i<l;)f[i]=e[i];for(var h=i;++c<u;)f[h+c]=t[c];for(;++s<a;)(p||i<o)&&(f[h+n[s]]=e[i++]);return f}function Bi(e,t){var n=-1,r=e.length;for(t||(t=rl(r));++n<r;)t[n]=e[n];return t}function Fi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=r?r(n[a],e[a],a,n,e):ie;c===ie&&(c=e[a]),i?tr(n,a,c):Yn(n,a,c)}return n}function Ui(e,t){return Fi(e,kf(e),t)}function zi(e,t){return Fi(e,Tf(e),t)}function qi(e,t){return function(n,r){var i=yp(n)?c:Kn,o=t?t():{};return i(n,e,Co(r,2),o)}}function Ji(e){return ri(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:ie,s=i>2?n[2]:ie;for(o=e.length>3&&"function"==typeof o?(i--,o):ie,s&&No(n[0],n[1],s)&&(o=i<3?ie:o,i=1),t=cl(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}function Vi(e,t){return function(n,r){if(null==n)return n;if(!Wa(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=cl(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Gi(e){return function(t,n,r){for(var i=-1,o=cl(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}function Hi(e,t,n){function r(){return(this&&this!==In&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=t&me,o=$i(e);return r}function Wi(e){return function(t){t=jc(t);var n=J(t)?ee(t):ie,r=n?n[0]:t.charAt(0),i=n?Ei(n,1).join(""):t.slice(1);return r[e]()+i}}function Xi(e){return function(t){return v(ku(su(t).replace(gn,"")),e,"")}}function $i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=gf(e.prototype),r=e.apply(n,t);return oc(r)?r:n}}function Yi(e,t,n){function r(){for(var o=arguments.length,s=rl(o),c=o,u=So(r);c--;)s[c]=arguments[c];var l=o<3&&s[0]!==u&&s[o-1]!==u?[]:X(s,u);return(o-=l.length)<n?ao(e,t,Zi,r.placeholder,ie,s,l,ie,ie,n-o):a(this&&this!==In&&this instanceof r?i:e,this,s)}var i=$i(e);return r}function Qi(e){return function(t,n,r){var i=cl(t);if(!Wa(t)){var o=Co(n,3);t=zc(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:ie}}function Ki(e){return yo(function(t){var n=t.length,r=n,i=_.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new fl(ae);if(i&&!s&&"wrapper"==wo(o))var s=new _([],!0)}for(r=s?r:n;++r<n;){o=t[r];var a=wo(o),c="wrapper"==a?Ef(o):ie;s=c&&Uo(c[0])&&c[1]==(Ce|be|we|xe)&&!c[4].length&&1==c[9]?s[wo(c[0])].apply(s,c[3]):1==o.length&&Uo(o)?s[a]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&yp(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Zi(e,t,n,r,i,o,s,a,c,u){function l(){for(var v=arguments.length,y=rl(v),b=v;b--;)y[b]=arguments[b];if(d)var _=So(l),w=U(y,_);if(r&&(y=Li(y,r,i,d)),o&&(y=Ni(y,o,s,d)),v-=w,d&&v<u){var S=X(y,_);return ao(e,t,Zi,l.placeholder,n,y,S,a,c,u-v)}var C=p?n:this,x=h?C[e]:e;return v=y.length,a?y=Yo(y,a):g&&v>1&&y.reverse(),f&&c<v&&(y.length=c),this&&this!==In&&this instanceof l&&(x=m||$i(x)),x.apply(C,y)}var f=t&Ce,p=t&me,h=t&ve,d=t&(be|_e),g=t&Ee,m=h?ie:$i(e);return l}function eo(e,t){return function(n,r){return Er(n,e,t(r),{})}}function to(e,t){return function(n,r){var i;if(n===ie&&r===ie)return t;if(n!==ie&&(i=n),r!==ie){if(i===ie)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=hi(n),r=hi(r)),i=e(n,r)}return i}}function no(e){return yo(function(t){return t=g(t,M(Co())),ri(function(n){var r=this;return e(t,function(e){return a(e,r,n)})})})}function ro(e,t){t=t===ie?" ":di(t);var n=t.length;if(n<2)return n?ni(t,e):t;var r=ni(t,Fl(e/Z(t)));return J(t)?Ei(ee(r),0,e).join(""):r.slice(0,e)}function io(e,t,n,r){function i(){for(var t=-1,c=arguments.length,u=-1,l=r.length,f=rl(l+c),p=this&&this!==In&&this instanceof i?s:e;++u<l;)f[u]=r[u];for(;c--;)f[u++]=arguments[++t];return a(p,o?n:this,f)}var o=t&me,s=$i(e);return i}function oo(e){return function(t,n,r){return r&&"number"!=typeof r&&No(t,n,r)&&(n=r=ie),t=Sc(t),n===ie?(n=t,t=0):n=Sc(n),r=r===ie?t<n?1:-1:Sc(r),ti(t,n,r,e)}}function so(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ec(t),n=Ec(n)),e(t,n)}}function ao(e,t,n,r,i,o,s,a,c,u){var l=t&be,f=l?s:ie,p=l?ie:s,h=l?o:ie,d=l?ie:o;t|=l?we:Se,(t&=~(l?Se:we))&ye||(t&=~(me|ve));var g=[e,t,i,h,f,d,p,a,c,u],m=n.apply(ie,g);return Uo(e)&&Of(m,g),m.placeholder=r,Qo(m,e,t)}function co(e){var t=al[e];return function(e,n){if(e=Ec(e),n=null==n?0:Wl(Cc(n),292)){var r=(jc(e)+"e").split("e");return r=(jc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function uo(e){return function(t){var n=jf(t);return n==$e?H(t):n==tt?Y(t):D(t,e(t))}}function lo(e,t,n,r,i,o,s,a){var c=t&ve;if(!c&&"function"!=typeof e)throw new fl(ae);var u=r?r.length:0;if(u||(t&=~(we|Se),r=i=ie),s=s===ie?s:Hl(Cc(s),0),a=a===ie?a:Cc(a),u-=i?i.length:0,t&Se){var l=r,f=i;r=i=ie}var p=c?ie:Ef(e),h=[e,t,n,r,i,l,f,o,s,a];if(p&&Go(h,p),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],a=h[9]=h[9]===ie?c?0:e.length:Hl(h[9]-u,0),!a&&t&(be|_e)&&(t&=~(be|_e)),t&&t!=me)d=t==be||t==_e?Yi(e,t,a):t!=we&&t!=(me|we)||i.length?Zi.apply(ie,h):io(e,t,n,r);else var d=Hi(e,t,n);return Qo((p?_f:Of)(d,h),e,t)}function fo(e,t,n,r){return e===ie||Ha(e,dl[n])&&!vl.call(r,n)?t:e}function po(e,t,n,r,i,o){return oc(e)&&oc(t)&&(o.set(t,e),Gr(e,t,ie,po,o),o.delete(t)),e}function ho(e){return dc(e)?ie:e}function go(e,t,n,r,i,o){var s=n&de,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var l=-1,f=!0,p=n&ge?new yn:ie;for(o.set(e,t),o.set(t,e);++l<a;){var h=e[l],d=t[l];if(r)var g=s?r(d,h,l,t,e,o):r(h,d,l,e,t,o);if(g!==ie){if(g)continue;f=!1;break}if(p){if(!b(t,function(e,t){if(!N(p,t)&&(h===e||i(h,e,n,r,o)))return p.push(t)})){f=!1;break}}else if(h!==d&&!i(h,d,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function mo(e,t,n,r,i,o,s){switch(n){case ct:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!o(new kl(e),new kl(t)));case Je:case Ve:case Ye:return Ha(+e,+t);case He:return e.name==t.name&&e.message==t.message;case et:case nt:return e==t+"";case $e:var a=H;case tt:var c=r&de;if(a||(a=$),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=ge,s.set(e,t);var l=go(a(e),a(t),r,i,o,s);return s.delete(e),l;case rt:if(hf)return hf.call(e)==hf.call(t)}return!1}function vo(e,t,n,r,i,o){var s=n&de,a=bo(e),c=a.length;if(c!=bo(t).length&&!s)return!1;for(var u=c;u--;){var l=a[u];if(!(s?l in t:vl.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=s;++u<c;){l=a[u];var d=e[l],g=t[l];if(r)var m=s?r(g,d,l,t,e,o):r(d,g,l,e,t,o);if(!(m===ie?d===g||i(d,g,n,r,o):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var v=e.constructor,y=t.constructor;v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(e),o.delete(t),p}function yo(e){return Pf(Xo(e,ie,ds),e+"")}function bo(e){return yr(e,zc,kf)}function _o(e){return yr(e,qc,Tf)}function wo(e){for(var t=e.name+"",n=sf[t],r=vl.call(sf,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function So(e){return(vl.call(n,"placeholder")?n:e).placeholder}function Co(){var e=n.iteratee||Pu;return e=e===Pu?Br:e,arguments.length?e(arguments[0],arguments[1]):e}function xo(e,t){var n=e.__data__;return Fo(t)?n["string"==typeof t?"string":"hash"]:n.map}function Eo(e){for(var t=zc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Jo(i)]}return t}function ko(e,t){var n=q(e,t);return Dr(n)?n:ie}function To(e){var t=vl.call(e,Dl),n=e[Dl];try{e[Dl]=ie;var r=!0}catch(e){}var i=_l.call(e);return r&&(t?e[Dl]=n:delete e[Dl]),i}function jo(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Wl(t,e+s);break;case"takeRight":e=Hl(e,t-s)}}return{start:e,end:t}}function Ro(e){var t=e.match(Bt);return t?t[1].split(Ft):[]}function Oo(e,t,n){t=xi(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var s=es(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ic(i)&&Lo(s,i)&&(yp(e)||vp(e))}function Ao(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&vl.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Po(e){return"function"!=typeof e.constructor||qo(e)?{}:gf(jl(e))}function Io(e,t,n,r){var i=e.constructor;switch(t){case at:return Ti(e);case Je:case Ve:return new i(+e);case ct:return ji(e,r);case ut:case lt:case ft:case pt:case ht:case dt:case gt:case mt:case vt:return Ii(e,r);case $e:return Ri(e,r,n);case Ye:case nt:return new i(e);case et:return Oi(e);case tt:return Ai(e,r,n);case rt:return Pi(e)}}function Do(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Nt,"{\n/* [wrapped with "+t+"] */\n")}function Mo(e){return yp(e)||vp(e)||!!(Pl&&e&&e[Pl])}function Lo(e,t){return!!(t=null==t?Ie:t)&&("number"==typeof e||Xt.test(e))&&e>-1&&e%1==0&&e<t}function No(e,t,n){if(!oc(n))return!1;var r=void 0===t?"undefined":i(t);return!!("number"==r?Wa(n)&&Lo(t,n.length):"string"==r&&t in n)&&Ha(n[t],e)}function Bo(e,t){if(yp(e))return!1;var n=void 0===e?"undefined":i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!vc(e))||(Rt.test(e)||!jt.test(e)||null!=t&&e in cl(t))}function Fo(e){var t=void 0===e?"undefined":i(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Uo(e){var t=wo(e),r=n[t];if("function"!=typeof r||!(t in R.prototype))return!1;if(e===r)return!0;var i=Ef(r);return!!i&&e===i[0]}function zo(e){return!!bl&&bl in e}function qo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||dl)}function Jo(e){return e===e&&!oc(e)}function Vo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==ie||e in cl(n)))}}function Go(e,t){var n=e[1],r=t[1],i=n|r,o=i<(me|ve|Ce),s=r==Ce&&n==be||r==Ce&&n==xe&&e[7].length<=t[8]||r==(Ce|xe)&&t[7].length<=t[8]&&n==be;if(!o&&!s)return e;r&me&&(e[2]=t[2],i|=n&me?0:ye);var a=t[3];if(a){var c=e[3];e[3]=c?Li(c,a,t[4]):a,e[4]=c?X(e[3],le):t[4]}return a=t[5],a&&(c=e[5],e[5]=c?Ni(c,a,t[6]):a,e[6]=c?X(e[5],le):t[6]),a=t[7],a&&(e[7]=a),r&Ce&&(e[8]=null==e[8]?t[8]:Wl(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Ho(e){var t=[];if(null!=e)for(var n in cl(e))t.push(n);return t}function Wo(e){return _l.call(e)}function Xo(e,t,n){return t=Hl(t===ie?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Hl(r.length-t,0),s=rl(o);++i<o;)s[i]=r[t+i];i=-1;for(var c=rl(t+1);++i<t;)c[i]=r[i];return c[t]=n(s),a(e,this,c)}}function $o(e,t){return t.length<2?e:vr(e,ci(t,0,-1))}function Yo(e,t){for(var n=e.length,r=Wl(t.length,n),i=Bi(e);r--;){var o=t[r];e[r]=Lo(o,n)?i[o]:ie}return e}function Qo(e,t,n){var r=t+"";return Pf(e,Do(r,ns(Ro(r),n)))}function Ko(e){var t=0,n=0;return function(){var r=Xl(),i=Re-(r-n);if(n=r,i>0){if(++t>=je)return arguments[0]}else t=0;return e.apply(ie,arguments)}}function Zo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===ie?r:t;++n<t;){var o=ei(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}function es(e){if("string"==typeof e||vc(e))return e;var t=e+"";return"0"==t&&1/e==-Pe?"-0":t}function ts(e){if(null!=e){try{return ml.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ns(e,t){return u(Fe,function(n){var r="_."+n[0];t&n[1]&&!h(e,r)&&e.push(r)}),e.sort()}function rs(e){if(e instanceof R)return e.clone();var t=new _(e.__wrapped__,e.__chain__);return t.__actions__=Bi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function is(e,t,n){t=(n?No(e,t,n):t===ie)?1:Hl(Cc(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,s=rl(Fl(r/t));i<r;)s[o++]=ci(e,i,i+=t);return s}function os(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function ss(){var e=arguments.length;if(!e)return[];for(var t=rl(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return m(yp(n)?Bi(n):[n],hr(t,1))}function as(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:Cc(t),ci(e,t<0?0:t,r)):[]}function cs(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:Cc(t),t=r-t,ci(e,0,t<0?0:t)):[]}function us(e,t){return e&&e.length?yi(e,Co(t,3),!0,!0):[]}function ls(e,t){return e&&e.length?yi(e,Co(t,3),!0):[]}function fs(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&No(e,t,n)&&(n=0,r=i),fr(e,t,n,r)):[]}function ps(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Cc(n);return i<0&&(i=Hl(r+i,0)),C(e,Co(t,3),i)}function hs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==ie&&(i=Cc(n),i=n<0?Hl(r+i,0):Wl(i,r-1)),C(e,Co(t,3),i,!0)}function ds(e){return(null==e?0:e.length)?hr(e,1):[]}function gs(e){return(null==e?0:e.length)?hr(e,Pe):[]}function ms(e,t){return(null==e?0:e.length)?(t=t===ie?1:Cc(t),hr(e,t)):[]}function vs(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function ys(e){return e&&e.length?e[0]:ie}function bs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Cc(n);return i<0&&(i=Hl(r+i,0)),x(e,t,i)}function _s(e){return(null==e?0:e.length)?ci(e,0,-1):[]}function ws(e,t){return null==e?"":Vl.call(e,t)}function Ss(e){var t=null==e?0:e.length;return t?e[t-1]:ie}function Cs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==ie&&(i=Cc(n),i=i<0?Hl(r+i,0):Wl(i,r-1)),t===t?K(e,t,i):C(e,k,i,!0)}function xs(e,t){return e&&e.length?Wr(e,Cc(t)):ie}function Es(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}function ks(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,Co(n,2)):e}function Ts(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,ie,n):e}function js(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Co(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Zr(e,i),n}function Rs(e){return null==e?e:Ql.call(e)}function Os(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&No(e,t,n)?(t=0,n=r):(t=null==t?0:Cc(t),n=n===ie?r:Cc(n)),ci(e,t,n)):[]}function As(e,t){return li(e,t)}function Ps(e,t,n){return fi(e,t,Co(n,2))}function Is(e,t){var n=null==e?0:e.length;if(n){var r=li(e,t);if(r<n&&Ha(e[r],t))return r}return-1}function Ds(e,t){return li(e,t,!0)}function Ms(e,t,n){return fi(e,t,Co(n,2),!0)}function Ls(e,t){if(null==e?0:e.length){var n=li(e,t,!0)-1;if(Ha(e[n],t))return n}return-1}function Ns(e){return e&&e.length?pi(e):[]}function Bs(e,t){return e&&e.length?pi(e,Co(t,2)):[]}function Fs(e){var t=null==e?0:e.length;return t?ci(e,1,t):[]}function Us(e,t,n){return e&&e.length?(t=n||t===ie?1:Cc(t),ci(e,0,t<0?0:t)):[]}function zs(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:Cc(t),t=r-t,ci(e,t<0?0:t,r)):[]}function qs(e,t){return e&&e.length?yi(e,Co(t,3),!1,!0):[]}function Js(e,t){return e&&e.length?yi(e,Co(t,3)):[]}function Vs(e){return e&&e.length?gi(e):[]}function Gs(e,t){return e&&e.length?gi(e,Co(t,2)):[]}function Hs(e,t){return t="function"==typeof t?t:ie,e&&e.length?gi(e,ie,t):[]}function Ws(e){if(!e||!e.length)return[];var t=0;return e=p(e,function(e){if(Xa(e))return t=Hl(e.length,t),!0}),I(t,function(t){return g(e,j(t))})}function Xs(e,t){if(!e||!e.length)return[];var n=Ws(e);return null==t?n:g(n,function(e){return a(t,ie,e)})}function $s(e,t){return wi(e||[],t||[],Yn)}function Ys(e,t){return wi(e||[],t||[],si)}function Qs(e){var t=n(e);return t.__chain__=!0,t}function Ks(e,t){return t(e),e}function Zs(e,t){return t(e)}function ea(){return Qs(this)}function ta(){return new _(this.value(),this.__chain__)}function na(){this.__values__===ie&&(this.__values__=wc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ie:this.__values__[this.__index__++]}}function ra(){return this}function ia(e){for(var t,n=this;n instanceof r;){var i=rs(n);i.__index__=0,i.__values__=ie,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function oa(){var e=this.__wrapped__;if(e instanceof R){var t=e;return this.__actions__.length&&(t=new R(this)),t=t.reverse(),t.__actions__.push({func:Zs,args:[Rs],thisArg:ie}),new _(t,this.__chain__)}return this.thru(Rs)}function sa(){return bi(this.__wrapped__,this.__actions__)}function aa(e,t,n){var r=yp(e)?f:ur;return n&&No(e,t,n)&&(t=ie),r(e,Co(t,3))}function ca(e,t){return(yp(e)?p:pr)(e,Co(t,3))}function ua(e,t){return hr(ga(e,t),1)}function la(e,t){return hr(ga(e,t),Pe)}function fa(e,t,n){return n=n===ie?1:Cc(n),hr(ga(e,t),n)}function pa(e,t){return(yp(e)?u:mf)(e,Co(t,3))}function ha(e,t){return(yp(e)?l:vf)(e,Co(t,3))}function da(e,t,n,r){e=Wa(e)?e:eu(e),n=n&&!r?Cc(n):0;var i=e.length;return n<0&&(n=Hl(i+n,0)),mc(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&x(e,t,n)>-1}function ga(e,t){return(yp(e)?g:qr)(e,Co(t,3))}function ma(e,t,n,r){return null==e?[]:(yp(t)||(t=null==t?[]:[t]),n=r?ie:n,yp(n)||(n=null==n?[]:[n]),Xr(e,t,n))}function va(e,t,n){var r=yp(e)?v:O,i=arguments.length<3;return r(e,Co(t,4),n,i,mf)}function ya(e,t,n){var r=yp(e)?y:O,i=arguments.length<3;return r(e,Co(t,4),n,i,vf)}function ba(e,t){return(yp(e)?p:pr)(e,Ia(Co(t,3)))}function _a(e){return(yp(e)?Mn:ii)(e)}function wa(e,t,n){return t=(n?No(e,t,n):t===ie)?1:Cc(t),(yp(e)?Nn:oi)(e,t)}function Sa(e){return(yp(e)?Bn:ai)(e)}function Ca(e){if(null==e)return 0;if(Wa(e))return mc(e)?Z(e):e.length;var t=jf(e);return t==$e||t==tt?e.size:Fr(e).length}function xa(e,t,n){var r=yp(e)?b:ui;return n&&No(e,t,n)&&(t=ie),r(e,Co(t,3))}function Ea(e,t){if("function"!=typeof t)throw new fl(ae);return e=Cc(e),function(){if(--e<1)return t.apply(this,arguments)}}function ka(e,t,n){return t=n?ie:t,
t=e&&null==t?e.length:t,lo(e,Ce,ie,ie,ie,ie,t)}function Ta(e,t){var n;if("function"!=typeof t)throw new fl(ae);return e=Cc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ie),n}}function ja(e,t,n){t=n?ie:t;var r=lo(e,be,ie,ie,ie,ie,ie,t);return r.placeholder=ja.placeholder,r}function Ra(e,t,n){t=n?ie:t;var r=lo(e,_e,ie,ie,ie,ie,ie,t);return r.placeholder=Ra.placeholder,r}function Oa(e,t,n){function r(t){var n=p,r=h;return p=h=ie,y=t,g=e.apply(r,n)}function i(e){return y=e,m=Af(a,t),b?r(e):g}function o(e){var n=e-v,r=e-y,i=t-n;return _?Wl(i,d-r):i}function s(e){var n=e-v,r=e-y;return v===ie||n>=t||n<0||_&&r>=d}function a(){var e=sp();if(s(e))return c(e);m=Af(a,o(e))}function c(e){return m=ie,w&&p?r(e):(p=h=ie,g)}function u(){m!==ie&&Cf(m),y=0,p=v=h=m=ie}function l(){return m===ie?g:c(sp())}function f(){var e=sp(),n=s(e);if(p=arguments,h=this,v=e,n){if(m===ie)return i(v);if(_)return m=Af(a,t),r(v)}return m===ie&&(m=Af(a,t)),g}var p,h,d,g,m,v,y=0,b=!1,_=!1,w=!0;if("function"!=typeof e)throw new fl(ae);return t=Ec(t)||0,oc(n)&&(b=!!n.leading,_="maxWait"in n,d=_?Hl(Ec(n.maxWait)||0,t):d,w="trailing"in n?!!n.trailing:w),f.cancel=u,f.flush=l,f}function Aa(e){return lo(e,Ee)}function Pa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new fl(ae);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Pa.Cache||ln),n}function Ia(e){if("function"!=typeof e)throw new fl(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Da(e){return Ta(2,e)}function Ma(e,t){if("function"!=typeof e)throw new fl(ae);return t=t===ie?t:Cc(t),ri(e,t)}function La(e,t){if("function"!=typeof e)throw new fl(ae);return t=null==t?0:Hl(Cc(t),0),ri(function(n){var r=n[t],i=Ei(n,0,t);return r&&m(i,r),a(e,this,i)})}function Na(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new fl(ae);return oc(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oa(e,t,{leading:r,maxWait:t,trailing:i})}function Ba(e){return ka(e,1)}function Fa(e,t){return pp(Ci(t),e)}function Ua(){if(!arguments.length)return[];var e=arguments[0];return yp(e)?e:[e]}function za(e){return ir(e,he)}function qa(e,t){return t="function"==typeof t?t:ie,ir(e,he,t)}function Ja(e){return ir(e,fe|he)}function Va(e,t){return t="function"==typeof t?t:ie,ir(e,fe|he,t)}function Ga(e,t){return null==t||sr(e,t,zc(t))}function Ha(e,t){return e===t||e!==e&&t!==t}function Wa(e){return null!=e&&ic(e.length)&&!nc(e)}function Xa(e){return sc(e)&&Wa(e)}function $a(e){return!0===e||!1===e||sc(e)&&br(e)==Je}function Ya(e){return sc(e)&&1===e.nodeType&&!dc(e)}function Qa(e){if(null==e)return!0;if(Wa(e)&&(yp(e)||"string"==typeof e||"function"==typeof e.splice||_p(e)||Ep(e)||vp(e)))return!e.length;var t=jf(e);if(t==$e||t==tt)return!e.size;if(qo(e))return!Fr(e).length;for(var n in e)if(vl.call(e,n))return!1;return!0}function Ka(e,t){return Or(e,t)}function Za(e,t,n){n="function"==typeof n?n:ie;var r=n?n(e,t):ie;return r===ie?Or(e,t,ie,n):!!r}function ec(e){if(!sc(e))return!1;var t=br(e);return t==He||t==Ge||"string"==typeof e.message&&"string"==typeof e.name&&!dc(e)}function tc(e){return"number"==typeof e&&Jl(e)}function nc(e){if(!oc(e))return!1;var t=br(e);return t==We||t==Xe||t==qe||t==Ze}function rc(e){return"number"==typeof e&&e==Cc(e)}function ic(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ie}function oc(e){var t=void 0===e?"undefined":i(e);return null!=e&&("object"==t||"function"==t)}function sc(e){return null!=e&&"object"==(void 0===e?"undefined":i(e))}function ac(e,t){return e===t||Ir(e,t,Eo(t))}function cc(e,t,n){return n="function"==typeof n?n:ie,Ir(e,t,Eo(t),n)}function uc(e){return hc(e)&&e!=+e}function lc(e){if(Rf(e))throw new ol(se);return Dr(e)}function fc(e){return null===e}function pc(e){return null==e}function hc(e){return"number"==typeof e||sc(e)&&br(e)==Ye}function dc(e){if(!sc(e)||br(e)!=Ke)return!1;var t=jl(e);if(null===t)return!0;var n=vl.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ml.call(n)==wl}function gc(e){return rc(e)&&e>=-Ie&&e<=Ie}function mc(e){return"string"==typeof e||!yp(e)&&sc(e)&&br(e)==nt}function vc(e){return"symbol"==(void 0===e?"undefined":i(e))||sc(e)&&br(e)==rt}function yc(e){return e===ie}function bc(e){return sc(e)&&jf(e)==ot}function _c(e){return sc(e)&&br(e)==st}function wc(e){if(!e)return[];if(Wa(e))return mc(e)?ee(e):Bi(e);if(Il&&e[Il])return G(e[Il]());var t=jf(e);return(t==$e?H:t==tt?$:eu)(e)}function Sc(e){if(!e)return 0===e?e:0;if((e=Ec(e))===Pe||e===-Pe){return(e<0?-1:1)*De}return e===e?e:0}function Cc(e){var t=Sc(e),n=t%1;return t===t?n?t-n:t:0}function xc(e){return e?rr(Cc(e),0,Le):0}function Ec(e){if("number"==typeof e)return e;if(vc(e))return Me;if(oc(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=oc(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Dt,"");var n=Gt.test(e);return n||Wt.test(e)?On(e.slice(2),n?2:8):Vt.test(e)?Me:+e}function kc(e){return Fi(e,qc(e))}function Tc(e){return e?rr(Cc(e),-Ie,Ie):0===e?e:0}function jc(e){return null==e?"":di(e)}function Rc(e,t){var n=gf(e);return null==t?n:Zn(n,t)}function Oc(e,t){return S(e,Co(t,3),dr)}function Ac(e,t){return S(e,Co(t,3),gr)}function Pc(e,t){return null==e?e:yf(e,Co(t,3),qc)}function Ic(e,t){return null==e?e:bf(e,Co(t,3),qc)}function Dc(e,t){return e&&dr(e,Co(t,3))}function Mc(e,t){return e&&gr(e,Co(t,3))}function Lc(e){return null==e?[]:mr(e,zc(e))}function Nc(e){return null==e?[]:mr(e,qc(e))}function Bc(e,t,n){var r=null==e?ie:vr(e,t);return r===ie?n:r}function Fc(e,t){return null!=e&&Oo(e,t,wr)}function Uc(e,t){return null!=e&&Oo(e,t,Sr)}function zc(e){return Wa(e)?Dn(e):Fr(e)}function qc(e){return Wa(e)?Dn(e,!0):Ur(e)}function Jc(e,t){var n={};return t=Co(t,3),dr(e,function(e,r,i){tr(n,t(e,r,i),e)}),n}function Vc(e,t){var n={};return t=Co(t,3),dr(e,function(e,r,i){tr(n,r,t(e,r,i))}),n}function Gc(e,t){return Hc(e,Ia(Co(t)))}function Hc(e,t){if(null==e)return{};var n=g(_o(e),function(e){return[e]});return t=Co(t),Yr(e,n,function(e,n){return t(e,n[0])})}function Wc(e,t,n){t=xi(t,e);var r=-1,i=t.length;for(i||(i=1,e=ie);++r<i;){var o=null==e?ie:e[es(t[r])];o===ie&&(r=i,o=n),e=nc(o)?o.call(e):o}return e}function Xc(e,t,n){return null==e?e:si(e,t,n)}function $c(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:si(e,t,n,r)}function Yc(e,t,n){var r=yp(e),i=r||_p(e)||Ep(e);if(t=Co(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:oc(e)&&nc(o)?gf(jl(e)):{}}return(i?u:dr)(e,function(e,r,i){return t(n,e,r,i)}),n}function Qc(e,t){return null==e||mi(e,t)}function Kc(e,t,n){return null==e?e:vi(e,t,Ci(n))}function Zc(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:vi(e,t,Ci(n),r)}function eu(e){return null==e?[]:L(e,zc(e))}function tu(e){return null==e?[]:L(e,qc(e))}function nu(e,t,n){return n===ie&&(n=t,t=ie),n!==ie&&(n=Ec(n),n=n===n?n:0),t!==ie&&(t=Ec(t),t=t===t?t:0),rr(Ec(e),t,n)}function ru(e,t,n){return t=Sc(t),n===ie?(n=t,t=0):n=Sc(n),e=Ec(e),Cr(e,t,n)}function iu(e,t,n){if(n&&"boolean"!=typeof n&&No(e,t,n)&&(t=n=ie),n===ie&&("boolean"==typeof t?(n=t,t=ie):"boolean"==typeof e&&(n=e,e=ie)),e===ie&&t===ie?(e=0,t=1):(e=Sc(e),t===ie?(t=e,e=0):t=Sc(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Yl();return Wl(e+i*(t-e+Rn("1e-"+((i+"").length-1))),t)}return ei(e,t)}function ou(e){return Qp(jc(e).toLowerCase())}function su(e){return(e=jc(e))&&e.replace($t,Hn).replace(mn,"")}function au(e,t,n){e=jc(e),t=di(t);var r=e.length;n=n===ie?r:rr(Cc(n),0,r);var i=n;return(n-=t.length)>=0&&e.slice(n,i)==t}function cu(e){return e=jc(e),e&&xt.test(e)?e.replace(St,Wn):e}function uu(e){return e=jc(e),e&&It.test(e)?e.replace(Pt,"\\$&"):e}function lu(e,t,n){e=jc(e),t=Cc(t);var r=t?Z(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ro(Ul(i),n)+e+ro(Fl(i),n)}function fu(e,t,n){e=jc(e),t=Cc(t);var r=t?Z(e):0;return t&&r<t?e+ro(t-r,n):e}function pu(e,t,n){e=jc(e),t=Cc(t);var r=t?Z(e):0;return t&&r<t?ro(t-r,n)+e:e}function hu(e,t,n){return n||null==t?t=0:t&&(t=+t),$l(jc(e).replace(Mt,""),t||0)}function du(e,t,n){return t=(n?No(e,t,n):t===ie)?1:Cc(t),ni(jc(e),t)}function gu(){var e=arguments,t=jc(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function mu(e,t,n){return n&&"number"!=typeof n&&No(e,t,n)&&(t=n=ie),(n=n===ie?Le:n>>>0)?(e=jc(e),e&&("string"==typeof t||null!=t&&!Cp(t))&&!(t=di(t))&&J(e)?Ei(ee(e),0,n):e.split(t,n)):[]}function vu(e,t,n){return e=jc(e),n=null==n?0:rr(Cc(n),0,e.length),t=di(t),e.slice(n,n+t.length)==t}function yu(e,t,r){var i=n.templateSettings;r&&No(e,t,r)&&(t=ie),e=jc(e),t=Op({},t,i,fo);var o,s,a=Op({},t.imports,i.imports,fo),c=zc(a),u=L(a,c),l=0,f=t.interpolate||Yt,p="__p += '",h=ul((t.escape||Yt).source+"|"+f.source+"|"+(f===Tt?qt:Yt).source+"|"+(t.evaluate||Yt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Sn+"]")+"\n";e.replace(h,function(t,n,r,i,a,c){return r||(r=i),p+=e.slice(l,c).replace(Qt,z),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),p+="';\n";var g=t.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(yt,""):p).replace(bt,"$1").replace(_t,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Kp(function(){return sl(c,d+"return "+p).apply(ie,u)});if(m.source=p,ec(m))throw m;return m}function bu(e){return jc(e).toLowerCase()}function _u(e){return jc(e).toUpperCase()}function wu(e,t,n){if((e=jc(e))&&(n||t===ie))return e.replace(Dt,"");if(!e||!(t=di(t)))return e;var r=ee(e),i=ee(t);return Ei(r,B(r,i),F(r,i)+1).join("")}function Su(e,t,n){if((e=jc(e))&&(n||t===ie))return e.replace(Lt,"");if(!e||!(t=di(t)))return e;var r=ee(e);return Ei(r,0,F(r,ee(t))+1).join("")}function Cu(e,t,n){if((e=jc(e))&&(n||t===ie))return e.replace(Mt,"");if(!e||!(t=di(t)))return e;var r=ee(e);return Ei(r,B(r,ee(t))).join("")}function xu(e,t){var n=ke,r=Te;if(oc(t)){var i="separator"in t?t.separator:i;n="length"in t?Cc(t.length):n,r="omission"in t?di(t.omission):r}e=jc(e);var o=e.length;if(J(e)){var s=ee(e);o=s.length}if(n>=o)return e;var a=n-Z(r);if(a<1)return r;var c=s?Ei(s,0,a).join(""):e.slice(0,a);if(i===ie)return c+r;if(s&&(a+=c.length-a),Cp(i)){if(e.slice(a).search(i)){var u,l=c;for(i.global||(i=ul(i.source,jc(Jt.exec(i))+"g")),i.lastIndex=0;u=i.exec(l);)var f=u.index;c=c.slice(0,f===ie?a:f)}}else if(e.indexOf(di(i),a)!=a){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r}function Eu(e){return e=jc(e),e&&Ct.test(e)?e.replace(wt,Xn):e}function ku(e,t,n){return e=jc(e),t=n?ie:t,t===ie?V(e)?re(e):w(e):e.match(t)||[]}function Tu(e){var t=null==e?0:e.length,n=Co();return e=t?g(e,function(e){if("function"!=typeof e[1])throw new fl(ae);return[n(e[0]),e[1]]}):[],ri(function(n){for(var r=-1;++r<t;){var i=e[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function ju(e){return or(ir(e,fe))}function Ru(e){return function(){return e}}function Ou(e,t){return null==e||e!==e?t:e}function Au(e){return e}function Pu(e){return Br("function"==typeof e?e:ir(e,fe))}function Iu(e){return Jr(ir(e,fe))}function Du(e,t){return Vr(e,ir(t,fe))}function Mu(e,t,n){var r=zc(t),i=mr(t,r);null!=n||oc(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=mr(t,zc(t)));var o=!(oc(n)&&"chain"in n&&!n.chain),s=nc(e);return u(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Bi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,m([this.value()],arguments))})}),e}function Lu(){return In._===this&&(In._=Sl),this}function Nu(){}function Bu(e){return e=Cc(e),ri(function(t){return Wr(t,e)})}function Fu(e){return Bo(e)?j(es(e)):Qr(e)}function Uu(e){return function(t){return null==e?ie:vr(e,t)}}function zu(){return[]}function qu(){return!1}function Ju(){return{}}function Vu(){return""}function Gu(){return!0}function Hu(e,t){if((e=Cc(e))<1||e>Ie)return[];var n=Le,r=Wl(e,Le);t=Co(t),e-=Le;for(var i=I(r,t);++n<e;)t(n);return i}function Wu(e){return yp(e)?g(e,es):vc(e)?[e]:Bi(If(jc(e)))}function Xu(e){var t=++yl;return jc(e)+t}function $u(e){return e&&e.length?lr(e,Au,_r):ie}function Yu(e,t){return e&&e.length?lr(e,Co(t,2),_r):ie}function Qu(e){return T(e,Au)}function Ku(e,t){return T(e,Co(t,2))}function Zu(e){return e&&e.length?lr(e,Au,zr):ie}function el(e,t){return e&&e.length?lr(e,Co(t,2),zr):ie}function tl(e){return e&&e.length?P(e,Au):0}function nl(e,t){return e&&e.length?P(e,Co(t,2)):0}t=null==t?In:$n.defaults(In.Object(),t,$n.pick(In,wn));var rl=t.Array,il=t.Date,ol=t.Error,sl=t.Function,al=t.Math,cl=t.Object,ul=t.RegExp,ll=t.String,fl=t.TypeError,pl=rl.prototype,hl=sl.prototype,dl=cl.prototype,gl=t["__core-js_shared__"],ml=hl.toString,vl=dl.hasOwnProperty,yl=0,bl=function(){var e=/[^.]+$/.exec(gl&&gl.keys&&gl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_l=dl.toString,wl=ml.call(cl),Sl=In._,Cl=ul("^"+ml.call(vl).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xl=Ln?t.Buffer:ie,El=t.Symbol,kl=t.Uint8Array,Tl=xl?xl.allocUnsafe:ie,jl=W(cl.getPrototypeOf,cl),Rl=cl.create,Ol=dl.propertyIsEnumerable,Al=pl.splice,Pl=El?El.isConcatSpreadable:ie,Il=El?El.iterator:ie,Dl=El?El.toStringTag:ie,Ml=function(){try{var e=ko(cl,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ll=t.clearTimeout!==In.clearTimeout&&t.clearTimeout,Nl=il&&il.now!==In.Date.now&&il.now,Bl=t.setTimeout!==In.setTimeout&&t.setTimeout,Fl=al.ceil,Ul=al.floor,zl=cl.getOwnPropertySymbols,ql=xl?xl.isBuffer:ie,Jl=t.isFinite,Vl=pl.join,Gl=W(cl.keys,cl),Hl=al.max,Wl=al.min,Xl=il.now,$l=t.parseInt,Yl=al.random,Ql=pl.reverse,Kl=ko(t,"DataView"),Zl=ko(t,"Map"),ef=ko(t,"Promise"),tf=ko(t,"Set"),nf=ko(t,"WeakMap"),rf=ko(cl,"create"),of=nf&&new nf,sf={},af=ts(Kl),cf=ts(Zl),uf=ts(ef),lf=ts(tf),ff=ts(nf),pf=El?El.prototype:ie,hf=pf?pf.valueOf:ie,df=pf?pf.toString:ie,gf=function(){function e(){}return function(t){if(!oc(t))return{};if(Rl)return Rl(t);e.prototype=t;var n=new e;return e.prototype=ie,n}}();n.templateSettings={escape:Et,evaluate:kt,interpolate:Tt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,_.prototype=gf(r.prototype),_.prototype.constructor=_,R.prototype=gf(r.prototype),R.prototype.constructor=R,Ut.prototype.clear=Kt,Ut.prototype.delete=Zt,Ut.prototype.get=en,Ut.prototype.has=tn,Ut.prototype.set=nn,rn.prototype.clear=on,rn.prototype.delete=sn,rn.prototype.get=an,rn.prototype.has=cn,rn.prototype.set=un,ln.prototype.clear=fn,ln.prototype.delete=pn,ln.prototype.get=hn,ln.prototype.has=dn,ln.prototype.set=vn,yn.prototype.add=yn.prototype.push=bn,yn.prototype.has=_n,En.prototype.clear=kn,En.prototype.delete=Tn,En.prototype.get=jn,En.prototype.has=An,En.prototype.set=Pn;var mf=Vi(dr),vf=Vi(gr,!0),yf=Gi(),bf=Gi(!0),_f=of?function(e,t){return of.set(e,t),e}:Au,wf=Ml?function(e,t){return Ml(e,"toString",{configurable:!0,enumerable:!1,value:Ru(t),writable:!0})}:Au,Sf=ri,Cf=Ll||function(e){return In.clearTimeout(e)},xf=tf&&1/$(new tf([,-0]))[1]==Pe?function(e){return new tf(e)}:Nu,Ef=of?function(e){return of.get(e)}:Nu,kf=zl?function(e){return null==e?[]:(e=cl(e),p(zl(e),function(t){return Ol.call(e,t)}))}:zu,Tf=zl?function(e){for(var t=[];e;)m(t,kf(e)),e=jl(e);return t}:zu,jf=br;(Kl&&jf(new Kl(new ArrayBuffer(1)))!=ct||Zl&&jf(new Zl)!=$e||ef&&"[object Promise]"!=jf(ef.resolve())||tf&&jf(new tf)!=tt||nf&&jf(new nf)!=ot)&&(jf=function(e){var t=br(e),n=t==Ke?e.constructor:ie,r=n?ts(n):"";if(r)switch(r){case af:return ct;case cf:return $e;case uf:return"[object Promise]";case lf:return tt;case ff:return ot}return t});var Rf=gl?nc:qu,Of=Ko(_f),Af=Bl||function(e,t){return In.setTimeout(e,t)},Pf=Ko(wf),If=function(e){var t=Pa(e,function(e){return n.size===ue&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return Ot.test(e)&&t.push(""),e.replace(At,function(e,n,r,i){t.push(r?i.replace(zt,"$1"):n||e)}),t}),Df=ri(function(e,t){return Xa(e)?cr(e,hr(t,1,Xa,!0)):[]}),Mf=ri(function(e,t){var n=Ss(t);return Xa(n)&&(n=ie),Xa(e)?cr(e,hr(t,1,Xa,!0),Co(n,2)):[]}),Lf=ri(function(e,t){var n=Ss(t);return Xa(n)&&(n=ie),Xa(e)?cr(e,hr(t,1,Xa,!0),ie,n):[]}),Nf=ri(function(e){var t=g(e,Si);return t.length&&t[0]===e[0]?xr(t):[]}),Bf=ri(function(e){var t=Ss(e),n=g(e,Si);return t===Ss(n)?t=ie:n.pop(),n.length&&n[0]===e[0]?xr(n,Co(t,2)):[]}),Ff=ri(function(e){var t=Ss(e),n=g(e,Si);return t="function"==typeof t?t:ie,t&&n.pop(),n.length&&n[0]===e[0]?xr(n,ie,t):[]}),Uf=ri(Es),zf=yo(function(e,t){var n=null==e?0:e.length,r=nr(e,t);return Zr(e,g(t,function(e){return Lo(e,n)?+e:e}).sort(Di)),r}),qf=ri(function(e){return gi(hr(e,1,Xa,!0))}),Jf=ri(function(e){var t=Ss(e);return Xa(t)&&(t=ie),gi(hr(e,1,Xa,!0),Co(t,2))}),Vf=ri(function(e){var t=Ss(e);return t="function"==typeof t?t:ie,gi(hr(e,1,Xa,!0),ie,t)}),Gf=ri(function(e,t){return Xa(e)?cr(e,t):[]}),Hf=ri(function(e){return _i(p(e,Xa))}),Wf=ri(function(e){var t=Ss(e);return Xa(t)&&(t=ie),_i(p(e,Xa),Co(t,2))}),Xf=ri(function(e){var t=Ss(e);return t="function"==typeof t?t:ie,_i(p(e,Xa),ie,t)}),$f=ri(Ws),Yf=ri(function(e){var t=e.length,n=t>1?e[t-1]:ie;return n="function"==typeof n?(e.pop(),n):ie,Xs(e,n)}),Qf=yo(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return nr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof R&&Lo(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Zs,args:[i],thisArg:ie}),new _(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ie),e})):this.thru(i)}),Kf=qi(function(e,t,n){vl.call(e,n)?++e[n]:tr(e,n,1)}),Zf=Qi(ps),ep=Qi(hs),tp=qi(function(e,t,n){vl.call(e,n)?e[n].push(t):tr(e,n,[t])}),np=ri(function(e,t,n){var r=-1,i="function"==typeof t,o=Wa(e)?rl(e.length):[];return mf(e,function(e){o[++r]=i?a(t,e,n):kr(e,t,n)}),o}),rp=qi(function(e,t,n){tr(e,n,t)}),ip=qi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),op=ri(function(e,t){if(null==e)return[];var n=t.length;return n>1&&No(e,t[0],t[1])?t=[]:n>2&&No(t[0],t[1],t[2])&&(t=[t[0]]),Xr(e,hr(t,1),[])}),sp=Nl||function(){return In.Date.now()},ap=ri(function(e,t,n){var r=me;if(n.length){var i=X(n,So(ap));r|=we}return lo(e,r,t,n,i)}),cp=ri(function(e,t,n){var r=me|ve;if(n.length){var i=X(n,So(cp));r|=we}return lo(t,r,e,n,i)}),up=ri(function(e,t){return ar(e,1,t)}),lp=ri(function(e,t,n){return ar(e,Ec(t)||0,n)});Pa.Cache=ln;var fp=Sf(function(e,t){t=1==t.length&&yp(t[0])?g(t[0],M(Co())):g(hr(t,1),M(Co()));var n=t.length;return ri(function(r){for(var i=-1,o=Wl(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return a(e,this,r)})}),pp=ri(function(e,t){var n=X(t,So(pp));return lo(e,we,ie,t,n)}),hp=ri(function(e,t){var n=X(t,So(hp));return lo(e,Se,ie,t,n)}),dp=yo(function(e,t){return lo(e,xe,ie,ie,ie,t)}),gp=so(_r),mp=so(function(e,t){return e>=t}),vp=Tr(function(){return arguments}())?Tr:function(e){return sc(e)&&vl.call(e,"callee")&&!Ol.call(e,"callee")},yp=rl.isArray,bp=Fn?M(Fn):jr,_p=ql||qu,wp=Un?M(Un):Rr,Sp=zn?M(zn):Pr,Cp=qn?M(qn):Mr,xp=Jn?M(Jn):Lr,Ep=Vn?M(Vn):Nr,kp=so(zr),Tp=so(function(e,t){return e<=t}),jp=Ji(function(e,t){if(qo(t)||Wa(t))return void Fi(t,zc(t),e);for(var n in t)vl.call(t,n)&&Yn(e,n,t[n])}),Rp=Ji(function(e,t){Fi(t,qc(t),e)}),Op=Ji(function(e,t,n,r){Fi(t,qc(t),e,r)}),Ap=Ji(function(e,t,n,r){Fi(t,zc(t),e,r)}),Pp=yo(nr),Ip=ri(function(e){return e.push(ie,fo),a(Op,ie,e)}),Dp=ri(function(e){return e.push(ie,po),a(Fp,ie,e)}),Mp=eo(function(e,t,n){e[t]=n},Ru(Au)),Lp=eo(function(e,t,n){vl.call(e,t)?e[t].push(n):e[t]=[n]},Co),Np=ri(kr),Bp=Ji(function(e,t,n){Gr(e,t,n)}),Fp=Ji(function(e,t,n,r){Gr(e,t,n,r)}),Up=yo(function(e,t){var n={};if(null==e)return n;var r=!1;t=g(t,function(t){return t=xi(t,e),r||(r=t.length>1),t}),Fi(e,_o(e),n),r&&(n=ir(n,fe|pe|he,ho));for(var i=t.length;i--;)mi(n,t[i]);return n}),zp=yo(function(e,t){return null==e?{}:$r(e,t)}),qp=uo(zc),Jp=uo(qc),Vp=Xi(function(e,t,n){return t=t.toLowerCase(),e+(n?ou(t):t)}),Gp=Xi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Hp=Xi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wp=Wi("toLowerCase"),Xp=Xi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),$p=Xi(function(e,t,n){return e+(n?" ":"")+Qp(t)}),Yp=Xi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Qp=Wi("toUpperCase"),Kp=ri(function(e,t){try{return a(e,ie,t)}catch(e){return ec(e)?e:new ol(e)}}),Zp=yo(function(e,t){return u(t,function(t){t=es(t),tr(e,t,ap(e[t],e))}),e}),eh=Ki(),th=Ki(!0),nh=ri(function(e,t){return function(n){return kr(n,e,t)}}),rh=ri(function(e,t){return function(n){return kr(e,n,t)}}),ih=no(g),oh=no(f),sh=no(b),ah=oo(),ch=oo(!0),uh=to(function(e,t){return e+t},0),lh=co("ceil"),fh=to(function(e,t){return e/t},1),ph=co("floor"),hh=to(function(e,t){return e*t},1),dh=co("round"),gh=to(function(e,t){return e-t},0);return n.after=Ea,n.ary=ka,n.assign=jp,n.assignIn=Rp,n.assignInWith=Op,n.assignWith=Ap,n.at=Pp,n.before=Ta,n.bind=ap,n.bindAll=Zp,n.bindKey=cp,n.castArray=Ua,n.chain=Qs,n.chunk=is,n.compact=os,n.concat=ss,n.cond=Tu,n.conforms=ju,n.constant=Ru,n.countBy=Kf,n.create=Rc,n.curry=ja,n.curryRight=Ra,n.debounce=Oa,n.defaults=Ip,n.defaultsDeep=Dp,n.defer=up,n.delay=lp,n.difference=Df,n.differenceBy=Mf,n.differenceWith=Lf,n.drop=as,n.dropRight=cs,n.dropRightWhile=us,n.dropWhile=ls,n.fill=fs,n.filter=ca,n.flatMap=ua,n.flatMapDeep=la,n.flatMapDepth=fa,n.flatten=ds,n.flattenDeep=gs,n.flattenDepth=ms,n.flip=Aa,n.flow=eh,n.flowRight=th,n.fromPairs=vs,n.functions=Lc,n.functionsIn=Nc,n.groupBy=tp,n.initial=_s,n.intersection=Nf,n.intersectionBy=Bf,n.intersectionWith=Ff,n.invert=Mp,n.invertBy=Lp,n.invokeMap=np,n.iteratee=Pu,n.keyBy=rp,n.keys=zc,n.keysIn=qc,n.map=ga,n.mapKeys=Jc,n.mapValues=Vc,n.matches=Iu,n.matchesProperty=Du,n.memoize=Pa,n.merge=Bp,n.mergeWith=Fp,n.method=nh,n.methodOf=rh,n.mixin=Mu,n.negate=Ia,n.nthArg=Bu,n.omit=Up,n.omitBy=Gc,n.once=Da,n.orderBy=ma,n.over=ih,n.overArgs=fp,n.overEvery=oh,n.overSome=sh,n.partial=pp,n.partialRight=hp,n.partition=ip,n.pick=zp,n.pickBy=Hc,n.property=Fu,n.propertyOf=Uu,n.pull=Uf,n.pullAll=Es,n.pullAllBy=ks,n.pullAllWith=Ts,n.pullAt=zf,n.range=ah,n.rangeRight=ch,n.rearg=dp,n.reject=ba,n.remove=js,n.rest=Ma,n.reverse=Rs,n.sampleSize=wa,n.set=Xc,n.setWith=$c,n.shuffle=Sa,n.slice=Os,n.sortBy=op,n.sortedUniq=Ns,n.sortedUniqBy=Bs,n.split=mu,n.spread=La,n.tail=Fs,n.take=Us,n.takeRight=zs,n.takeRightWhile=qs,n.takeWhile=Js,n.tap=Ks,n.throttle=Na,n.thru=Zs,n.toArray=wc,n.toPairs=qp,n.toPairsIn=Jp,n.toPath=Wu,n.toPlainObject=kc,n.transform=Yc,n.unary=Ba,n.union=qf,n.unionBy=Jf,n.unionWith=Vf,n.uniq=Vs,n.uniqBy=Gs,n.uniqWith=Hs,n.unset=Qc,n.unzip=Ws,n.unzipWith=Xs,n.update=Kc,n.updateWith=Zc,n.values=eu,n.valuesIn=tu,n.without=Gf,n.words=ku,n.wrap=Fa,n.xor=Hf,n.xorBy=Wf,n.xorWith=Xf,n.zip=$f,n.zipObject=$s,n.zipObjectDeep=Ys,n.zipWith=Yf,n.entries=qp,n.entriesIn=Jp,n.extend=Rp,n.extendWith=Op,Mu(n,n),n.add=uh,n.attempt=Kp,n.camelCase=Vp,n.capitalize=ou,n.ceil=lh,n.clamp=nu,n.clone=za,n.cloneDeep=Ja,n.cloneDeepWith=Va,n.cloneWith=qa,n.conformsTo=Ga,n.deburr=su,n.defaultTo=Ou,n.divide=fh,n.endsWith=au,n.eq=Ha,n.escape=cu,n.escapeRegExp=uu,n.every=aa,n.find=Zf,n.findIndex=ps,n.findKey=Oc,n.findLast=ep,n.findLastIndex=hs,n.findLastKey=Ac,n.floor=ph,n.forEach=pa,n.forEachRight=ha,n.forIn=Pc,n.forInRight=Ic,n.forOwn=Dc,n.forOwnRight=Mc,n.get=Bc,n.gt=gp,n.gte=mp,n.has=Fc,n.hasIn=Uc,n.head=ys,n.identity=Au,n.includes=da,n.indexOf=bs,n.inRange=ru,n.invoke=Np,n.isArguments=vp,n.isArray=yp,n.isArrayBuffer=bp,n.isArrayLike=Wa,n.isArrayLikeObject=Xa,n.isBoolean=$a,n.isBuffer=_p,n.isDate=wp,n.isElement=Ya,n.isEmpty=Qa,n.isEqual=Ka,n.isEqualWith=Za,n.isError=ec,n.isFinite=tc,n.isFunction=nc,n.isInteger=rc,n.isLength=ic,n.isMap=Sp,n.isMatch=ac,n.isMatchWith=cc,n.isNaN=uc,n.isNative=lc,n.isNil=pc,n.isNull=fc,n.isNumber=hc,n.isObject=oc,n.isObjectLike=sc,n.isPlainObject=dc,n.isRegExp=Cp,n.isSafeInteger=gc,n.isSet=xp,n.isString=mc,n.isSymbol=vc,n.isTypedArray=Ep,n.isUndefined=yc,n.isWeakMap=bc,n.isWeakSet=_c,n.join=ws,n.kebabCase=Gp,n.last=Ss,n.lastIndexOf=Cs,n.lowerCase=Hp,n.lowerFirst=Wp,n.lt=kp,n.lte=Tp,n.max=$u,n.maxBy=Yu,n.mean=Qu,n.meanBy=Ku,n.min=Zu,n.minBy=el,n.stubArray=zu,n.stubFalse=qu,n.stubObject=Ju,n.stubString=Vu,n.stubTrue=Gu,n.multiply=hh,n.nth=xs,n.noConflict=Lu,n.noop=Nu,n.now=sp,n.pad=lu,n.padEnd=fu,n.padStart=pu,n.parseInt=hu,n.random=iu,n.reduce=va,n.reduceRight=ya,n.repeat=du,n.replace=gu,n.result=Wc,n.round=dh,n.runInContext=e,n.sample=_a,n.size=Ca,n.snakeCase=Xp,n.some=xa,n.sortedIndex=As,n.sortedIndexBy=Ps,n.sortedIndexOf=Is,n.sortedLastIndex=Ds,n.sortedLastIndexBy=Ms,n.sortedLastIndexOf=Ls,n.startCase=$p,n.startsWith=vu,n.subtract=gh,n.sum=tl,n.sumBy=nl,n.template=yu,n.times=Hu,n.toFinite=Sc,n.toInteger=Cc,n.toLength=xc,n.toLower=bu,n.toNumber=Ec,n.toSafeInteger=Tc,n.toString=jc,n.toUpper=_u,n.trim=wu,n.trimEnd=Su,n.trimStart=Cu,n.truncate=xu,n.unescape=Eu,n.uniqueId=Xu,n.upperCase=Yp,n.upperFirst=Qp,n.each=pa,n.eachRight=ha,n.first=ys,Mu(n,function(){var e={};return dr(n,function(t,r){vl.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.4",u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),u(["drop","take"],function(e,t){R.prototype[e]=function(n){n=n===ie?1:Hl(Cc(n),0);var r=this.__filtered__&&!t?new R(this):this.clone();return r.__filtered__?r.__takeCount__=Wl(n,r.__takeCount__):r.__views__.push({size:Wl(n,Le),type:e+(r.__dir__<0?"Right":"")}),r},R.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),u(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Oe||3==n;R.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Co(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),u(["head","last"],function(e,t){var n="take"+(t?"Right":"");R.prototype[e]=function(){return this[n](1).value()[0]}}),u(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");R.prototype[e]=function(){return this.__filtered__?new R(this):this[n](1)}}),R.prototype.compact=function(){return this.filter(Au)},R.prototype.find=function(e){return this.filter(e).head()},R.prototype.findLast=function(e){return this.reverse().find(e)},R.prototype.invokeMap=ri(function(e,t){return"function"==typeof e?new R(this):this.map(function(n){return kr(n,e,t)})}),R.prototype.reject=function(e){return this.filter(Ia(Co(e)))},R.prototype.slice=function(e,t){e=Cc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new R(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ie&&(t=Cc(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},R.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},R.prototype.toArray=function(){return this.take(Le)},dr(R.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=n[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,c=t instanceof R,u=a[0],l=c||yp(t),f=function(e){var t=o.apply(n,m([e],a));return i&&p?t[0]:t};l&&r&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,h=!!this.__actions__.length,d=s&&!p,g=c&&!h;if(!s&&l){t=g?t:new R(this);var v=e.apply(t,a);return v.__actions__.push({func:Zs,args:[f],thisArg:ie}),new _(v,p)}return d&&g?e.apply(this,a):(v=this.thru(f),d?i?v.value()[0]:v.value():v)})}),u(["pop","push","shift","sort","splice","unshift"],function(e){var t=pl[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(yp(n)?n:[],e)}return this[r](function(n){return t.apply(yp(n)?n:[],e)})}}),dr(R.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(sf[i]||(sf[i]=[])).push({name:t,func:r})}}),sf[Zi(ie,ve).name]=[{name:"wrapper",func:ie}],R.prototype.clone=Q,R.prototype.reverse=te,R.prototype.value=ne,n.prototype.at=Qf,n.prototype.chain=ea,n.prototype.commit=ta,n.prototype.next=na,n.prototype.plant=ia,n.prototype.reverse=oa,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=sa,n.prototype.first=n.prototype.head,Il&&(n.prototype[Il]=ra),n}();"function"==typeof e&&"object"==i(e.amd)&&e.amd?(In._=$n,e(function(){return $n})):Mn?((Mn.exports=$n)._=$n,Dn._=$n):In._=$n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],145:[function(e,t,n){"use strict";var r=e("./lib/parse"),i=e("./lib/Parser"),o=e("./lib/escape"),s=e("./lib/Element"),a=e("./lib/equal"),c=e("./lib/createElement"),u=e("./lib/tag"),l=e("./lib/tagString"),f=e("./lib/is"),p=e("./lib/clone"),h=e("./lib/stringify");n=t.exports=function(){return u.apply(null,arguments)},n.Element=s,n.equal=a.equal,n.nameEqual=a.name,n.attrsEqual=a.attrs,n.childrenEqual=a.children,n.isNode=f.isNode,n.isElement=f.isElement,n.isText=f.isText,n.clone=p,n.createElement=c,n.escapeXML=o.escapeXML,n.unescapeXML=o.unescapeXML,n.escapeXMLText=o.escapeXMLText,n.unescapeXMLText=o.unescapeXMLText,n.Parser=i,n.parse=r,n.tag=u,n.tagString=l,n.stringify=h},{"./lib/Element":147,"./lib/Parser":148,"./lib/clone":149,"./lib/createElement":150,"./lib/equal":151,"./lib/escape":152,"./lib/is":153,"./lib/parse":154,"./lib/stringify":157,"./lib/tag":158,"./lib/tagString":159}],146:[function(e,t,n){"use strict";function r(e,t){o.call(this,e,t),this.nodeType=1,this.nodeName=this.localName}var i=e("inherits"),o=e("./Element");i(r,o),r.prototype._getElement=function(e,t){return new r(e,t)},Object.defineProperty(r.prototype,"localName",{get:function(){return this.getName()}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return this.getNS()}}),Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.getText()},set:function(e){this.children.push(e)}}),r.prototype.getElementsByTagName=function(e){return this.getChildren(e)},r.prototype.getAttribute=function(e){return this.getAttr(e)},r.prototype.setAttribute=function(e,t){this.attr(e,t)},r.prototype.getAttributeNS=function(e,t){return"http://www.w3.org/XML/1998/namespace"===e?this.getAttr(["xml",t].join(":")):this.getAttr(t,e)},r.prototype.setAttributeNS=function(e,t,n){var r;if("http://www.w3.org/XML/1998/namespace"===e)r="xml";else{r=this.getXmlns()[e]||""}r&&this.attr([r,t].join(":"),n)},r.prototype.removeAttribute=function(e){this.attr(e,null)},r.prototype.removeAttributeNS=function(e,t){var n;if("http://www.w3.org/XML/1998/namespace"===e)n="xml";else{n=this.getXmlns()[e]||""}n&&this.attr([n,t].join(":"),null)},r.prototype.appendChild=function(e){this.cnode(e)},r.prototype.removeChild=function(e){this.remove(e)},r.createElement=function(e,t){var n=new r(e,t);return Array.prototype.slice.call(arguments,2).forEach(function(e){n.appendChild(e)}),n},t.exports=r},{"./Element":147,inherits:98}],147:[function(e,t,n){"use strict";function r(e,t){this.name=e,this.parent=null,this.children=[],this.attrs={},this.setAttrs(t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./escape"),s=o.escapeXML,a=o.escapeXMLText,c=e("./equal"),u=c.equal,l=c.name,f=c.attrs,p=c.children,h=e("./clone");r.prototype.is=function(e,t){return this.getName()===e&&(!t||this.getNS()===t)},r.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},r.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var e=this.name.substr(0,this.name.indexOf(":"));return this.findNS(e)}
return this.findNS()},r.prototype.findNS=function(e){if(e){var t="xmlns:"+e;if(this.attrs[t])return this.attrs[t];if(this.parent)return this.parent.findNS(e)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},r.prototype.getXmlns=function(){var e={};this.parent&&(e=this.parent.getXmlns());for(var t in this.attrs){var n=t.match("xmlns:?(.*)");this.attrs.hasOwnProperty(t)&&n&&(e[this.attrs[t]]=n[1])}return e},r.prototype.setAttrs=function(e){"string"==typeof e?this.attrs.xmlns=e:e&&Object.keys(e).forEach(function(t){this.attrs[t]=e[t]},this)},r.prototype.getAttr=function(e,t){if(!t)return this.attrs[e];var n=this.getXmlns();return n[t]?this.attrs[[n[t],e].join(":")]:null},r.prototype.getChild=function(e,t){return this.getChildren(e,t)[0]},r.prototype.getChildren=function(e,t){for(var n=[],r=0;r<this.children.length;r++){var i=this.children[r];!i.getName||i.getName()!==e||t&&i.getNS()!==t||n.push(i)}return n},r.prototype.getChildByAttr=function(e,t,n,r){return this.getChildrenByAttr(e,t,n,r)[0]},r.prototype.getChildrenByAttr=function(e,t,n,r){for(var i=[],o=0;o<this.children.length;o++){var s=this.children[o];!s.attrs||s.attrs[e]!==t||n&&s.getNS()!==n||i.push(s),r&&s.getChildrenByAttr&&i.push(s.getChildrenByAttr(e,t,n,!0))}return r&&(i=[].concat.apply([],i)),i},r.prototype.getChildrenByFilter=function(e,t){for(var n=[],r=0;r<this.children.length;r++){var i=this.children[r];e(i)&&n.push(i),t&&i.getChildrenByFilter&&n.push(i.getChildrenByFilter(e,!0))}return t&&(n=[].concat.apply([],n)),n},r.prototype.getText=function(){for(var e="",t=0;t<this.children.length;t++){var n=this.children[t];"string"!=typeof n&&"number"!=typeof n||(e+=n)}return e},r.prototype.getChildText=function(e,t){var n=this.getChild(e,t);return n?n.getText():null},r.prototype.getChildElements=function(){return this.getChildrenByFilter(function(e){return e instanceof r})},r.prototype.root=function(){return this.parent?this.parent.root():this},r.prototype.tree=r.prototype.root,r.prototype.up=function(){return this.parent?this.parent:this},r.prototype.c=function(e,t){return this.cnode(new r(e,t))},r.prototype.cnode=function(e){return this.children.push(e),"object"===(void 0===e?"undefined":i(e))&&(e.parent=this),e},r.prototype.t=function(e){return this.children.push(e),this},r.prototype.remove=function(e,t){var n;return n="string"==typeof e?function(n){return!(n.is&&n.is(e,t))}:function(t){return t!==e},this.children=this.children.filter(n),this},r.prototype.clone=function(){return h(this)},r.prototype.text=function(e){return e&&1===this.children.length?(this.children[0]=e,this):this.getText()},r.prototype.attr=function(e,t){return void 0!==t||null===t?(this.attrs||(this.attrs={}),this.attrs[e]=t,this):this.attrs[e]},r.prototype.toString=function(){var e="";return this.write(function(t){e+=t}),e},r.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(e){return e&&e.toJSON?e.toJSON():e})}},r.prototype._addChildren=function(e){e(">");for(var t=0;t<this.children.length;t++){var n=this.children[t];(n||0===n)&&(n.write?n.write(e):"string"==typeof n?e(a(n)):n.toString&&e(a(n.toString(10))))}e("</"),e(this.name),e(">")},r.prototype.write=function(e){e("<"),e(this.name);for(var t in this.attrs){var n=this.attrs[t];null!=n&&(e(" "),e(t),e('="'),"string"!=typeof n&&(n=n.toString()),e(s(n)),e('"'))}0===this.children.length?e("/>"):this._addChildren(e)},r.prototype.nameEquals=function(e){return l(this,e)},r.prototype.attrsEquals=function(e){return f(this,e)},r.prototype.childrenEquals=function(e){return p(this,e)},r.prototype.equals=function(e){return u(this,e)},t.exports=r},{"./clone":149,"./equal":151,"./escape":152}],148:[function(e,t,n){"use strict";var r=e("events").EventEmitter,i=e("inherits"),o=e("./Element"),s=e("./parsers/ltx"),a=function(e){r.call(this);var t=this.Parser=e&&e.Parser||this.DefaultParser,n=this.Element=e&&e.Element||this.DefaultElement;this.parser=new t;var i,o=this;this.parser.on("startElement",function(e,t){var r=new n(e,t);i=i?i.cnode(r):r}),this.parser.on("endElement",function(e){i&&e===i.name&&(i.parent?i=i.parent:o.tree||(o.tree=i,i=void 0))}),this.parser.on("text",function(e){i&&i.t(e)}),this.parser.on("error",function(e){o.error=e,o.emit("error",e)})};i(a,r),a.prototype.DefaultParser=s,a.prototype.DefaultElement=o,a.prototype.write=function(e){this.parser.write(e)},a.prototype.end=function(e){this.parser.end(e),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},t.exports=a},{"./Element":147,"./parsers/ltx":155,events:86,inherits:98}],149:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new e.constructor(e.name,e.attrs),n=0;n<e.children.length;n++){var r=e.children[n];t.cnode(r.clone?r.clone():r)}return t}},{}],150:[function(e,t,n){"use strict";var r=e("./Element");t.exports=function(e,t){for(var n=new r(e,t),i=2;i<arguments.length;i++){var o=arguments[i];o&&n.cnode(o)}return n}},{"./Element":147}],151:[function(e,t,n){"use strict";function r(e,t){return e.name===t.name}function i(e,t){var n=e.attrs,r=Object.keys(n),i=r.length;if(i!==Object.keys(t.attrs).length)return!1;for(var o=0,s=i;o<s;o++){var a=r[o],c=n[a];if(null==c||null==t.attrs[a]){if(c!==t.attrs[a])return!1}else if(c.toString()!==t.attrs[a].toString())return!1}return!0}function o(e,t){var n=e.children,r=n.length;if(r!==t.children.length)return!1;for(var i=0,o=r;i<o;i++){var s=n[i];if("string"==typeof s){if(s!==t.children[i])return!1}else if(!s.equals(t.children[i]))return!1}return!0}function s(e,t){return!!r(e,t)&&(!!i(e,t)&&!!o(e,t))}t.exports.name=r,t.exports.attrs=i,t.exports.children=o,t.exports.equal=s},{}],152:[function(e,t,n){"use strict";function r(e){return o[e]}function i(e){return s[e]}var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},s={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&quot;":'"',"&#34;":'"',"&apos;":"'","&#39;":"'"};n.escapeXML=function(e){return e.replace(/&|<|>|"|'/g,r)},n.unescapeXML=function(e){return e.replace(/&(amp|#38|lt|#60|gt|#62|quot|#34|apos|#39);/g,i)},n.escapeXMLText=function(e){return e.replace(/&|<|>/g,r)},n.unescapeXMLText=function(e){return e.replace(/&(amp|#38|lt|#60|gt|#62);/g,i)}},{}],153:[function(e,t,n){"use strict";var r=e("./Element");t.exports.isNode=function(e){return e instanceof r||"string"==typeof e},t.exports.isElement=function(e){return e instanceof r},t.exports.isText=function(e){return"string"==typeof e}},{"./Element":147}],154:[function(e,t,n){"use strict";var r=e("./Parser");t.exports=function(e,t){var n;n="function"==typeof t?new t:new r(t);var i=null,o=null;if(n.on("tree",function(e){i=e}),n.on("error",function(e){o=e}),n.write(e),n.end(),o)throw o;return i}},{"./Parser":148}],155:[function(e,t,n){"use strict";var r=e("inherits"),i=e("events").EventEmitter,o=e("../escape").unescapeXML,s=t.exports=function(){i.call(this);var e,t,n,r,s,a,c,u=0,l=0;this._handleTagOpening=function(e,t,n){e?this.emit("endElement",t):(this.emit("startElement",t,n),s&&this.emit("endElement",t))},this.write=function(i){function f(){if("number"==typeof l){var e=i.slice(l,p);return l=void 0,e}}"string"!=typeof i&&(i=i.toString());var p=0;for(e&&(i=e+i,p+=e.length,e=null);p<i.length;p++){var h=i.charCodeAt(p);switch(u){case 0:if(60===h){var d=f();d&&this.emit("text",o(d)),u=3,l=p+1,n={}}break;case 9:if(93===h&&"]>"===i.substr(p+1,2)){var g=f();g&&this.emit("text",g),u=1}break;case 3:47===h&&l===p?(l=p+1,r=!0):33===h?"[CDATA["===i.substr(p+1,7)?(l=p+8,u=9):(l=void 0,u=1):63===h?(l=void 0,u=2):(h<=32||47===h||62===h)&&(t=f(),p--,u=4);break;case 1:if(62===h){var m=i.charCodeAt(p-1),v=i.charCodeAt(p-2);(45===m&&45===v||93===m&&93===v)&&(u=0)}break;case 2:if(62===h){63===i.charCodeAt(p-1)&&(u=0)}break;case 4:62===h?(this._handleTagOpening(r,t,n),t=void 0,n=void 0,r=void 0,s=void 0,u=0,l=p+1):47===h?s=!0:h>32&&(l=p,u=5);break;case 5:(h<=32||61===h)&&(c=f(),p--,u=6);break;case 6:61===h&&(u=7);break;case 7:34!==h&&39!==h||(a=h,u=8,l=p+1);break;case 8:if(h===a){var y=o(f());n[c]=y,c=void 0,u=4}}}"number"==typeof l&&l<=i.length&&(e=i.slice(l),l=0)}};r(s,i),s.prototype.end=function(e){e&&this.write(e),this.write=function(){}}},{"../escape":152,events:86,inherits:98}],156:[function(e,t,n){"use strict";var r=e("inherits"),i=e("events").EventEmitter,o=e("sax"),s=t.exports=function(){i.call(this),this.parser=o.parser(!0);var e=this;this.parser.onopentag=function(t){e.emit("startElement",t.name,t.attributes)},this.parser.onclosetag=function(t){e.emit("endElement",t)},this.parser.ontext=function(t){e.emit("text",t)},this.parser.onend=function(){e.emit("end")},this.parser.onerror=function(t){e.emit("error",t)}};r(s,i),s.prototype.write=function(e){"string"!=typeof e&&(e=e.toString()),this.parser.write(e)},s.prototype.end=function(e){e&&this.parser.write(e),this.parser.close()}},{events:86,inherits:98,sax:190}],157:[function(e,t,n){"use strict";function r(e,t,n){"number"==typeof t&&(t=" ".repeat(t)),n||(n=1);var i="";return i+="<"+e.name,Object.keys(e.attrs).forEach(function(t){i+=" "+t+'="'+e.attrs[t]+'"'}),e.children.length?(i+=">",e.children.forEach(function(e,o){t&&(i+="\n"+t.repeat(n)),i+="string"==typeof e?e:r(e,t,n+1)}),t&&(i+="\n"+t.repeat(n-1)),i+="</"+e.name+">"):i+="/>",i}t.exports=r},{}],158:[function(e,t,n){"use strict";var r=e("./tagString"),i=e("./parse");t.exports=function(){return i(r.apply(null,arguments))}},{"./parse":154,"./tagString":159}],159:[function(e,t,n){"use strict";var r=e("./escape").escapeXML;t.exports=function(){for(var e=arguments[0],t="",n=1;n<arguments.length;n++)t+=e[n-1],t+=r(arguments[n]);return t+=e[e.length-1]}},{"./escape":152}],160:[function(e,t,n){function r(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*p;case"days":case"day":case"d":return n*f;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function i(e){return e>=f?Math.round(e/f)+"d":e>=l?Math.round(e/l)+"h":e>=u?Math.round(e/u)+"m":e>=c?Math.round(e/c)+"s":e+"ms"}function o(e){return s(e,f,"day")||s(e,l,"hour")||s(e,u,"minute")||s(e,c,"second")||e+" ms"}function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=1e3,u=60*c,l=60*u,f=24*l,p=365.25*f;t.exports=function(e,t){t=t||{};var n=void 0===e?"undefined":a(e);if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?o(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],161:[function(e,t,n){"use strict";var r=e("./lib/Connection"),i=e("@xmpp/streamparser"),o=e("@xmpp/jid"),s=e("@xmpp/xml"),a=e("inherits");n.SRV=e("./lib/SRV"),n.exportCoreUtils=function(e){e.Connection=r,e.StreamParser=i,e.JID=o,e.inherits=a,e.stanza=s,e.Stanza=s.Stanza,e.createStanza=s.createStanza,e.IQ=s.IQ,e.Presence=s.Presence,e.Message=s.Message,e.Parser=s.Parser,e.parse=s.parse,e.ltx=s.ltx,e.createElement=s.createElement,e.Element=s.Element,e.escapeXML=s.escapeXML,e.escapeXMLText=s.escapeXMLText},n.exportCoreUtils(n)},{"./lib/Connection":162,"./lib/SRV":54,"@xmpp/jid":25,"@xmpp/streamparser":29,"@xmpp/xml":30,inherits:98}],162:[function(e,t,n){"use strict";function r(e,t){var n=d({},t);return n.initialDelay=t&&(t.initialReconnectDelay||t.reconnectDelay)||v,n.maxDelay=t&&t.maxReconnectDelay||y,n.immediate=t&&t.socket&&"function"!=typeof t.socket,n.type=t&&t.delayType,n.emitter=e,n}function i(e){a.call(this),this.streamAttrs=e&&e.streamAttrs||{},this.xmlns=e&&e.xmlns||{},this.xmlns.stream=g,this.streamOpen=e&&e.streamOpen||b,this.streamClose=e&&e.streamClose||_,this.rejectUnauthorized=!(!e||!e.rejectUnauthorized),this.serialized=!(!e||!e.serialized),this.requestCert=!(!e||!e.requestCert),this.servername=e&&e.servername,this.boundOnData=this.onData.bind(this),this.boundOnClose=this.onClose.bind(this),this.boundEmitData=this.emit.bind(this,"data"),this.boundEmitDrain=this.emit.bind(this,"drain"),this._setupSocket(r(this,e)),this.once("reconnect",function(){this.reconnect=e&&e.reconnect})}function o(e){return e.children?e.children.reduce(function(e,t){return e+o(t)},""):e}var s=e("net"),a=e("events").EventEmitter,c=e("inherits"),u=e("@xmpp/xml").Element,l=e("reconnect-core"),f=e("@xmpp/streamparser"),p=e("node-xmpp-tls-connect"),h=e("debug")("xmpp:connection"),d=e("lodash.assign"),g="http://etherx.jabber.org/streams",m="urn:ietf:params:xml:ns:xmpp-streams",v=1e3,y=3e4,b="stream:stream",_="</stream:stream>";c(i,a),i.prototype.NS_XMPP_TLS="urn:ietf:params:xml:ns:xmpp-tls",i.NS_STREAM=g,i.prototype.NS_XMPP_STREAMS=m,i.prototype.allowTLS=!0,i.prototype._setupSocket=function(e){h("setup socket");var t={},n=l(function(e){var r=this.socket;return"on"===e.preserve?(e.preserve=t,t=e):e=t=e.preserve?e.preserve:e||t,"function"==typeof e.socket?(h("use lazy socket"),this.socket=e.socket.call(this)):(h("use standard socket"),this.socket=e.socket,e.socket=null,this.socket&&this.once("connect",function(){n.options.immediate=!1})),this.socket=this.socket||new s.Socket,r!==this.socket&&this.setupStream(),this.socket}.bind(this));n(n.options=e);var r=this.end;this.end=this.disconnect=function(){this.closeStream(),r()},this.on("connection",function(){this.parser||this.startParser()}),this.on("end",function(){t={}})},i.prototype.setupStream=function(){h("setup stream"),this.socket.on("end",this.onEnd.bind(this)),this.socket.on("data",this.boundOnData),this.socket.on("close",this.boundOnClose),this.socket.on("data",this.boundEmitData),this.socket.on("drain",this.boundEmitDrain),this.socket.on("error",function(){}),this.socket.serializeStanza||(this.serialized?this.socket.serializeStanza=function(e,t){e.write(function(e){t(e)})}:this.socket.serializeStanza=function(e,t){t(e.toString())})},i.prototype.pause=function(){this.socket.pause&&this.socket.pause()},i.prototype.resume=function(){this.socket.resume&&this.socket.resume()},i.prototype.send=function(e){if(this.socket&&this.streamOpened){if(!this.socket.writable)return void this.socket.end();h("send: "+e.toString());var t=!0;if(e.root){var n=this.rmXmlns(e.root());this.socket.serializeStanza(n,function(e){t=this.write(e)}.bind(this.socket))}else t=this.socket.write(e);return t}},i.prototype.startParser=function(){var e=this;this.parser=new f(this.maxStanzaSize),this.parser.on("streamStart",function(t){e.streamNsAttrs={};for(var n in t)"xmlns"!==n&&"xmlns:"!==n.substr(0,6)||(e.streamNsAttrs[n]=t[n]);e.emit("streamStart",t)}),this.parser.on("stanza",function(t){e.onStanza(e.addStreamNs(t))}),this.parser.on("error",function(t){e.error(t.condition||"internal-server-error",t.message)}),this.parser.once("end",function(){e.stopParser(),e.reconnect?e.once("reconnect",e.startParser.bind(e)):e.end()})},i.prototype.stopParser=function(){if(this.parser){var e=this.parser;this.parser=null,e.end()}},i.prototype.openStream=function(){var e={};for(var t in this.xmlns)this.xmlns.hasOwnProperty(t)&&(t?e["xmlns:"+t]=this.xmlns[t]:e.xmlns=this.xmlns[t]);for(t in this.streamAttrs)this.streamAttrs.hasOwnProperty(t)&&(e[t]=this.streamAttrs[t]);this.streamTo&&(e.to=this.streamTo);var n,r=new u(this.streamOpen,e);if("stream:stream"===r.name){r.t(" ");var i=r.toString();n=i.substr(0,i.indexOf(" </stream:stream>"))}else n=r.toString();this.streamOpened=!0,this.send(n)},i.prototype.startStream=i.prototype.openStream,i.prototype.closeStream=function(){this.send(this.streamClose),this.streamOpened=!1},i.prototype.endStream=i.prototype.closeStream,i.prototype.onData=function(e){h("receive: "+e.toString("utf8")),this.parser&&this.parser.write(e)},i.prototype.setSecure=function(e,t,n){this.socket.removeListener("data",this.boundOnData),this.socket.removeListener("data",this.boundEmitData),this.socket.removeListener("drain",this.boundEmitDrain),this.socket.removeListener("close",this.boundOnClose),this.socket.clearTimer&&this.socket.clearTimer();var r=p({socket:this.socket,rejectUnauthorized:this.rejectUnauthorized,credentials:e||this.credentials,requestCert:this.requestCert,isServer:!!t,servername:t&&n},function(){this.isSecure=!0,this.once("disconnect",function(){this.isSecure=!1}),r.emit("connect",r)}.bind(this));r.on("clientError",this.emit.bind(this,"error")),this.reconnect||(this.reconnect=!0,this.once("reconnect",function(){this.reconnect=!1})),this.stopParser(),this.listen({socket:r,preserve:"on"})},i.prototype.onStanza=function(e){if(e.is("error",g)){var t=new Error(""+o(e));t.stanza=e,this.socket.emit("error",t)}else e.is("features",this.NS_STREAM)&&this.allowTLS&&!this.isSecure&&e.getChild("starttls",this.NS_XMPP_TLS)?this.send(new u("starttls",{xmlns:this.NS_XMPP_TLS})):this.allowTLS&&e.is("proceed",this.NS_XMPP_TLS)?this.setSecure():this.emit("stanza",e)},i.prototype.addStreamNs=function(e){for(var t in this.streamNsAttrs)e.attrs[t]||"xmlns"===t&&this.streamNsAttrs[t]===this.xmlns[""]||(e.attrs[t]=this.streamNsAttrs[t]);return e},i.prototype.rmXmlns=function(e){for(var t in this.xmlns){var n=t?"xmlns:"+t:"xmlns";e.attrs[n]===this.xmlns[t]&&(e.attrs[n]=null)}return e},i.prototype.onEnd=function(){this.closeStream(),this.reconnect||this.emit("end")},i.prototype.onClose=function(){this.reconnect||this.emit("close")},i.prototype.error=function(e,t){if(this.emit("error",new Error(t)),this.socket&&this.socket.writable){this.streamOpened||this.openStream();var n=new u("stream:error");n.c(e,{xmlns:m}),t&&n.c("text",{xmlns:m,"xml:lang":"en"}).t(t),this.send(n),this.end()}},t.exports=i},{"@xmpp/streamparser":29,"@xmpp/xml":30,debug:68,events:86,inherits:98,"lodash.assign":163,net:55,"node-xmpp-tls-connect":54,"reconnect-core":183}],163:[function(e,t,n){function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function o(e,t){var n=M(e)||d(e)?i(e.length,String):[],r=n.length,o=!!r;for(var s in e)!t&&!R.call(e,s)||o&&("length"==s||l(s,r))||n.push(s);return n}function s(e,t,n){var r=e[t];R.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function a(e){if(!p(e))return P(e);var t=[];for(var n in Object(e))R.call(e,n)&&"constructor"!=n&&t.push(n);return t}function c(e,t){return t=I(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=I(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=s,r(e,this,a)}}function u(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=r?r(n[a],e[a],a,n,e):void 0;s(n,a,void 0===c?e[a]:c)}return n}function l(e,t){return!!(t=null==t?C:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function f(e,t,n){if(!b(n))return!1;var r=void 0===t?"undefined":S(t);return!!("number"==r?g(n)&&l(t,n.length):"string"==r&&t in n)&&h(n[t],e)}function p(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||j)}function h(e,t){return e===t||e!==e&&t!==t}function d(e){return m(e)&&R.call(e,"callee")&&(!A.call(e,"callee")||O.call(e)==x)}function g(e){return null!=e&&y(e.length)&&!v(e)}function m(e){return _(e)&&g(e)}function v(e){var t=b(e)?O.call(e):"";return t==E||t==k}function y(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=C}function b(e){var t=void 0===e?"undefined":S(e);return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==(void 0===e?"undefined":S(e))}function w(e){return g(e)?o(e):a(e)}var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=9007199254740991,x="[object Arguments]",E="[object Function]",k="[object GeneratorFunction]",T=/^(?:0|[1-9]\d*)$/,j=Object.prototype,R=j.hasOwnProperty,O=j.toString,A=j.propertyIsEnumerable,P=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),I=Math.max,D=!A.call({valueOf:1},"valueOf"),M=Array.isArray,L=function(e){return c(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&f(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}(function(e,t){if(D||p(t)||g(t))return void u(t,w(t),e);for(var n in t)R.call(t,n)&&s(e,n,t[n])});t.exports=L},{}],164:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],165:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],166:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=r.exec(e||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],167:[function(e,t,n){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(this,e("_process"))},{_process:168}],168:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?g=d.concat(g):v=-1,g.length&&c())}function c(){if(!m){var e=o(a);m=!0;for(var t=g.length;t;){for(d=g,g=[];++v<t;)d&&d[v].run();v=-1,t=g.length}d=null,m=!1,s(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var f,p,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var d,g=[],m=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new u(e,t)),1!==g.length||m||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],169:[function(t,n,r){(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function s(e){throw new RangeError(M[e])}function a(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function c(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(D,"."),r+a(e.split("."),t).join(".")}function u(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?N(e/j):e>>1,e+=N(e/t);e>L*k>>1;r+=x)e=N(e/L);return N(r+(L+1)*e/(e+T))}function d(e){var t,n,r,i,o,a,c,u,p,d,g=[],m=e.length,v=0,y=O,b=R;for(n=e.lastIndexOf(A),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&s("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,a=1,c=x;i>=m&&s("invalid-input"),u=f(e.charCodeAt(i++)),(u>=x||u>N((C-v)/a))&&s("overflow"),v+=u*a,p=c<=b?E:c>=b+k?k:c-b,!(u<p);c+=x)d=x-p,a>N(C/d)&&s("overflow"),a*=d;t=g.length+1,b=h(v-o,t,0==o),N(v/t)>C-y&&s("overflow"),y+=N(v/t),v%=t,g.splice(v++,0,y)}return l(g)}function g(e){var t,n,r,i,o,a,c,l,f,d,g,m,v,y,b,_=[];for(e=u(e),m=e.length,t=O,n=0,o=R,a=0;a<m;++a)(g=e[a])<128&&_.push(B(g));for(r=i=_.length,i&&_.push(A);r<m;){for(c=C,a=0;a<m;++a)(g=e[a])>=t&&g<c&&(c=g);for(v=r+1,c-t>N((C-n)/v)&&s("overflow"),n+=(c-t)*v,t=c,a=0;a<m;++a)if(g=e[a],g<t&&++n>C&&s("overflow"),g==t){for(l=n,f=x;d=f<=o?E:f>=o+k?k:f-o,!(l<d);f+=x)b=l-d,y=x-d,_.push(B(p(d+b%y,0))),l=N(b/y);_.push(B(p(l,0))),o=h(n,v,r==i),n=0,++r}++n,++t}return _.join("")}function m(e){return c(e,function(e){return P.test(e)?d(e.slice(4).toLowerCase()):e})}function v(e){return c(e,function(e){return I.test(e)?"xn--"+g(e):e})}var y="object"==(void 0===r?"undefined":i(r))&&r&&!r.nodeType&&r,b="object"==(void 0===n?"undefined":i(n))&&n&&!n.nodeType&&n,_="object"==(void 0===t?"undefined":i(t))&&t;_.global!==_&&_.window!==_&&_.self!==_||(o=_);var w,S,C=2147483647,x=36,E=1,k=26,T=38,j=700,R=72,O=128,A="-",P=/^xn--/,I=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=x-E,N=Math.floor,B=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:u,encode:l},decode:d,encode:g,toASCII:v,toUnicode:m},"function"==typeof e&&"object"==i(e.amd)&&e.amd)e("punycode",function(){return w});else if(y&&b)if(n.exports==y)b.exports=w;else for(S in w)w.hasOwnProperty(S)&&(y[S]=w[S]);else o.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],170:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":171}],171:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var s=e("process-nextick-args"),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var c=e("core-util-is");c.inherits=e("inherits");var u=e("./_stream_readable"),l=e("./_stream_writable");c.inherits(r,u);for(var f=a(l.prototype),p=0;p<f.length;p++){var h=f[p];r.prototype[h]||(r.prototype[h]=l.prototype[h])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},{"./_stream_readable":173,"./_stream_writable":175,"core-util-is":62,inherits:98,"process-nextick-args":167}],172:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}t.exports=r;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":174,"core-util-is":62,inherits:98}],173:[function(e,t,n){(function(n,r){"use strict";function i(e){return N.from(e)}function o(e){return N.isBuffer(e)||e instanceof B}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function a(t,n){I=I||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof I&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new J,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(q||(q=e("string_decoder/").StringDecoder),this.decoder=new q(t.encoding),this.encoding=t.encoding)}function c(t){if(I=I||e("./_stream_duplex"),!(this instanceof c))return new c(t);this._readableState=new a(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),L.call(this)}function u(e,t,n,r,o){var s=e._readableState;if(null===t)s.reading=!1,g(e,s);else{var a;o||(a=f(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===N.prototype||(t=i(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):y(e,s)):l(e,s,t,!1))):r||(s.reading=!1)}return p(s)}function l(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),y(e,t)}function f(e,t){var n;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function p(e){
return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?P(v,e):v(e))}function v(e){z("emit readable"),e.emit("readable"),x(e)}function y(e,t){t.readingMore||(t.readingMore=!0,P(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&M(e,"data")&&(t.flowing=!0,x(e))}}function w(e){z("readable nexttick read 0"),e.read(0)}function S(e,t){t.resumeScheduled||(t.resumeScheduled=!0,P(C,e,t))}function C(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=k(e,t.buffer,t.decoder),n}function k(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?T(e,t):j(e,t),r}function T(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function j(e,t){var n=N.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,P(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var P=e("process-nextick-args");t.exports=c;var I,D=e("isarray");c.ReadableState=a;var M=(e("events").EventEmitter,function(e,t){return e.listeners(t).length}),L=e("./internal/streams/stream"),N=e("safe-buffer").Buffer,B=r.Uint8Array||function(){},F=e("core-util-is");F.inherits=e("inherits");var U=e("util"),z=void 0;z=U&&U.debuglog?U.debuglog("stream"):function(){};var q,J=e("./internal/streams/BufferList"),V=e("./internal/streams/destroy");F.inherits(c,L);var G=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=V.destroy,c.prototype._undestroy=V.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=N.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){return q||(q=e("string_decoder/").StringDecoder),this._readableState.decoder=new q(t),this._readableState.encoding=t,this};var H=8388608;c.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):m(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&R(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,z("length less than watermark",r)),t.ended||t.reading?(r=!1,z("reading or ended",r)):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(n,t)));var i;return i=e>0?E(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==i&&this.emit("data",i),i},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function r(e,t){z("onunpipe"),e===p&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){z("onend"),e.end()}function o(){z("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",m),e.removeListener("error",c),e.removeListener("unpipe",r),p.removeListener("end",i),p.removeListener("end",f),p.removeListener("data",a),v=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||m()}function a(t){z("ondata"),y=!1,!1!==e.write(t)||y||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==A(h.pipes,e))&&!v&&(z("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,y=!0),p.pause())}function c(t){z("onerror",t),f(),e.removeListener("error",c),0===M(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),f()}function l(){z("onfinish"),e.removeListener("close",u),f()}function f(){z("unpipe"),p.unpipe(e)}var p=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,z("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr,g=d?i:f;h.endEmitted?P(g):p.once("end",g),e.on("unpipe",r);var m=_(p);e.on("drain",m);var v=!1,y=!1;return p.on("data",a),s(e,"error",c),e.once("close",u),e.once("finish",l),e.emit("pipe",p),h.flowing||(z("pipe resume"),p.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=A(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},c.prototype.on=function(e,t){var n=L.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):P(w,this))}return n},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,S(this,e)),this},c.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(z("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(z("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){r.push(i)||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<G.length;o++)e.on(G[o],r.emit.bind(r,G[o]));return r._read=function(t){z("wrapped _read",t),n&&(n=!1,e.resume())},r},c._fromList=E}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":171,"./internal/streams/BufferList":176,"./internal/streams/destroy":177,"./internal/streams/stream":178,_process:168,"core-util-is":62,events:86,inherits:98,isarray:102,"process-nextick-args":167,"safe-buffer":189,"string_decoder/":224,util:54}],174:[function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(t)})}function s(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),c=e("core-util-is");c.inherits=e("inherits"),c.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;a.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":171,"core-util-is":62,inherits:98}],175:[function(e,t,n){(function(n,r){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){k(t,e)}}function o(e){return I.from(e)}function s(e){return I.isBuffer(e)||e instanceof D}function a(){}function c(t,n){j=j||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof j&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function u(t){if(j=j||e("./_stream_duplex"),!(L.call(u,this)||this instanceof j))return new u(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),P.call(this)}function l(e,t){var n=new Error("write after end");e.emit("error",n),T(t,n)}function f(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),T(r,o),i=!1),i}function p(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=I.from(t,n)),t}function h(e,t,n,r,i,o){if(!n){var s=p(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,a,r,i,o);return c}function d(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,n,r,i){--t.pendingcb,n?(T(i,r),T(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(m(n),t)g(e,n,r,t,i);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?R(y,e,n,o,i):y(e,n,o,i)}}function y(e,t,n,r){n||b(e,t),t.pendingcb--,r(),x(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,d(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t)}else{for(;n;){var u=n.chunk,l=n.encoding,f=n.callback;if(d(e,t,!1,t.objectMode?1:u.length,u,l,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function C(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,T(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var n=w(t);return n&&(C(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function E(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?T(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var T=e("process-nextick-args");t.exports=u;var j,R=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:T;u.WritableState=c;var O=e("core-util-is");O.inherits=e("inherits");var A={deprecate:e("util-deprecate")},P=e("./internal/streams/stream"),I=e("safe-buffer").Buffer,D=r.Uint8Array||function(){},M=e("./internal/streams/destroy");O.inherits(u,P),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||e&&e._writableState instanceof c}})):L=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,n){var r=this._writableState,i=!1,c=s(e)&&!r.objectMode;return c&&!I.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=a),r.ended?l(this,n):(c||f(this,r,e,n))&&(r.pendingcb++,i=h(this,r,c,e,t,n)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},u.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||E(this,r,n)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=M.destroy,u.prototype._undestroy=M.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":171,"./internal/streams/destroy":177,"./internal/streams/stream":178,_process:168,"core-util-is":62,inherits:98,"process-nextick-args":167,"safe-buffer":189,"util-deprecate":306}],176:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e.copy(t,n)}var o=e("safe-buffer").Buffer;t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)i(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},{"safe-buffer":189}],177:[function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(r||i)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||s(o,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(s(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var s=e("process-nextick-args");t.exports={destroy:r,undestroy:i}},{"process-nextick-args":167}],178:[function(e,t,n){t.exports=e("events").EventEmitter},{events:86}],179:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":180}],180:[function(e,t,n){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":171,"./lib/_stream_passthrough.js":172,"./lib/_stream_readable.js":173,"./lib/_stream_transform.js":174,"./lib/_stream_writable.js":175}],181:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":180}],182:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":175}],183:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("events").EventEmitter,o=e("backoff"),s=function(){};t.exports=function(e){return function(t,n){function a(r,i){function o(e){f=s,h.removeListener("connect",p),h.removeListener("error",a),h.removeListener("close",a),h.removeListener("end",a),"Request"==h.constructor.name&&h.on("error",s)}function a(e){if(c.connected=!1,o(e),c.emit("disconnect",e),c.reconnect)try{u.backoff()}catch(e){}}function p(){u.reset(),c.connected=!0,n&&h.removeListener("connect",n),c.emit("connect",h)}if(c.reconnect){f(),c.emit("reconnect",r,i);var h=e.apply(null,l);h!==c._connection&&c.emit("connection",h),c._connection=h,f=o,h.on("error",a).on("close",a).on("end",a),t.immediate||"Request"==h.constructor.name?(c.connected=!0,c.emit("connect",h),h.once("data",function(){u.reset()})):h.on("connect",p)}}n="function"==typeof t?t:n,t="object"==(void 0===t?"undefined":r(t))?t:{initialDelay:1e3,maxDelay:3e4},n||(n=t.onConnect);var c=t.emitter||new i;c.connected=!1,c.reconnect=!0,n&&c.on("connect",n);var u=(o[t.type]||o.fibonacci)(t);u.on("backoff",function(e,t){c.emit("backoff",e,t)});var l,f=s;return u.on("ready",a),c.connect=c.listen=function(){return this.reconnect=!0,u.reset(),l=[].slice.call(arguments),a(0,0),c},c.end=c.disconnect=function(){return c.reconnect=!1,c._connection&&c._connection.end(),c.emit("disconnect"),c},c}}},{backoff:44,events:86}],184:[function(e,t,n){t.exports=e("./lib/retry")},{"./lib/retry":185}],185:[function(e,t,n){var r=e("./retry_operation");n.operation=function(e){var t=n.timeouts(e);return new r(t,{forever:e&&e.forever,unref:e&&e.unref})},n.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort(function(e,t){return e-t}),r},n.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},n.wrap=function(e,t,r){if(t instanceof Array&&(r=t,t=null),!r){r=[];for(var i in e)"function"==typeof e[i]&&r.push(i)}for(var o=0;o<r.length;o++){var s=r[o],a=e[s];e[s]=function(){var r=n.operation(t),i=Array.prototype.slice.call(arguments),o=i.pop();i.push(function(e){r.retry(e)||(e&&(arguments[0]=r.mainError()),o.apply(this,arguments))}),r.attempt(function(){a.apply(e,i)})},e[s].options=t}}},{"./retry_operation":186}],186:[function(e,t,n){function r(e,t){"boolean"==typeof t&&(t={forever:t}),this._timeouts=e,this._options=t||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=r,r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift()}var n=this,r=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),this._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t);return this._options.unref&&r.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,s=(e[o]||0)+1;e[o]=s,s>=n&&(t=i,n=s)}return t}},{}],187:[function(e,t,n){(function(n){"use strict";function r(){f.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function i(e,t){return e<<t|e>>>32-t}function o(e,t,n,r,o,s,a,c){return i(e+(t^n^r)+s+a|0,c)+o|0}function s(e,t,n,r,o,s,a,c){return i(e+(t&n|~t&r)+s+a|0,c)+o|0}function a(e,t,n,r,o,s,a,c){return i(e+((t|~n)^r)+s+a|0,c)+o|0}function c(e,t,n,r,o,s,a,c){return i(e+(t&r|n&~r)+s+a|0,c)+o|0}function u(e,t,n,r,o,s,a,c){return i(e+(t^(n|~r))+s+a|0,c)+o|0}var l=e("inherits"),f=e("hash-base");l(r,f),r.prototype._update=function(){for(var e=new Array(16),t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,l=this._c,f=this._d,p=this._e;n=o(n,r,l,f,p,e[0],0,11),l=i(l,10),p=o(p,n,r,l,f,e[1],0,14),r=i(r,10),f=o(f,p,n,r,l,e[2],0,15),n=i(n,10),l=o(l,f,p,n,r,e[3],0,12),p=i(p,10),r=o(r,l,f,p,n,e[4],0,5),f=i(f,10),n=o(n,r,l,f,p,e[5],0,8),l=i(l,10),p=o(p,n,r,l,f,e[6],0,7),r=i(r,10),f=o(f,p,n,r,l,e[7],0,9),n=i(n,10),l=o(l,f,p,n,r,e[8],0,11),p=i(p,10),r=o(r,l,f,p,n,e[9],0,13),f=i(f,10),n=o(n,r,l,f,p,e[10],0,14),l=i(l,10),p=o(p,n,r,l,f,e[11],0,15),r=i(r,10),f=o(f,p,n,r,l,e[12],0,6),n=i(n,10),l=o(l,f,p,n,r,e[13],0,7),p=i(p,10),r=o(r,l,f,p,n,e[14],0,9),f=i(f,10),n=o(n,r,l,f,p,e[15],0,8),l=i(l,10),p=s(p,n,r,l,f,e[7],1518500249,7),r=i(r,10),f=s(f,p,n,r,l,e[4],1518500249,6),n=i(n,10),l=s(l,f,p,n,r,e[13],1518500249,8),p=i(p,10),r=s(r,l,f,p,n,e[1],1518500249,13),f=i(f,10),n=s(n,r,l,f,p,e[10],1518500249,11),l=i(l,10),p=s(p,n,r,l,f,e[6],1518500249,9),r=i(r,10),f=s(f,p,n,r,l,e[15],1518500249,7),n=i(n,10),l=s(l,f,p,n,r,e[3],1518500249,15),p=i(p,10),r=s(r,l,f,p,n,e[12],1518500249,7),f=i(f,10),n=s(n,r,l,f,p,e[0],1518500249,12),l=i(l,10),p=s(p,n,r,l,f,e[9],1518500249,15),r=i(r,10),f=s(f,p,n,r,l,e[5],1518500249,9),n=i(n,10),l=s(l,f,p,n,r,e[2],1518500249,11),p=i(p,10),r=s(r,l,f,p,n,e[14],1518500249,7),f=i(f,10),n=s(n,r,l,f,p,e[11],1518500249,13),l=i(l,10),p=s(p,n,r,l,f,e[8],1518500249,12),r=i(r,10),f=a(f,p,n,r,l,e[3],1859775393,11),n=i(n,10),l=a(l,f,p,n,r,e[10],1859775393,13),p=i(p,10),r=a(r,l,f,p,n,e[14],1859775393,6),f=i(f,10),n=a(n,r,l,f,p,e[4],1859775393,7),l=i(l,10),p=a(p,n,r,l,f,e[9],1859775393,14),r=i(r,10),f=a(f,p,n,r,l,e[15],1859775393,9),n=i(n,10),l=a(l,f,p,n,r,e[8],1859775393,13),p=i(p,10),r=a(r,l,f,p,n,e[1],1859775393,15),f=i(f,10),n=a(n,r,l,f,p,e[2],1859775393,14),l=i(l,10),p=a(p,n,r,l,f,e[7],1859775393,8),r=i(r,10),f=a(f,p,n,r,l,e[0],1859775393,13),n=i(n,10),l=a(l,f,p,n,r,e[6],1859775393,6),p=i(p,10),r=a(r,l,f,p,n,e[13],1859775393,5),f=i(f,10),n=a(n,r,l,f,p,e[11],1859775393,12),l=i(l,10),p=a(p,n,r,l,f,e[5],1859775393,7),r=i(r,10),f=a(f,p,n,r,l,e[12],1859775393,5),n=i(n,10),l=c(l,f,p,n,r,e[1],2400959708,11),p=i(p,10),r=c(r,l,f,p,n,e[9],2400959708,12),f=i(f,10),n=c(n,r,l,f,p,e[11],2400959708,14),l=i(l,10),p=c(p,n,r,l,f,e[10],2400959708,15),r=i(r,10),f=c(f,p,n,r,l,e[0],2400959708,14),n=i(n,10),l=c(l,f,p,n,r,e[8],2400959708,15),p=i(p,10),r=c(r,l,f,p,n,e[12],2400959708,9),f=i(f,10),n=c(n,r,l,f,p,e[4],2400959708,8),l=i(l,10),p=c(p,n,r,l,f,e[13],2400959708,9),r=i(r,10),f=c(f,p,n,r,l,e[3],2400959708,14),n=i(n,10),l=c(l,f,p,n,r,e[7],2400959708,5),p=i(p,10),r=c(r,l,f,p,n,e[15],2400959708,6),f=i(f,10),n=c(n,r,l,f,p,e[14],2400959708,8),l=i(l,10),p=c(p,n,r,l,f,e[5],2400959708,6),r=i(r,10),f=c(f,p,n,r,l,e[6],2400959708,5),n=i(n,10),l=c(l,f,p,n,r,e[2],2400959708,12),p=i(p,10),r=u(r,l,f,p,n,e[4],2840853838,9),f=i(f,10),n=u(n,r,l,f,p,e[0],2840853838,15),l=i(l,10),p=u(p,n,r,l,f,e[5],2840853838,5),r=i(r,10),f=u(f,p,n,r,l,e[9],2840853838,11),n=i(n,10),l=u(l,f,p,n,r,e[7],2840853838,6),p=i(p,10),r=u(r,l,f,p,n,e[12],2840853838,8),f=i(f,10),n=u(n,r,l,f,p,e[2],2840853838,13),l=i(l,10),p=u(p,n,r,l,f,e[10],2840853838,12),r=i(r,10),f=u(f,p,n,r,l,e[14],2840853838,5),n=i(n,10),l=u(l,f,p,n,r,e[1],2840853838,12),p=i(p,10),r=u(r,l,f,p,n,e[3],2840853838,13),f=i(f,10),n=u(n,r,l,f,p,e[8],2840853838,14),l=i(l,10),p=u(p,n,r,l,f,e[11],2840853838,11),r=i(r,10),f=u(f,p,n,r,l,e[6],2840853838,8),n=i(n,10),l=u(l,f,p,n,r,e[15],2840853838,5),p=i(p,10),r=u(r,l,f,p,n,e[13],2840853838,6),f=i(f,10);var h=this._a,d=this._b,g=this._c,m=this._d,v=this._e;h=u(h,d,g,m,v,e[5],1352829926,8),g=i(g,10),v=u(v,h,d,g,m,e[14],1352829926,9),d=i(d,10),m=u(m,v,h,d,g,e[7],1352829926,9),h=i(h,10),g=u(g,m,v,h,d,e[0],1352829926,11),v=i(v,10),d=u(d,g,m,v,h,e[9],1352829926,13),m=i(m,10),h=u(h,d,g,m,v,e[2],1352829926,15),g=i(g,10),v=u(v,h,d,g,m,e[11],1352829926,15),d=i(d,10),m=u(m,v,h,d,g,e[4],1352829926,5),h=i(h,10),g=u(g,m,v,h,d,e[13],1352829926,7),v=i(v,10),d=u(d,g,m,v,h,e[6],1352829926,7),m=i(m,10),h=u(h,d,g,m,v,e[15],1352829926,8),g=i(g,10),v=u(v,h,d,g,m,e[8],1352829926,11),d=i(d,10),m=u(m,v,h,d,g,e[1],1352829926,14),h=i(h,10),g=u(g,m,v,h,d,e[10],1352829926,14),v=i(v,10),d=u(d,g,m,v,h,e[3],1352829926,12),m=i(m,10),h=u(h,d,g,m,v,e[12],1352829926,6),g=i(g,10),v=c(v,h,d,g,m,e[6],1548603684,9),d=i(d,10),m=c(m,v,h,d,g,e[11],1548603684,13),h=i(h,10),g=c(g,m,v,h,d,e[3],1548603684,15),v=i(v,10),d=c(d,g,m,v,h,e[7],1548603684,7),m=i(m,10),h=c(h,d,g,m,v,e[0],1548603684,12),g=i(g,10),v=c(v,h,d,g,m,e[13],1548603684,8),d=i(d,10),m=c(m,v,h,d,g,e[5],1548603684,9),h=i(h,10),g=c(g,m,v,h,d,e[10],1548603684,11),v=i(v,10),d=c(d,g,m,v,h,e[14],1548603684,7),m=i(m,10),h=c(h,d,g,m,v,e[15],1548603684,7),g=i(g,10),v=c(v,h,d,g,m,e[8],1548603684,12),d=i(d,10),m=c(m,v,h,d,g,e[12],1548603684,7),h=i(h,10),g=c(g,m,v,h,d,e[4],1548603684,6),v=i(v,10),d=c(d,g,m,v,h,e[9],1548603684,15),m=i(m,10),h=c(h,d,g,m,v,e[1],1548603684,13),g=i(g,10),v=c(v,h,d,g,m,e[2],1548603684,11),d=i(d,10),m=a(m,v,h,d,g,e[15],1836072691,9),h=i(h,10),g=a(g,m,v,h,d,e[5],1836072691,7),v=i(v,10),d=a(d,g,m,v,h,e[1],1836072691,15),m=i(m,10),h=a(h,d,g,m,v,e[3],1836072691,11),g=i(g,10),v=a(v,h,d,g,m,e[7],1836072691,8),d=i(d,10),m=a(m,v,h,d,g,e[14],1836072691,6),h=i(h,10),g=a(g,m,v,h,d,e[6],1836072691,6),v=i(v,10),d=a(d,g,m,v,h,e[9],1836072691,14),m=i(m,10),h=a(h,d,g,m,v,e[11],1836072691,12),g=i(g,10),v=a(v,h,d,g,m,e[8],1836072691,13),d=i(d,10),m=a(m,v,h,d,g,e[12],1836072691,5),h=i(h,10),g=a(g,m,v,h,d,e[2],1836072691,14),v=i(v,10),d=a(d,g,m,v,h,e[10],1836072691,13),m=i(m,10),h=a(h,d,g,m,v,e[0],1836072691,13),g=i(g,10),v=a(v,h,d,g,m,e[4],1836072691,7),d=i(d,10),m=a(m,v,h,d,g,e[13],1836072691,5),h=i(h,10),g=s(g,m,v,h,d,e[8],2053994217,15),v=i(v,10),d=s(d,g,m,v,h,e[6],2053994217,5),m=i(m,10),h=s(h,d,g,m,v,e[4],2053994217,8),g=i(g,10),v=s(v,h,d,g,m,e[1],2053994217,11),d=i(d,10),
m=s(m,v,h,d,g,e[3],2053994217,14),h=i(h,10),g=s(g,m,v,h,d,e[11],2053994217,14),v=i(v,10),d=s(d,g,m,v,h,e[15],2053994217,6),m=i(m,10),h=s(h,d,g,m,v,e[0],2053994217,14),g=i(g,10),v=s(v,h,d,g,m,e[5],2053994217,6),d=i(d,10),m=s(m,v,h,d,g,e[12],2053994217,9),h=i(h,10),g=s(g,m,v,h,d,e[2],2053994217,12),v=i(v,10),d=s(d,g,m,v,h,e[13],2053994217,9),m=i(m,10),h=s(h,d,g,m,v,e[9],2053994217,12),g=i(g,10),v=s(v,h,d,g,m,e[7],2053994217,5),d=i(d,10),m=s(m,v,h,d,g,e[10],2053994217,15),h=i(h,10),g=s(g,m,v,h,d,e[14],2053994217,8),v=i(v,10),d=o(d,g,m,v,h,e[12],0,8),m=i(m,10),h=o(h,d,g,m,v,e[15],0,5),g=i(g,10),v=o(v,h,d,g,m,e[10],0,12),d=i(d,10),m=o(m,v,h,d,g,e[4],0,9),h=i(h,10),g=o(g,m,v,h,d,e[1],0,12),v=i(v,10),d=o(d,g,m,v,h,e[5],0,5),m=i(m,10),h=o(h,d,g,m,v,e[8],0,14),g=i(g,10),v=o(v,h,d,g,m,e[7],0,6),d=i(d,10),m=o(m,v,h,d,g,e[6],0,8),h=i(h,10),g=o(g,m,v,h,d,e[2],0,13),v=i(v,10),d=o(d,g,m,v,h,e[13],0,6),m=i(m,10),h=o(h,d,g,m,v,e[14],0,5),g=i(g,10),v=o(v,h,d,g,m,e[0],0,15),d=i(d,10),m=o(m,v,h,d,g,e[3],0,13),h=i(h,10),g=o(g,m,v,h,d,e[9],0,11),v=i(v,10),d=o(d,g,m,v,h,e[11],0,11),m=i(m,10);var y=this._b+l+m|0;this._b=this._c+f+v|0,this._c=this._d+p+h|0,this._d=this._e+n+d|0,this._e=this._a+r+g|0,this._a=y},r.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:57,"hash-base":93,inherits:98}],188:[function(e,t,n){function r(e,t){var n,r=this;s.call(this),e=e||{},e.iceServers=e.iceServers||[],this.enableChromeNativeSimulcast=!1,t&&t.optional&&window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&t.optional.forEach(function(e){e.enableChromeNativeSimulcast&&(r.enableChromeNativeSimulcast=!0)}),this.enableMultiStreamHacks=!1,t&&t.optional&&window.chrome&&t.optional.forEach(function(e){e.enableMultiStreamHacks&&(r.enableMultiStreamHacks=!0)}),this.restrictBandwidth=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetRestrictBandwidth&&(r.restrictBandwidth=e.andyetRestrictBandwidth)}),this.batchIceCandidates=0,t&&t.optional&&t.optional.forEach(function(e){e.andyetBatchIce&&(r.batchIceCandidates=e.andyetBatchIce)}),this.batchedIceCandidates=[],t&&t.optional&&window.chrome&&t.optional.forEach(function(e){e.andyetFasterICE&&(r.eliminateDuplicateCandidates=e.andyetFasterICE)}),t&&t.optional&&t.optional.forEach(function(e){e.andyetDontSignalCandidates&&(r.dontSignalCandidates=e.andyetDontSignalCandidates)}),this.assumeSetLocalSuccess=!1,t&&t.optional&&t.optional.forEach(function(e){e.andyetAssumeSetLocalSuccess&&(r.assumeSetLocalSuccess=e.andyetAssumeSetLocalSuccess)}),window.navigator.mozGetUserMedia&&t&&t.optional&&(this.wtFirefox=0,t.optional.forEach(function(e){e.andyetFirefoxMakesMeSad&&(r.wtFirefox=e.andyetFirefoxMakesMeSad,r.wtFirefox>0&&(r.firefoxcandidatebuffer=[]))})),this.pc=new RTCPeerConnection(e,t),"function"==typeof this.pc.getLocalStreams?this.getLocalStreams=this.pc.getLocalStreams.bind(this.pc):this.getLocalStreams=function(){return[]},"function"==typeof this.pc.getRemoteStreams?this.getRemoteStreams=this.pc.getRemoteStreams.bind(this.pc):this.getRemoteStreams=function(){return[]},this.addStream=this.pc.addStream.bind(this.pc),this.removeStream=function(e){"function"==typeof r.pc.removeStream?r.pc.removeStream.apply(r.pc,arguments):"function"==typeof r.pc.removeTrack&&e.getTracks().forEach(function(e){r.pc.removeTrack(e)})},"function"==typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc)),this.pc.onremovestream=this.emit.bind(this,"removeStream"),this.pc.onremovetrack=this.emit.bind(this,"removeTrack"),this.pc.onaddstream=this.emit.bind(this,"addStream"),this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded"),this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange"),this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange"),this.pc.onicecandidate=this._onIce.bind(this),this.pc.ondatachannel=this._onDataChannel.bind(this),this.localDescription={contents:[]},this.remoteDescription={contents:[]},this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1},this.iceCredentials={local:{},remote:{}};for(n in e)this.config[n]=e[n];this.config.debug&&this.on("*",function(){(e.logger||console).log("PeerConnection event:",arguments)}),this.hadLocalStunCandidate=!1,this.hadRemoteStunCandidate=!1,this.hadLocalRelayCandidate=!1,this.hadRemoteRelayCandidate=!1,this.hadLocalIPv6Candidate=!1,this.hadRemoteIPv6Candidate=!1,this._remoteDataChannels=[],this._localDataChannels=[],this._candidateBuffer=[]}var i=e("util"),o=e("sdp-jingle-json"),s=e("wildemitter"),a=e("lodash.clonedeep");i.inherits(r,s),Object.defineProperty(r.prototype,"signalingState",{get:function(){return this.pc.signalingState}}),Object.defineProperty(r.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}}),r.prototype._role=function(){return this.isInitiator?"initiator":"responder"},r.prototype.addStream=function(e){this.localStream=e,this.pc.addStream(e)},r.prototype._checkLocalCandidate=function(e){var t=o.toCandidateJSON(e);"srflx"==t.type?this.hadLocalStunCandidate=!0:"relay"==t.type&&(this.hadLocalRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)},r.prototype._checkRemoteCandidate=function(e){var t=o.toCandidateJSON(e);"srflx"==t.type?this.hadRemoteStunCandidate=!0:"relay"==t.type&&(this.hadRemoteRelayCandidate=!0),-1!=t.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=!0)},r.prototype.processIce=function(e,t){t=t||function(){};var n=this;if("closed"===this.pc.signalingState)return t();if(e.contents||e.jingle&&e.jingle.contents){var r=this.remoteDescription.contents.map(function(e){return e.name});(e.contents||e.jingle.contents).forEach(function(e){var i=e.transport||{},s=i.candidates||[],a=r.indexOf(e.name),c=e.name,u=n.remoteDescription.contents.find(function(t){return t.name===e.name}),l=function(){s.forEach(function(e){var t=o.toCandidateSDP(e);n.pc.addIceCandidate(new RTCIceCandidate({candidate:t,sdpMLineIndex:a,sdpMid:c}),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(t)}),t()};if(n.iceCredentials.remote[e.name]&&i.ufrag&&n.iceCredentials.remote[e.name].ufrag!==i.ufrag)if(u){u.transport.ufrag=i.ufrag,u.transport.pwd=i.pwd;var f={type:"offer",jingle:n.remoteDescription};f.sdp=o.toSessionSDP(f.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.pc.setRemoteDescription(new RTCSessionDescription(f),function(){l()},function(e){n.emit("error",e)})}else n.emit("error","ice restart failed to find matching content");else l()})}else{if(e.candidate&&0!==e.candidate.candidate.indexOf("a=")&&(e.candidate.candidate="a="+e.candidate.candidate),this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(e.candidate),t();n.pc.addIceCandidate(new RTCIceCandidate(e.candidate),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate.candidate),t()}},r.prototype.offer=function(e,t){var n=this,r=2===arguments.length,i=r&&e?e:{offerToReceiveAudio:1,offerToReceiveVideo:1};if(t=r?t:e,t=t||function(){},"closed"===this.pc.signalingState)return t("Already closed");this.pc.createOffer(function(e){var r={type:"offer",sdp:e.sdp};n.assumeSetLocalSuccess&&(n.emit("offer",r),t(null,r)),n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){var i;n.config.useJingle&&(i=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),i.sid=n.config.sid,n.localDescription=i,i.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.local[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),r.jingle=i),r.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),n.assumeSetLocalSuccess||(n.emit("offer",r),t(null,r))},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},i)},r.prototype.handleOffer=function(e,t){t=t||function(){};var n=this;if(e.type="offer",e.jingle){if(this.enableChromeNativeSimulcast&&e.jingle.contents.forEach(function(e){"video"===e.name&&(e.application.googConferenceFlag=!0)}),this.enableMultiStreamHacks&&e.jingle.contents.forEach(function(e){if("video"===e.name){var t=e.application.sources||[];0!==t.length&&"3735928559"===t[0].ssrc||(t.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),e.application.sources=t)}}),n.restrictBandwidth>0&&e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name){var r=e.jingle.contents[1];r.application&&r.application.bandwidth&&r.application.bandwidth.bandwidth||(e.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:n.restrictBandwidth.toString()},e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"}))}e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})}),e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle}e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){t()},t)},r.prototype.answerAudioOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}};this._answer(t,e)},r.prototype.answerBroadcastOnly=function(e){var t={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};this._answer(t,e)},r.prototype.answer=function(e,t){var n=2===arguments.length,r=n?t:e,i=n&&e?e:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};this._answer(i,r)},r.prototype.handleAnswer=function(e,t){t=t||function(){};var n=this;e.jingle&&(e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"incoming"}),n.remoteDescription=e.jingle,e.jingle.contents.forEach(function(e){var t=e.transport||{};t.ufrag&&(n.iceCredentials.remote[e.name]={ufrag:t.ufrag,pwd:t.pwd})})),e.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkRemoteCandidate(e)}),n.pc.setRemoteDescription(new RTCSessionDescription(e),function(){n.wtFirefox&&window.setTimeout(function(){n.firefoxcandidatebuffer.forEach(function(e){n.pc.addIceCandidate(new RTCIceCandidate(e),function(){},function(e){n.emit("error",e)}),n._checkRemoteCandidate(e.candidate)}),n.firefoxcandidatebuffer=null},n.wtFirefox),t(null)},t)},r.prototype.close=function(){this.pc.close(),this._localDataChannels=[],this._remoteDataChannels=[],this.emit("close")},r.prototype._answer=function(e,t){t=t||function(){};var n=this;if(!this.pc.remoteDescription)throw new Error("remoteDescription not set");if("closed"===this.pc.signalingState)return t("Already closed");n.pc.createAnswer(function(e){var r=[];if(n.enableChromeNativeSimulcast&&(e.jingle=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"}),e.jingle.contents.length>=2&&"video"===e.jingle.contents[1].name)){var i=e.jingle.contents[1].application.sourceGroups||[],s=!1;if(i.forEach(function(e){"SIM"==e.semantics&&(s=!0)}),!s&&e.jingle.contents[1].application.sources.length){var c=JSON.parse(JSON.stringify(e.jingle.contents[1].application.sources[0]));c.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(c),r.push(e.jingle.contents[1].application.sources[0].ssrc),r.push(c.ssrc),i.push({semantics:"SIM",sources:r});var u=JSON.parse(JSON.stringify(c));u.ssrc=""+Math.floor(4294967295*Math.random()),e.jingle.contents[1].application.sources.push(u),i.push({semantics:"FID",sources:[c.ssrc,u.ssrc]}),e.jingle.contents[1].application.sourceGroups=i,e.sdp=o.toSessionSDP(e.jingle,{sid:n.config.sdpSessionID,role:n._role(),direction:"outgoing"})}}var l={type:"answer",sdp:e.sdp};if(n.assumeSetLocalSuccess){var f=a(l);n.emit("answer",f),t(null,f)}n._candidateBuffer=[],n.pc.setLocalDescription(e,function(){if(n.config.useJingle){var r=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"});r.sid=n.config.sid,n.localDescription=r,l.jingle=r}if(n.enableChromeNativeSimulcast&&(l.jingle||(l.jingle=o.toSessionJSON(e.sdp,{role:n._role(),direction:"outgoing"})),l.jingle.contents[1].application.sources.forEach(function(e,t){e.parameters=e.parameters.map(function(e){return"msid"===e.key&&(e.value+="-"+Math.floor(t/2)),e})}),l.sdp=o.toSessionSDP(l.jingle,{sid:n.sdpSessionID,role:n._role(),direction:"outgoing"})),l.sdp.split("\r\n").forEach(function(e){0===e.indexOf("a=candidate:")&&n._checkLocalCandidate(e)}),!n.assumeSetLocalSuccess){var i=a(l);n.emit("answer",i),t(null,i)}},function(e){n.emit("error",e),t(e)})},function(e){n.emit("error",e),t(e)},e)},r.prototype._onIce=function(e){var t=this;if(e.candidate){if(this.dontSignalCandidates)return;var n=e.candidate,r={candidate:{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex}};this._checkLocalCandidate(n.candidate);var i,s,a=o.toCandidateJSON(n.candidate);if(this.eliminateDuplicateCandidates&&"relay"===a.type&&(i=this._candidateBuffer.filter(function(e){return"relay"===e.type}).map(function(e){return e.foundation+":"+e.component}),(s=i.indexOf(a.foundation+":"+a.component))>-1&&a.priority>>24>=i[s].priority>>24))return;if("max-bundle"===this.config.bundlePolicy&&(i=this._candidateBuffer.filter(function(e){return a.type===e.type}).map(function(e){return e.address+":"+e.port}),(s=i.indexOf(a.address+":"+a.port))>-1))return;if("require"===this.config.rtcpMuxPolicy&&"2"===a.component)return;if(this._candidateBuffer.push(a),t.config.useJingle){if(n.sdpMid||(t.pc.remoteDescription&&"offer"===t.pc.remoteDescription.type?n.sdpMid=t.remoteDescription.contents[n.sdpMLineIndex].name:n.sdpMid=t.localDescription.contents[n.sdpMLineIndex].name),!t.iceCredentials.local[n.sdpMid]){o.toSessionJSON(t.pc.localDescription.sdp,{role:t._role(),direction:"outgoing"}).contents.forEach(function(e){var n=e.transport||{};n.ufrag&&(t.iceCredentials.local[e.name]={ufrag:n.ufrag,pwd:n.pwd})})}if(r.jingle={contents:[{name:n.sdpMid,creator:t._role(),transport:{transportType:"iceUdp",ufrag:t.iceCredentials.local[n.sdpMid].ufrag,pwd:t.iceCredentials.local[n.sdpMid].pwd,candidates:[a]}}]},t.batchIceCandidates>0)return 0===t.batchedIceCandidates.length&&window.setTimeout(function(){var e={};t.batchedIceCandidates.forEach(function(t){t=t.contents[0],e[t.name]||(e[t.name]=t),e[t.name].transport.candidates.push(t.transport.candidates[0])});var n={jingle:{contents:[]}};Object.keys(e).forEach(function(t){n.jingle.contents.push(e[t])}),t.batchedIceCandidates=[],t.emit("ice",n)},t.batchIceCandidates),void t.batchedIceCandidates.push(r.jingle)}this.emit("ice",r)}else this.emit("endOfCandidates")},r.prototype._onDataChannel=function(e){var t=e.channel;this._remoteDataChannels.push(t),this.emit("addChannel",t)},r.prototype.createDataChannel=function(e,t){var n=this.pc.createDataChannel(e,t);return this._localDataChannels.push(n),n},r.prototype.getStats=function(){if("function"!=typeof arguments[0])return this.pc.getStats.apply(this.pc,arguments);var e=arguments[0];this.pc.getStats().then(function(t){e(null,t)},function(t){e(t)})},t.exports=r},{"lodash.clonedeep":139,"sdp-jingle-json":191,util:309,wildemitter:320}],189:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return s(e,t,n)}var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=i),r(s,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:57}],190:[function(e,t,n){(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);var r=this;s(r),r.q=r.c="",r.bufferCheckPosition=n.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=J.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(B)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),g(r,"onready")}function o(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,i=0,o=A.length;i<o;i++){var s=e[A[i]].length;if(s>t)switch(A[i]){case"textNode":v(e);break;case"cdata":m(e,"oncdata",e.cdata),e.cdata="";break;case"script":m(e,"onscript",e.script),e.script="";break;default:b(e,"Max buffer length exceeded: "+A[i])}r=Math.max(r,s)}var a=n.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=a+e.position}function s(e){for(var t=0,n=A.length;t<n;t++)e[A[t]]=""}function a(e){v(e),""!==e.cdata&&(m(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(m(e,"onscript",e.script),e.script="")}function c(e,t){return new u(e,t)}function u(e,t){if(!(this instanceof u))return new u(e,t);P.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,I.forEach(function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})})}function l(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function f(e){return'"'===e||"'"===e}function p(e){return">"===e||l(e)}function h(e,t){return e.test(t)}function d(e,t){return!h(e,t)}function g(e,t,n){e[t]&&e[t](n)}function m(e,t,n){e.textNode&&v(e),g(e,t,n)}function v(e){e.textNode=y(e.opt,e.textNode),e.textNode&&g(e,"ontext",e.textNode),e.textNode=""}function y(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function b(e,t){return v(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,g(e,"onerror",t),e}function _(e){return e.sawRoot&&!e.closedRoot&&w(e,"Unclosed root tag"),e.state!==J.BEGIN&&e.state!==J.BEGIN_WHITESPACE&&e.state!==J.TEXT&&b(e,"Unexpected end"),v(e),e.c="",e.closed=!0,g(e,"onend"),i.call(e,e.strict,e.opt),e}function w(e,t){if("object"!==(void 0===e?"undefined":r(e))||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&b(e,t)}function S(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,m(e,"onopentagstart",n)}function C(e,t){var n=e.indexOf(":"),r=n<0?["",e]:e.split(":"),i=r[0],o=r[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function x(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))return void(e.attribName=e.attribValue="");if(e.opt.xmlns){var t=C(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==L)w(e,"xml: prefix must be bound to "+L+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==N)w(e,"xmlns: prefix must be bound to "+N+"\nActual: "+e.attribValue);else{var i=e.tag,o=e.tags[e.tags.length-1]||e;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,m(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}function E(e,t){if(e.opt.xmlns){var n=e.tag,r=C(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(w(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){m(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],c=a[0],u=a[1],l=C(c,!0),f=l.prefix,p=l.local,h=""===f?"":n.ns[f]||"",d={name:c,value:u,prefix:f,local:p,uri:h};f&&"xmlns"!==f&&!h&&(w(e,"Unbound namespace prefix: "+JSON.stringify(f)),d.uri=f),e.tag.attributes[c]=d,m(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),m(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=J.TEXT:e.state=J.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function k(e){if(!e.tagName)return w(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=J.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=J.SCRIPT);m(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;w(e,"Unexpected close tag")}if(t<0)return w(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=J.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,m(e,"onclosetag",e.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach(function(t){var n=o.ns[t];m(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=J.TEXT}function T(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),i=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),i=t.toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(w(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function j(e,t){"<"===t?(e.state=J.OPEN_WAKA,e.startTagPosition=e.position):l(t)||(w(e,"Non-whitespace before first tag."),e.textNode=t,e.state=J.TEXT)}function R(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function O(e){var t=this;if(this.error)throw this.error;if(t.closed)return b(t,"Cannot write after close. Assign an onready handler.");if(null===e)return _(t);"object"===(void 0===e?"undefined":r(e))&&(e=e.toString());for(var n=0,i="";;){if(i=R(e,n++),t.c=i,!i)break;switch(t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++),t.state){case J.BEGIN:if(t.state=J.BEGIN_WHITESPACE,"\ufeff"===i)continue;j(t,i);continue;case J.BEGIN_WHITESPACE:j(t,i);continue;case J.TEXT:if(t.sawRoot&&!t.closedRoot){for(var s=n-1;i&&"<"!==i&&"&"!==i;)(i=R(e,n++))&&t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(s,n-1)}"<"!==i||t.sawRoot&&t.closedRoot&&!t.strict?(l(i)||t.sawRoot&&!t.closedRoot||w(t,"Text data outside of root node."),"&"===i?t.state=J.TEXT_ENTITY:t.textNode+=i):(t.state=J.OPEN_WAKA,t.startTagPosition=t.position);continue;case J.SCRIPT:"<"===i?t.state=J.SCRIPT_ENDING:t.script+=i;continue;case J.SCRIPT_ENDING:"/"===i?t.state=J.CLOSE_TAG:(t.script+="<"+i,t.state=J.SCRIPT);continue;case J.OPEN_WAKA:if("!"===i)t.state=J.SGML_DECL,t.sgmlDecl="";else if(l(i));else if(h(F,i))t.state=J.OPEN_TAG,t.tagName=i;else if("/"===i)t.state=J.CLOSE_TAG,t.tagName="";else if("?"===i)t.state=J.PROC_INST,t.procInstName=t.procInstBody="";else{if(w(t,"Unencoded <"),t.startTagPosition+1<t.position){var a=t.position-t.startTagPosition;i=new Array(a).join(" ")+i}t.textNode+="<"+i,t.state=J.TEXT}continue;case J.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===D?(m(t,"onopencdata"),t.state=J.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=J.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===M?(t.state=J.DOCTYPE,(t.doctype||t.sawRoot)&&w(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===i?(m(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=J.TEXT):f(i)?(t.state=J.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case J.SGML_DECL_QUOTED:i===t.q&&(t.state=J.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case J.DOCTYPE:">"===i?(t.state=J.TEXT,m(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,"["===i?t.state=J.DOCTYPE_DTD:f(i)&&(t.state=J.DOCTYPE_QUOTED,t.q=i));continue;case J.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=J.DOCTYPE);continue;case J.DOCTYPE_DTD:t.doctype+=i,"]"===i?t.state=J.DOCTYPE:f(i)&&(t.state=J.DOCTYPE_DTD_QUOTED,t.q=i);continue;case J.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=J.DOCTYPE_DTD,t.q="");continue;case J.COMMENT:"-"===i?t.state=J.COMMENT_ENDING:t.comment+=i;continue;case J.COMMENT_ENDING:"-"===i?(t.state=J.COMMENT_ENDED,t.comment=y(t.opt,t.comment),t.comment&&m(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=J.COMMENT);continue;case J.COMMENT_ENDED:">"!==i?(w(t,"Malformed comment"),t.comment+="--"+i,t.state=J.COMMENT):t.state=J.TEXT;continue;case J.CDATA:"]"===i?t.state=J.CDATA_ENDING:t.cdata+=i;continue;case J.CDATA_ENDING:"]"===i?t.state=J.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=J.CDATA);continue;case J.CDATA_ENDING_2:">"===i?(t.cdata&&m(t,"oncdata",t.cdata),m(t,"onclosecdata"),t.cdata="",t.state=J.TEXT):"]"===i?t.cdata+="]":(t.cdata+="]]"+i,t.state=J.CDATA);continue;case J.PROC_INST:"?"===i?t.state=J.PROC_INST_ENDING:l(i)?t.state=J.PROC_INST_BODY:t.procInstName+=i;continue;case J.PROC_INST_BODY:if(!t.procInstBody&&l(i))continue;"?"===i?t.state=J.PROC_INST_ENDING:t.procInstBody+=i;continue;case J.PROC_INST_ENDING:">"===i?(m(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=J.TEXT):(t.procInstBody+="?"+i,t.state=J.PROC_INST_BODY);continue;case J.OPEN_TAG:h(U,i)?t.tagName+=i:(S(t),">"===i?E(t):"/"===i?t.state=J.OPEN_TAG_SLASH:(l(i)||w(t,"Invalid character in tag name"),t.state=J.ATTRIB));continue;case J.OPEN_TAG_SLASH:">"===i?(E(t,!0),k(t)):(w(t,"Forward-slash in opening tag not followed by >"),t.state=J.ATTRIB);continue;case J.ATTRIB:if(l(i))continue;">"===i?E(t):"/"===i?t.state=J.OPEN_TAG_SLASH:h(F,i)?(t.attribName=i,t.attribValue="",t.state=J.ATTRIB_NAME):w(t,"Invalid attribute name");continue;case J.ATTRIB_NAME:"="===i?t.state=J.ATTRIB_VALUE:">"===i?(w(t,"Attribute without value"),t.attribValue=t.attribName,x(t),E(t)):l(i)?t.state=J.ATTRIB_NAME_SAW_WHITE:h(U,i)?t.attribName+=i:w(t,"Invalid attribute name");continue;case J.ATTRIB_NAME_SAW_WHITE:if("="===i)t.state=J.ATTRIB_VALUE;else{if(l(i))continue;w(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",m(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===i?E(t):h(F,i)?(t.attribName=i,t.state=J.ATTRIB_NAME):(w(t,"Invalid attribute name"),t.state=J.ATTRIB)}continue;case J.ATTRIB_VALUE:if(l(i))continue;f(i)?(t.q=i,t.state=J.ATTRIB_VALUE_QUOTED):(w(t,"Unquoted attribute value"),t.state=J.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case J.ATTRIB_VALUE_QUOTED:if(i!==t.q){"&"===i?t.state=J.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}x(t),t.q="",t.state=J.ATTRIB_VALUE_CLOSED;continue;case J.ATTRIB_VALUE_CLOSED:l(i)?t.state=J.ATTRIB:">"===i?E(t):"/"===i?t.state=J.OPEN_TAG_SLASH:h(F,i)?(w(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=J.ATTRIB_NAME):w(t,"Invalid attribute name");continue;case J.ATTRIB_VALUE_UNQUOTED:if(!p(i)){"&"===i?t.state=J.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}x(t),">"===i?E(t):t.state=J.ATTRIB;continue;case J.CLOSE_TAG:if(t.tagName)">"===i?k(t):h(U,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=J.SCRIPT):(l(i)||w(t,"Invalid tagname in closing tag"),t.state=J.CLOSE_TAG_SAW_WHITE);else{if(l(i))continue;d(F,i)?t.script?(t.script+="</"+i,t.state=J.SCRIPT):w(t,"Invalid tagname in closing tag."):t.tagName=i}continue;case J.CLOSE_TAG_SAW_WHITE:if(l(i))continue;">"===i?k(t):w(t,"Invalid characters in closing tag");continue;case J.TEXT_ENTITY:case J.ATTRIB_VALUE_ENTITY_Q:case J.ATTRIB_VALUE_ENTITY_U:var c,u;switch(t.state){case J.TEXT_ENTITY:c=J.TEXT,u="textNode";break;case J.ATTRIB_VALUE_ENTITY_Q:c=J.ATTRIB_VALUE_QUOTED,u="attribValue";break;case J.ATTRIB_VALUE_ENTITY_U:c=J.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===i?(t[u]+=T(t),t.entity="",t.state=c):h(t.entity.length?q:z,i)?t.entity+=i:(w(t,"Invalid character in entity name"),t[u]+="&"+t.entity+i,t.entity="",t.state=c);continue;default:throw new Error(t,"Unknown state: "+t.state)}}return t.position>=t.bufferCheckPosition&&o(t),t}n.parser=function(e,t){return new i(e,t)},n.SAXParser=i,n.SAXStream=u,n.createStream=c,n.MAX_BUFFER_LENGTH=65536;var A=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){_(this)},write:O,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){a(this)}};var P;try{P=e("stream").Stream}catch(e){P=function(){}}var I=n.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});u.prototype=Object.create(P.prototype,{constructor:{value:u}}),u.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},u.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},u.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===I.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),P.prototype.on.call(n,e,t)};var D="[CDATA[",M="DOCTYPE",L="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",B={xml:L,xmlns:N},F=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,z=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,J=0;n.STATE={BEGIN:J++,BEGIN_WHITESPACE:J++,TEXT:J++,TEXT_ENTITY:J++,OPEN_WAKA:J++,SGML_DECL:J++,SGML_DECL_QUOTED:J++,DOCTYPE:J++,DOCTYPE_QUOTED:J++,DOCTYPE_DTD:J++,DOCTYPE_DTD_QUOTED:J++,COMMENT_STARTING:J++,COMMENT:J++,COMMENT_ENDING:J++,COMMENT_ENDED:J++,CDATA:J++,CDATA_ENDING:J++,CDATA_ENDING_2:J++,PROC_INST:J++,
PROC_INST_BODY:J++,PROC_INST_ENDING:J++,OPEN_TAG:J++,OPEN_TAG_SLASH:J++,ATTRIB:J++,ATTRIB_NAME:J++,ATTRIB_NAME_SAW_WHITE:J++,ATTRIB_VALUE:J++,ATTRIB_VALUE_QUOTED:J++,ATTRIB_VALUE_CLOSED:J++,ATTRIB_VALUE_UNQUOTED:J++,ATTRIB_VALUE_ENTITY_Q:J++,ATTRIB_VALUE_ENTITY_U:J++,CLOSE_TAG:J++,CLOSE_TAG_SAW_WHITE:J++,SCRIPT:J++,SCRIPT_ENDING:J++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r});for(var V in n.STATE)n.STATE[n.STATE[V]]=V;J=n.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,r,i=[],o=-1,s=arguments.length;if(!s)return"";for(var a="";++o<s;){var c=Number(arguments[o]);if(!isFinite(c)||c<0||c>1114111||t(c)!==c)throw RangeError("Invalid code point: "+c);c<=65535?i.push(c):(c-=65536,n=55296+(c>>10),r=c%1024+56320,i.push(n,r)),(o+1===s||i.length>16384)&&(a+=e.apply(null,i),i.length=0)}return a};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()}(void 0===n?this.sax={}:n)}).call(this,e("buffer").Buffer)},{buffer:57,stream:223,string_decoder:56}],191:[function(e,t,n){var r=e("./lib/tosdp"),i=e("./lib/tojson");n.toIncomingSDPOffer=function(e){return r.toSessionSDP(e,{role:"responder",direction:"incoming"})},n.toOutgoingSDPOffer=function(e){return r.toSessionSDP(e,{role:"initiator",direction:"outgoing"})},n.toIncomingSDPAnswer=function(e){return r.toSessionSDP(e,{role:"initiator",direction:"incoming"})},n.toOutgoingSDPAnswer=function(e){return r.toSessionSDP(e,{role:"responder",direction:"outgoing"})},n.toIncomingMediaSDPOffer=function(e){return r.toMediaSDP(e,{role:"responder",direction:"incoming"})},n.toOutgoingMediaSDPOffer=function(e){return r.toMediaSDP(e,{role:"initiator",direction:"outgoing"})},n.toIncomingMediaSDPAnswer=function(e){return r.toMediaSDP(e,{role:"initiator",direction:"incoming"})},n.toOutgoingMediaSDPAnswer=function(e){return r.toMediaSDP(e,{role:"responder",direction:"outgoing"})},n.toCandidateSDP=r.toCandidateSDP,n.toMediaSDP=r.toMediaSDP,n.toSessionSDP=r.toSessionSDP,n.toIncomingJSONOffer=function(e,t){return i.toSessionJSON(e,{role:"responder",direction:"incoming",creators:t})},n.toOutgoingJSONOffer=function(e,t){return i.toSessionJSON(e,{role:"initiator",direction:"outgoing",creators:t})},n.toIncomingJSONAnswer=function(e,t){return i.toSessionJSON(e,{role:"initiator",direction:"incoming",creators:t})},n.toOutgoingJSONAnswer=function(e,t){return i.toSessionJSON(e,{role:"responder",direction:"outgoing",creators:t})},n.toIncomingMediaJSONOffer=function(e,t){return i.toMediaJSON(e,{role:"responder",direction:"incoming",creator:t})},n.toOutgoingMediaJSONOffer=function(e,t){return i.toMediaJSON(e,{role:"initiator",direction:"outgoing",creator:t})},n.toIncomingMediaJSONAnswer=function(e,t){return i.toMediaJSON(e,{role:"initiator",direction:"incoming",creator:t})},n.toOutgoingMediaJSONAnswer=function(e,t){return i.toMediaJSON(e,{role:"responder",direction:"outgoing",creator:t})},n.toCandidateJSON=i.toCandidateJSON,n.toMediaJSON=i.toMediaJSON,n.toSessionJSON=i.toSessionJSON},{"./lib/tojson":194,"./lib/tosdp":195}],192:[function(e,t,n){n.lines=function(e){return e.split("\r\n").filter(function(e){return e.length>0})},n.findLine=function(e,t,n){for(var r=e.length,i=0;i<t.length;i++)if(t[i].substr(0,r)===e)return t[i];if(!n)return!1;for(var o=0;o<n.length;o++)if(n[o].substr(0,r)===e)return n[o];return!1},n.findLines=function(e,t,n){for(var r=[],i=e.length,o=0;o<t.length;o++)t[o].substr(0,i)===e&&r.push(t[o]);if(r.length||!n)return r;for(var s=0;s<n.length;s++)n[s].substr(0,i)===e&&r.push(n[s]);return r},n.mline=function(e){for(var t=e.substr(2).split(" "),n={media:t[0],port:t[1],proto:t[2],formats:[]},r=3;r<t.length;r++)t[r]&&n.formats.push(t[r]);return n},n.rtpmap=function(e){var t=e.substr(9).split(" "),n={id:t.shift()};return t=t[0].split("/"),n.name=t[0],n.clockrate=t[1],n.channels=3==t.length?t[2]:"1",n},n.sctpmap=function(e){var t=e.substr(10).split(" ");return{number:t.shift(),protocol:t.shift(),streams:t.shift()}},n.fmtp=function(e){for(var t,n,r,i=e.substr(e.indexOf(" ")+1).split(";"),o=[],s=0;s<i.length;s++)t=i[s].split("="),n=t[0].trim(),r=t[1],n&&r?o.push({key:n,value:r}):n&&o.push({key:"",value:n});return o},n.crypto=function(e){var t=e.substr(9).split(" ");return{tag:t[0],cipherSuite:t[1],keyParams:t[2],sessionParams:t.slice(3).join(" ")}},n.fingerprint=function(e){var t=e.substr(14).split(" ");return{hash:t[0],value:t[1]}},n.extmap=function(e){var t=e.substr(9).split(" "),n={},r=t.shift(),i=r.indexOf("/");return i>=0?(n.id=r.substr(0,i),n.senders=r.substr(i+1)):(n.id=r,n.senders="sendrecv"),n.uri=t.shift()||"",n},n.rtcpfb=function(e){var t=e.substr(10).split(" "),n={};return n.id=t.shift(),n.type=t.shift(),"trr-int"===n.type?n.value=t.shift():n.subtype=t.shift()||"",n.parameters=t,n},n.candidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:t[3],ip:t[4],port:t[5],type:t[7],generation:"0"},r=8;r<t.length;r+=2)"raddr"===t[r]?n.relAddr=t[r+1]:"rport"===t[r]?n.relPort=t[r+1]:"generation"===t[r]?n.generation=t[r+1]:"tcptype"===t[r]&&(n.tcpType=t[r+1]);return n.network="1",n},n.sourceGroups=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].substr(13).split(" ");t.push({semantics:r.shift(),sources:r})}return t},n.sources=function(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r].substr(7).split(" "),o=i.shift();if(!n[o]){var s={ssrc:o,parameters:[]};t.push(s),n[o]=s}i=i.join(" ").split(":");var a=i.shift(),c=i.join(":")||null;n[o].parameters.push({key:a,value:c})}return t},n.groups=function(e){for(var t,n=[],r=0;r<e.length;r++)t=e[r].substr(8).split(" "),n.push({semantics:t.shift(),contents:t});return n},n.bandwidth=function(e){var t=e.substr(2).split(":"),n={};return n.type=t.shift(),n.bandwidth=t.shift(),n},n.msid=function(e){var t=e.substr(7),n=t.split(" ");return{msid:t,mslabel:n[0],label:n[1]}}},{}],193:[function(e,t,n){t.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],194:[function(e,t,n){var r=e("./senders"),i=e("./parsers"),o=Math.random();n._setIdCounter=function(e){o=e},n.toSessionJSON=function(e,t){var r,o=t.creators||[],s=t.role||"initiator",a=t.direction||"outgoing",c=e.split("\r\nm=");for(r=1;r<c.length;r++)c[r]="m="+c[r],r!==c.length-1&&(c[r]+="\r\n");var u=c.shift()+"\r\n",l=i.lines(u),f={},p=[];for(r=0;r<c.length;r++)p.push(n.toMediaJSON(c[r],u,{role:s,direction:a,creator:o[r]||"initiator"}));f.contents=p;var h=i.findLines("a=group:",l);return h.length&&(f.groups=i.groups(h)),f},n.toMediaJSON=function(e,t,o){var s=o.creator||"initiator",a=o.role||"initiator",c=o.direction||"outgoing",u=i.lines(e),l=i.lines(t),f=i.mline(u[0]),p={creator:s,name:f.media,application:{applicationType:"rtp",media:f.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==f.media&&(p.application={applicationType:"datachannel"},p.transport.sctp=[]);var h=p.application,d=p.transport,g=i.findLine("a=mid:",u);if(g&&(p.name=g.substr(6)),i.findLine("a=sendrecv",u,l)?p.senders="both":i.findLine("a=sendonly",u,l)?p.senders=r[a][c].sendonly:i.findLine("a=recvonly",u,l)?p.senders=r[a][c].recvonly:i.findLine("a=inactive",u,l)&&(p.senders="none"),"rtp"==h.applicationType){var m=i.findLine("b=",u);m&&(h.bandwidth=i.bandwidth(m));var v=i.findLine("a=ssrc:",u);v&&(h.ssrc=v.substr(7).split(" ")[0]);i.findLines("a=rtpmap:",u).forEach(function(e){var t=i.rtpmap(e);t.parameters=[],t.feedback=[],i.findLines("a=fmtp:"+t.id,u).forEach(function(e){t.parameters=i.fmtp(e)}),i.findLines("a=rtcp-fb:"+t.id,u).forEach(function(e){t.feedback.push(i.rtcpfb(e))}),h.payloads.push(t)});i.findLines("a=crypto:",u,l).forEach(function(e){h.encryption.push(i.crypto(e))}),i.findLine("a=rtcp-mux",u)&&(h.mux=!0);i.findLines("a=rtcp-fb:*",u).forEach(function(e){h.feedback.push(i.rtcpfb(e))});i.findLines("a=extmap:",u).forEach(function(e){var t=i.extmap(e);t.senders=r[a][c][t.senders],h.headerExtensions.push(t)});var y=i.findLines("a=ssrc-group:",u);h.sourceGroups=i.sourceGroups(y||[]);var b=i.findLines("a=ssrc:",u),_=h.sources=i.sources(b||[]),w=i.findLine("a=msid:",u);if(w){var S=i.msid(w);["msid","mslabel","label"].forEach(function(e){for(var t=0;t<_.length;t++){for(var n=!1,r=0;r<_[t].parameters.length;r++)_[t].parameters[r].key===e&&(n=!0);n||_[t].parameters.push({key:e,value:S[e]})}})}i.findLine("a=x-google-flag:conference",u,l)&&(h.googConferenceFlag=!0)}var C=i.findLines("a=fingerprint:",u,l),x=i.findLine("a=setup:",u,l);C.forEach(function(e){var t=i.fingerprint(e);x&&(t.setup=x.substr(8)),d.fingerprints.push(t)});var E=i.findLine("a=ice-ufrag:",u,l),k=i.findLine("a=ice-pwd:",u,l);if(E&&k){d.ufrag=E.substr(12),d.pwd=k.substr(10),d.candidates=[];i.findLines("a=candidate:",u,l).forEach(function(e){d.candidates.push(n.toCandidateJSON(e))})}if("datachannel"==h.applicationType){i.findLines("a=sctpmap:",u).forEach(function(e){var t=i.sctpmap(e);d.sctp.push(t)})}return p},n.toCandidateJSON=function(e){var t=i.candidate(e.split("\r\n")[0]);return t.id=(o++).toString(36).substr(0,12),t}},{"./parsers":192,"./senders":193}],195:[function(e,t,n){var r=e("./senders");n.toSessionSDP=function(e,t){var r=(t.role,t.direction,t.sid||e.sid||Date.now()),i=t.time||Date.now(),o=["v=0","o=- "+r+" "+i+" IN IP4 0.0.0.0","s=-","t=0 0"],s=e.contents||[],a=!1;return s.forEach(function(e){e.application.sources&&e.application.sources.length&&(a=!0)}),a&&o.push("a=msid-semantic: WMS *"),(e.groups||[]).forEach(function(e){o.push("a=group:"+e.semantics+" "+e.contents.join(" "))}),s.forEach(function(e){o.push(n.toMediaSDP(e,t))}),o.join("\r\n")+"\r\n"},n.toMediaSDP=function(e,t){var i=[],o=t.role||"initiator",s=t.direction||"outgoing",a=e.application,c=e.transport,u=a.payloads||[],l=c&&c.fingerprints||[],f=[];if("datachannel"==a.applicationType?(f.push("application"),f.push("1"),f.push("DTLS/SCTP"),c.sctp&&c.sctp.forEach(function(e){f.push(e.number)})):(f.push(a.media),f.push("1"),l.length>0?f.push("UDP/TLS/RTP/SAVPF"):a.encryption&&a.encryption.length>0?f.push("RTP/SAVPF"):f.push("RTP/AVPF"),u.forEach(function(e){f.push(e.id)})),i.push("m="+f.join(" ")),i.push("c=IN IP4 0.0.0.0"),a.bandwidth&&a.bandwidth.type&&a.bandwidth.bandwidth&&i.push("b="+a.bandwidth.type+":"+a.bandwidth.bandwidth),"rtp"==a.applicationType&&i.push("a=rtcp:1 IN IP4 0.0.0.0"),c){c.ufrag&&i.push("a=ice-ufrag:"+c.ufrag),c.pwd&&i.push("a=ice-pwd:"+c.pwd);l.forEach(function(e){i.push("a=fingerprint:"+e.hash+" "+e.value),e.setup&&i.push("a=setup:"+e.setup)}),c.sctp&&c.sctp.forEach(function(e){i.push("a=sctpmap:"+e.number+" "+e.protocol+" "+e.streams)})}return"rtp"==a.applicationType&&i.push("a="+(r[o][s][e.senders]||"sendrecv")),i.push("a=mid:"+e.name),a.sources&&a.sources.length&&(a.sources[0].parameters||[]).forEach(function(e){"msid"===e.key&&i.push("a=msid:"+e.value)}),a.mux&&i.push("a=rtcp-mux"),(a.encryption||[]).forEach(function(e){i.push("a=crypto:"+e.tag+" "+e.cipherSuite+" "+e.keyParams+(e.sessionParams?" "+e.sessionParams:""))}),a.googConferenceFlag&&i.push("a=x-google-flag:conference"),u.forEach(function(e){var t="a=rtpmap:"+e.id+" "+e.name+"/"+e.clockrate;if(e.channels&&"1"!=e.channels&&(t+="/"+e.channels),i.push(t),e.parameters&&e.parameters.length){var n=["a=fmtp:"+e.id],r=[];e.parameters.forEach(function(e){r.push((e.key?e.key+"=":"")+e.value)}),n.push(r.join(";")),i.push(n.join(" "))}e.feedback&&e.feedback.forEach(function(t){"trr-int"===t.type?i.push("a=rtcp-fb:"+e.id+" trr-int "+(t.value?t.value:"0")):i.push("a=rtcp-fb:"+e.id+" "+t.type+(t.subtype?" "+t.subtype:""))})}),a.feedback&&a.feedback.forEach(function(e){"trr-int"===e.type?i.push("a=rtcp-fb:* trr-int "+(e.value?e.value:"0")):i.push("a=rtcp-fb:* "+e.type+(e.subtype?" "+e.subtype:""))}),(a.headerExtensions||[]).forEach(function(e){i.push("a=extmap:"+e.id+(e.senders?"/"+r[o][s][e.senders]:"")+" "+e.uri)}),(a.sourceGroups||[]).forEach(function(e){i.push("a=ssrc-group:"+e.semantics+" "+e.sources.join(" "))}),(a.sources||[]).forEach(function(e){for(var t=0;t<e.parameters.length;t++){var n=e.parameters[t];i.push("a=ssrc:"+(e.ssrc||a.ssrc)+" "+n.key+(n.value?":"+n.value:""))}}),(c.candidates||[]).forEach(function(e){i.push(n.toCandidateSDP(e))}),i.join("\r\n")},n.toCandidateSDP=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"srflx"!==n&&"prflx"!==n&&"relay"!==n||e.relAddr&&e.relPort&&(t.push("raddr"),t.push(e.relAddr),t.push("rport"),t.push(e.relPort)),e.tcpType&&"TCP"==e.protocol.toUpperCase()&&(t.push("tcptype"),t.push(e.tcpType)),t.push("generation"),t.push(e.generation||"0"),"a=candidate:"+t.join(" ")}},{"./senders":193}],196:[function(e,t,n){"use strict";var r={};r.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return n=n.concat(r.splitLines(t)),{usernameFragment:n.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var s=i[o],a=r.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){var c=r.parseRtpMap(a),u=r.matchPrefix(e,"a=fmtp:"+s+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};n.push(r),o&&(r=JSON.parse(JSON.stringify(r)),r.fec={ssrc:t,mechanism:s?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(0===l[0].indexOf("b=TIAS:")?l=parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")&&(l=parseInt(l[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=l})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?(t=i[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.exports=r},{}],197:[function(t,n,r){(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){"use strict";function s(e){var n={capacity:e||1,current:0,queue:[],firstHere:!1,take:function(){if(!1===n.firstHere){n.current++,n.firstHere=!0;var e=1}else var e=0;var t={n:1};"function"==typeof arguments[0]?t.task=arguments[0]:t.n=arguments[0],arguments.length>=2&&("function"==typeof arguments[1]?t.task=arguments[1]:t.n=arguments[1]);var r=t.task;if(t.task=function(){r(n.leave)},n.current+t.n-e>n.capacity)return 1===e&&(n.current--,n.firstHere=!1),n.queue.push(t);n.current+=t.n-e,t.task(n.leave),1===e&&(n.firstHere=!1)},leave:function(e){if(e=e||1,n.current-=e,n.queue.length){var r=n.queue[0];r.n+n.current>n.capacity||(n.queue.shift(),n.current+=r.n,void 0!==t&&t&&"function"==typeof t.nextTick?t.nextTick(r.task):setTimeout(r.task,0))}else if(n.current<0)throw new Error("leave called too many times.")}};return n}"object"===(void 0===r?"undefined":i(r))?n.exports=s:"function"==typeof e&&e.amd?e(function(){return s}):o.semaphore=s}(this)}).call(this,t("_process"))},{_process:168}],198:[function(e,t,n){(function(e){function n(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}n.prototype.update=function(t,n){"string"==typeof t&&(n=n||"utf8",t=new e(t,n));for(var r=this._len+=t.length,i=this._s||0,o=0,s=this._block;i<r;){for(var a=Math.min(t.length,o+this._blockSize-i%this._blockSize),c=a-o,u=0;u<c;u++)s[i%this._blockSize+u]=t[u+o];i+=c,o+=c,i%this._blockSize==0&&this._update(s)}return this._s=i,this},n.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n}).call(this,e("buffer").Buffer)},{buffer:57}],199:[function(e,t,n){var n=t.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":200,"./sha1":201,"./sha224":202,"./sha256":203,"./sha384":204,"./sha512":205}],200:[function(e,t,n){(function(n){function r(){this.init(),this._w=l,c.call(this,64,56)}function i(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function s(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}var a=e("inherits"),c=e("./hash"),u=[1518500249,1859775393,-1894007588,-899497514],l=new Array(80);a(r,c),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,a=0|this._c,c=0|this._d,l=0|this._e,f=0;f<16;++f)t[f]=e.readInt32BE(4*f);for(;f<80;++f)t[f]=t[f-3]^t[f-8]^t[f-14]^t[f-16];for(var p=0;p<80;++p){var h=~~(p/20),d=i(n)+s(h,r,a,c)+l+t[p]+u[h]|0;l=c,c=a,a=o(r),r=n,n=d}this._a=n+this._a|0,this._b=r+this._b|0,this._c=a+this._c|0,this._d=c+this._d|0,this._e=l+this._e|0},r.prototype._hash=function(){var e=new n(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./hash":198,buffer:57,inherits:98}],201:[function(e,t,n){(function(n){function r(){this.init(),this._w=f,u.call(this,64,56)}function i(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function s(e){return e<<30|e>>>2}function a(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}var c=e("inherits"),u=e("./hash"),l=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);c(r,u),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,c=0|this._c,u=0|this._d,f=0|this._e,p=0;p<16;++p)t[p]=e.readInt32BE(4*p);for(;p<80;++p)t[p]=i(t[p-3]^t[p-8]^t[p-14]^t[p-16]);for(var h=0;h<80;++h){var d=~~(h/20),g=o(n)+a(d,r,c,u)+f+t[h]+l[d]|0;f=u,u=c,c=s(r),r=n,n=g}this._a=n+this._a|0,this._b=r+this._b|0,this._c=c+this._c|0,this._d=u+this._d|0,this._e=f+this._e|0},r.prototype._hash=function(){var e=new n(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./hash":198,buffer:57,inherits:98}],202:[function(e,t,n){(function(n){function r(){this.init(),this._w=a,s.call(this,64,56)}var i=e("inherits"),o=e("./sha256"),s=e("./hash"),a=new Array(64);i(r,o),r.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},r.prototype._hash=function(){var e=new n(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./hash":198,"./sha256":203,buffer:57,inherits:98}],203:[function(e,t,n){(function(n){function r(){this.init(),this._w=h,f.call(this,64,56)}function i(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function s(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function a(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function c(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function u(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var l=e("inherits"),f=e("./hash"),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=new Array(64);l(r,f),r.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._a,r=0|this._b,l=0|this._c,f=0|this._d,h=0|this._e,d=0|this._f,g=0|this._g,m=0|this._h,v=0;v<16;++v)t[v]=e.readInt32BE(4*v);for(;v<64;++v)t[v]=u(t[v-2])+t[v-7]+c(t[v-15])+t[v-16]|0;for(var y=0;y<64;++y){var b=m+a(h)+i(h,d,g)+p[y]+t[y]|0,_=s(n)+o(n,r,l)|0;m=g,g=d,d=h,h=f+b|0,f=l,l=r,r=n,n=b+_|0}this._a=n+this._a|0,this._b=r+this._b|0,this._c=l+this._c|0,this._d=f+this._d|0,this._e=h+this._e|0,this._f=d+this._f|0,this._g=g+this._g|0,this._h=m+this._h|0},r.prototype._hash=function(){var e=new n(32);return e.writeInt32BE(this._a,0),
e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./hash":198,buffer:57,inherits:98}],204:[function(e,t,n){(function(n){function r(){this.init(),this._w=a,s.call(this,128,112)}var i=e("inherits"),o=e("./sha512"),s=e("./hash"),a=new Array(160);i(r,o),r.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},r.prototype._hash=function(){function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}var t=new n(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=r}).call(this,e("buffer").Buffer)},{"./hash":198,"./sha512":205,buffer:57,inherits:98}],205:[function(e,t,n){(function(n){function r(){this.init(),this._w=m,d.call(this,128,112)}function i(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function s(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function a(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function c(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function u(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function l(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function p(e,t){return e>>>0<t>>>0?1:0}var h=e("inherits"),d=e("./hash"),g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],m=new Array(160);h(r,d),r.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},r.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,h=0|this._ch,d=0|this._dh,m=0|this._eh,v=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,w=0|this._bl,S=0|this._cl,C=0|this._dl,x=0|this._el,E=0|this._fl,k=0|this._gl,T=0|this._hl,j=0;j<32;j+=2)t[j]=e.readInt32BE(4*j),t[j+1]=e.readInt32BE(4*j+4);for(;j<160;j+=2){var R=t[j-30],O=t[j-30+1],A=c(R,O),P=u(O,R);R=t[j-4],O=t[j-4+1];var I=l(R,O),D=f(O,R),M=t[j-14],L=t[j-14+1],N=t[j-32],B=t[j-32+1],F=P+L|0,U=A+M+p(F,P)|0;F=F+D|0,U=U+I+p(F,D)|0,F=F+B|0,U=U+N+p(F,B)|0,t[j]=U,t[j+1]=F}for(var z=0;z<160;z+=2){U=t[z],F=t[z+1];var q=o(n,r,h),J=o(_,w,S),V=s(n,_),G=s(_,n),H=a(m,x),W=a(x,m),X=g[z],$=g[z+1],Y=i(m,v,y),Q=i(x,E,k),K=T+W|0,Z=b+H+p(K,T)|0;K=K+Q|0,Z=Z+Y+p(K,Q)|0,K=K+$|0,Z=Z+X+p(K,$)|0,K=K+F|0,Z=Z+U+p(K,F)|0;var ee=G+J|0,te=V+q+p(ee,G)|0;b=y,T=k,y=v,k=E,v=m,E=x,x=C+K|0,m=d+Z+p(x,C)|0,d=h,C=S,h=r,S=w,r=n,w=_,_=K+ee|0,n=Z+te+p(_,K)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+S|0,this._dl=this._dl+C|0,this._el=this._el+x|0,this._fl=this._fl+E|0,this._gl=this._gl+k|0,this._hl=this._hl+T|0,this._ah=this._ah+n+p(this._al,_)|0,this._bh=this._bh+r+p(this._bl,w)|0,this._ch=this._ch+h+p(this._cl,S)|0,this._dh=this._dh+d+p(this._dl,C)|0,this._eh=this._eh+m+p(this._el,x)|0,this._fh=this._fh+v+p(this._fl,E)|0,this._gh=this._gh+y+p(this._gl,k)|0,this._hh=this._hh+b+p(this._hl,T)|0},r.prototype._hash=function(){function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}var t=new n(64);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=r}).call(this,e("buffer").Buffer)},{"./hash":198,buffer:57,inherits:98}],206:[function(e,t,n){function r(e,t){if(!(this instanceof r))return new r(e,t);e&&"object"===(void 0===e?"undefined":i(e))&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("engine.io-client"),s=e("./socket"),a=e("component-emitter"),c=e("socket.io-parser"),u=e("./on"),l=e("component-bind"),f=e("debug")("socket.io-client:manager"),p=e("indexof"),h=e("backo2"),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},r.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},r.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},r.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(e,t){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=o(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=u(n,"open",function(){r.onopen(),e&&e()}),s=u(n,"error",function(t){if(f("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;f("connect attempt will timeout after %d",a);var c=setTimeout(function(){f("connect attempt timed out after %d",a),i.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(i),this.subs.push(s),this},r.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",l(this,"ondata"))),this.subs.push(u(e,"ping",l(this,"onping"))),this.subs.push(u(e,"pong",l(this,"onpong"))),this.subs.push(u(e,"error",l(this,"onerror"))),this.subs.push(u(e,"close",l(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",l(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(e){this.decoder.add(e)},r.prototype.ondecoded=function(e){this.emit("packet",e)},r.prototype.onerror=function(e){f("error",e),this.emitAll("error",e)},r.prototype.socket=function(e,t){function n(){~p(i.connecting,r)||i.connecting.push(r)}var r=this.nsps[e];if(!r){r=new s(this,e,t),this.nsps[e]=r;var i=this;r.on("connecting",n),r.on("connect",function(){r.id=i.engine.id}),this.autoConnect&&n()}return r},r.prototype.destroy=function(e){var t=p(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},r.prototype.packet=function(e){f("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},r.prototype.cleanup=function(){f("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(e){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();f("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(f("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(f("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(f("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":207,"./socket":208,backo2:43,"component-bind":59,"component-emitter":210,debug:211,"engine.io-client":70,indexof:97,"socket.io-parser":215}],207:[function(e,t,n){function r(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=r},{}],208:[function(e,t,n){function r(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var i=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:socket"),l=e("has-binary");t.exports=r;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",c(this,"onopen")),a(e,"packet",c(this,"onpacket")),a(e,"close",c(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},r.prototype.emit=function(e){if(f.hasOwnProperty(e))return p.apply(this,arguments),this;var t=s(arguments),n=i.EVENT;l(t)&&(n=i.BINARY_EVENT);var r={type:n,data:t};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},r.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:i.CONNECT,query:this.query}):this.packet({type:i.CONNECT}))},r.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},r.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},r.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},r.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);u("sending ack %j",r);var o=l(r)?i.BINARY_ACK:i.ACK;t.packet({type:o,id:e,data:r})}}},r.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":207,"component-bind":59,"component-emitter":210,debug:211,"has-binary":90,"socket.io-parser":215,"to-array":225}],209:[function(e,t,n){(function(n){function r(e,t){var r=e;t=t||n.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=i(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=-1!==r.host.indexOf(":"),a=s?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}var i=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:211,parseuri:166}],210:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],211:[function(e,t,n){arguments[4][81][0].apply(n,arguments)},{"./debug":212,_process:168,dup:81}],212:[function(e,t,n){arguments[4][82][0].apply(n,arguments)},{dup:82,ms:213}],213:[function(e,t,n){arguments[4][83][0].apply(n,arguments)},{dup:83}],214:[function(e,t,n){(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("isarray"),o=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(o(e)){var s={_placeholder:!0,num:n.length};return n.push(e),s}if(i(e)){for(var a=new Array(e.length),c=0;c<e.length;c++)a[c]=t(e[c]);return a}if("object"==(void 0===e?"undefined":r(e))&&!(e instanceof Date)){var a={};for(var u in e)a[u]=t(e[u]);return a}return e}var n=[],s=e.data,a=e;return a.data=t(s),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){return t[e.num]}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==(void 0===e?"undefined":r(e))){for(var s in e)e[s]=n(e[s]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function s(e,u,l){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var f=new FileReader;f.onload=function(){l?l[u]=this.result:c=this.result,--a||n(c)},f.readAsArrayBuffer(e)}else if(i(e))for(var p=0;p<e.length;p++)s(e[p],p,e);else if(e&&"object"==(void 0===e?"undefined":r(e))&&!o(e))for(var h in e)s(e[h],h,e)}var a=0,c=e;s(c),a||n(c)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":216,isarray:219}],215:[function(e,t,n){function r(){}function i(e){var t="",r=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(r=!0,t+=e.nsp),null!=e.id&&(r&&(t+=",",r=!1),t+=e.id),null!=e.data&&(r&&(t+=","),t+=p.stringify(e.data)),f("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=d.deconstructPacket(e),r=i(n.packet),o=n.buffers;o.unshift(r),t(o)}d.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var t={},r=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return l();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var i="";"-"!=e.charAt(++r)&&(i+=e.charAt(r),r!=e.length););if(i!=Number(i)||"-"!=e.charAt(r))throw new Error("Illegal attachments");t.attachments=Number(i)}if("/"==e.charAt(r+1))for(t.nsp="";++r;){var o=e.charAt(r);if(","==o)break;if(t.nsp+=o,r==e.length)break}else t.nsp="/";var s=e.charAt(r+1);if(""!==s&&Number(s)==s){for(t.id="";++r;){var o=e.charAt(r);if(null==o||Number(o)!=o){--r;break}if(t.id+=e.charAt(r),r==e.length)break}t.id=Number(t.id)}return e.charAt(++r)&&(t=c(t,e.substr(r))),f("decoded %s as %j",e,t),t}function c(e,t){try{e.data=p.parse(t)}catch(e){return l()}return e}function u(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:n.ERROR,data:"parser error"}}var f=e("debug")("socket.io-parser"),p=e("json3"),h=e("component-emitter"),d=e("./binary"),g=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=s,r.prototype.encode=function(e,t){if(f("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{t([i(e)])}},h(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new u(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!g(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":214,"./is-buffer":216,"component-emitter":60,debug:217,json3:121}],216:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],217:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"===("undefined"==typeof console?"undefined":c(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}}function a(){var e;try{e=n.storage.debug}catch(e){}return e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=t.exports=e("./debug"),n.log=o,n.formatArgs=i,n.save=s,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":218}],218:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s)),(i.log||n.log||console.log.bind(console)).apply(e,s)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,l=0},{ms:220}],219:[function(e,t,n){arguments[4][91][0].apply(n,arguments)},{dup:91}],220:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=c?Math.round(e/c)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,l,"day")||s(e,u,"hour")||s(e,c,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,c=60*a,u=60*c,l=24*u,f=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t.long?o(e):i(e)}},{}],221:[function(e,t,n){"use strict";function r(e,t,n){function r(e){return function(){var r=this.xhr.getResponseHeader(t);null!=r&&(n&&s?s.io.engine.transport.query[a]=s.io.engine.query[a]=r:(i("setting header %s to %s",t,r),null==e.extraHeaders&&(e.extraHeaders={}),e.extraHeaders[t]=r))}}if(!o){null==t&&(t="Session-Id");var a=t.replace(new RegExp("-","g"),"");if(null==e||"function"!=typeof e)throw new Error('Please provide XHR function constructor ie require("engine.io-client/lib/transports/polling-xhr"');var c=e.Request,u=e.prototype.request;if(null==u)throw new Error("XHR.prototype.request is not set");var l=c.prototype.onLoad;if(null==l)throw new Error("Request.prototype.onLoad is not set");c.prototype.onLoad=function(){this.emit("onLoad"),l.call(this)},e.prototype.request=function(e){var t=u.call(this,e);return t.once("onLoad",r(this)),t},o=!0}}var i=e("debug")("engine.io-sticky-headers"),o=!1,s=null;r.setSocket=function(e){s=e},t.exports=r},{debug:68}],222:[function(t,n,r){!function(){"use strict";function t(e){return i(o(e),arguments)}function n(e,n){return t.apply(null,[e].concat(n||[]))}function i(e,n){var r,i,o,a,c,u,l,f,p,h=1,d=e.length,g="";for(i=0;i<d;i++)if("string"==typeof e[i])g+=e[i];else if(Array.isArray(e[i])){if(a=e[i],a[2])for(r=n[h],o=0;o<a[2].length;o++){if(!r.hasOwnProperty(a[2][o]))throw new Error(t('[sprintf] property "%s" does not exist',a[2][o]));r=r[a[2][o]]}else r=a[1]?n[a[1]]:n[h++];if(s.not_type.test(a[8])&&s.not_primitive.test(a[8])&&r instanceof Function&&(r=r()),s.numeric_arg.test(a[8])&&"number"!=typeof r&&isNaN(r))throw new TypeError(t("[sprintf] expecting number but found %T",r));switch(s.number.test(a[8])&&(f=r>=0),a[8]){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,a[6]?parseInt(a[6]):0);break;case"e":r=a[7]?parseFloat(r).toExponential(a[7]):parseFloat(r).toExponential();break;case"f":r=a[7]?parseFloat(r).toFixed(a[7]):parseFloat(r);break;case"g":r=a[7]?String(Number(r.toPrecision(a[7]))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=a[7]?r.substring(0,a[7]):r;break;case"t":r=String(!!r),r=a[7]?r.substring(0,a[7]):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=a[7]?r.substring(0,a[7]):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=a[7]?r.substring(0,a[7]):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}s.json.test(a[8])?g+=r:(!s.number.test(a[8])||f&&!a[3]?p="":(p=f?"+":"-",r=r.toString().replace(s.sign,"")),u=a[4]?"0"===a[4]?"0":a[4].charAt(1):" ",l=a[6]-(p+r).length,c=a[6]&&l>0?u.repeat(l):"",g+=a[5]?p+r+c:"0"===u?p+c+r:c+p+r)}return g}function o(e){if(a[e])return a[e];for(var t,n=e,r=[],i=0;n;){if(null!==(t=s.text.exec(n)))r.push(t[0]);else if(null!==(t=s.modulo.exec(n)))r.push("%");else{if(null===(t=s.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var o=[],c=t[2],u=[];if(null===(u=s.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(u[1]);""!==(c=c.substring(u[0].length));)if(null!==(u=s.key_access.exec(c)))o.push(u[1]);else{if(null===(u=s.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(u[1])}t[2]=o}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return a[e]=r}var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},a=Object.create(null);void 0!==r&&(r.sprintf=t,r.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=n,"function"==typeof e&&e.amd&&e(function(){return{sprintf:t,vsprintf:n}}))}()},{}],223:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter;e("inherits")(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function r(){u.readable&&u.resume&&u.resume()}function o(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){u.removeListener("data",n),e.removeListener("drain",r),u.removeListener("end",o),u.removeListener("close",s),u.removeListener("error",a),e.removeListener("error",a),u.removeListener("end",c),u.removeListener("close",c),e.removeListener("close",c)}var u=this;u.on("data",n),e.on("drain",r),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",s));var l=!1;return u.on("error",a),e.on("error",a),u.on("end",c),u.on("close",c),e.on("close",c),e.emit("pipe",u),e}},{events:86,inherits:98,"readable-stream/duplex.js":170,"readable-stream/passthrough.js":179,"readable-stream/readable.js":180,"readable-stream/transform.js":181,"readable-stream/writable.js":182}],224:[function(e,t,n){"use strict";function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=r(e);if("string"!=typeof t&&(y.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=p,this.end=h,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=d,this.end=g,t=3;break;default:return this.write=m,void(this.end=v)}
this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n?0:(i=s(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0)}function c(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(n+2)}}function u(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var n=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t}function p(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function m(e){return e.toString(this.encoding)}function v(e){return e&&e.length?this.write(e):""}var y=e("safe-buffer").Buffer,b=y.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=f,o.prototype.text=l,o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":189}],225:[function(e,t,n){function r(e,t){var n=[];t=t||0;for(var r=t||0;r<e.length;r++)n[r-t]=e[r];return n}t.exports=r},{}],226:[function(e,t,n){function r(e){return{type:e.type,sdp:e.sdp}}function i(e){var t={label:e.id};return e.getAudioTracks().length&&(t.audio=e.getAudioTracks().map(function(e){return e.id})),e.getVideoTracks().length&&(t.video=e.getVideoTracks().map(function(e){return e.id})),t}function o(e,t){var n=this;a.call(this),this.peerconnection=new window.RTCPeerConnection(e,t),this.trace=function(e,t){n.emit("PeerConnectionTrace",{time:new Date,type:e,value:t||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){n.trace("onicecandidate",e.candidate),null!==n.onicecandidate&&n.onicecandidate(e)},this.onaddstream=null,this.peerconnection.onaddstream=function(e){n.trace("onaddstream",i(e.stream)),null!==n.onaddstream&&n.onaddstream(e)},this.onremovestream=null,this.peerconnection.onremovestream=function(e){n.trace("onremovestream",i(e.stream)),null!==n.onremovestream&&n.onremovestream(e)},this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){n.trace("onsignalingstatechange",n.signalingState),null!==n.onsignalingstatechange&&n.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){n.trace("oniceconnectionstatechange",n.iceConnectionState),null!==n.oniceconnectionstatechange&&n.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){n.trace("onnegotiationneeded"),null!==n.onnegotiationneeded&&n.onnegotiationneeded(e)},n.ondatachannel=null,this.peerconnection.ondatachannel=function(e){n.trace("ondatachannel",e),null!==n.ondatachannel&&n.ondatachannel(e)},this.getLocalStreams=this.peerconnection.getLocalStreams.bind(this.peerconnection),this.getRemoteStreams=this.peerconnection.getRemoteStreams.bind(this.peerconnection)}var s=e("util"),a=(e("webrtc-adapter"),e("wildemitter"));s.inherits(o,a),["signalingState","iceConnectionState","localDescription","remoteDescription"].forEach(function(e){Object.defineProperty(o.prototype,e,{get:function(){return this.peerconnection[e]}})}),o.prototype.addStream=function(e){this.trace("addStream",i(e)),this.peerconnection.addStream(e)},o.prototype.removeStream=function(e){this.trace("removeStream",i(e)),this.peerconnection.removeStream(e)},o.prototype.createDataChannel=function(e,t){return this.trace("createDataChannel",e,t),this.peerconnection.createDataChannel(e,t)},o.prototype.setLocalDescription=function(e,t,n){var i=this;return this.trace("setLocalDescription",r(e)),this.peerconnection.setLocalDescription(e).then(function(){i.trace("setLocalDescriptionOnSuccess"),t&&t()},function(e){i.trace("setLocalDescriptionOnFailure",e),n&&n(e)})},o.prototype.setRemoteDescription=function(e,t,n){var i=this;return this.trace("setRemoteDescription",r(e)),this.peerconnection.setRemoteDescription(e).then(function(){i.trace("setRemoteDescriptionOnSuccess"),t&&t()},function(e){i.trace("setRemoteDescriptionOnFailure",e),n&&n(e)})},o.prototype.close=function(){this.trace("stop"),"closed"!=this.peerconnection.signalingState&&this.peerconnection.close()},o.prototype.createOffer=function(e,t,n){var i=this;return this.trace("createOffer",n),this.peerconnection.createOffer(n).then(function(t){i.trace("createOfferOnSuccess",r(t)),e&&e(t)},function(e){i.trace("createOfferOnFailure",e),t&&t(e)})},o.prototype.createAnswer=function(e,t,n){var i=this;return this.trace("createAnswer",n),this.peerconnection.createAnswer(n).then(function(t){i.trace("createAnswerOnSuccess",r(t)),e&&e(t)},function(e){i.trace("createAnswerOnFailure",e),t&&t(e)})},o.prototype.addIceCandidate=function(e,t,n){var r=this;return this.trace("addIceCandidate",e),this.peerconnection.addIceCandidate(e).then(function(){t&&t()},function(e){r.trace("addIceCandidateOnFailure",e),n&&n(e)})},o.prototype.getStats=function(){this.peerconnection.getStats.apply(this.peerconnection,arguments)},t.exports=o},{util:309,"webrtc-adapter":227,wildemitter:320}],227:[function(e,t,n){"use strict";!function(){var n=e("./utils").log,r=e("./utils").browserDetails;t.exports.browserDetails=r,t.exports.extractVersion=e("./utils").extractVersion,t.exports.disableLog=e("./utils").disableLog;var i=e("./chrome/chrome_shim")||null,o=e("./edge/edge_shim")||null,s=e("./firefox/firefox_shim")||null,a=e("./safari/safari_shim")||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!s||!s.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.exports.browserShim=s,s.shimGetUserMedia(),s.shimSourceObject(),s.shimPeerConnection(),s.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!a)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.exports.browserShim=a,a.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":228,"./edge/edge_shim":230,"./firefox/firefox_shim":232,"./safari/safari_shim":234,"./utils":235}],228:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils.js").log,o=e("../utils.js").browserDetails,s={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!==("undefined"==typeof window?"undefined":r(window))||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===("undefined"==typeof window?"undefined":r(window))&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;if(this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),!e)return void(this.src="");this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){i("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),o=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=this,s=arguments;if(arguments.length>0&&"function"==typeof e)return o(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},c=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var u=function(e){s[1](c(a(e)))};return o.apply(this,[u,arguments[0]])}return new Promise(function(t,n){1===s.length&&"object"===(void 0===e?"undefined":r(e))?o.apply(i,[function(e){t(c(a(e)))},n]):o.apply(i,[function(e){t(c(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===r(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),o.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)},["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}})},attachMediaStream:function(e,t){i("DEPRECATED, attachMediaStream will soon be removed."),o.version>=43?e.srcObject=t:void 0!==e.src?e.src=URL.createObjectURL(t):i("Error attaching stream to element.")},reattachMediaStream:function(e,t){i("DEPRECATED, reattachMediaStream will soon be removed."),o.version>=43?e.srcObject=t.srcObject:e.src=t.src}};t.exports={shimMediaStream:s.shimMediaStream,shimOnTrack:s.shimOnTrack,shimSourceObject:s.shimSourceObject,shimPeerConnection:s.shimPeerConnection,shimGetUserMedia:e("./getusermedia"),attachMediaStream:s.attachMediaStream,reattachMediaStream:s.reattachMediaStream}},{"../utils.js":235,"./getusermedia":229}],229:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"==typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),s={},s[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"===r(t.video)){var o=t.video.facingMode;if((o=o&&("object"===(void 0===o?"undefined":r(o))?o:{ideal:o}))&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===o.exact||"environment"===o.ideal))return navigator.mediaDevices.enumerateDevices().then(function(r){r=r.filter(function(e){return"videoinput"===e.kind});var s=r.find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||r.length&&r[r.length-1];return s&&(t.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),t.video=e(t.video),i("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return i("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=o;var s=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:s,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return s(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":235}],230:[function(e,t,n){"use strict";var r=e("sdp"),i=e("../utils").log,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i);break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(s){var a=new Event("icecandidate");a.candidate={sdpMid:e,sdpMLineIndex:t};var c=s.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),a.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,a.candidate.candidate=r.writeCandidate(c));var l=r.splitSections(n.localDescription.sdp);-1===a.candidate.candidate.indexOf("typ endOfCandidates")?l[a.candidate.sdpMLineIndex+1]+="a="+a.candidate.candidate+"\r\n":l[a.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=l.join("");var f=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(a),u&&f&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(a),null!==n.onicecandidate&&n.onicecandidate(a),f&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var s=new RTCDtlsTransport(o);return s.ondtlsstatechange=function(){n._updateConnectionState()},s.onerror=function(){s.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:s}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&(i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var s=i.transceivers[t],a=s.iceGatherer,c=s.iceTransport,u=s.dtlsTransport,l=s.localCapabilities,f=s.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]){var p=r.getIceParameters(e,n);if(o){var h=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});h.length&&c.setRemoteCandidates(h)}var d=r.getDtlsParameters(e,n);o&&(d.role="server"),i.usingBundle&&0!==t||(c.start(a,p,o?"controlling":"controlled"),u.start(d));var g=i._getCommonCapabilities(l,f);i._transceive(s,g.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var a=arguments[1];window.setTimeout(function(){a(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){s||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),s=o.shift(),a=r.matchPrefix(s,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(s,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u,l,f,p,h,d,g,m,v,y,b,_,w=r.splitLines(o),S=w[0].substr(2).split(" "),C=S[0],x="0"===S[1],E=r.getDirection(o,s),k=r.parseRtpParameters(o);x||(b=r.getIceParameters(o,s),_=r.getDtlsParameters(o,s),_.role="client"),m=r.parseRtpEncodingParameters(o);var T=r.matchPrefix(o,"a=mid:");T=T.length?T[0].substr(6):r.generateIdentifier();var j,R=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];R&&(j=R.value);var O=r.matchPrefix(o,"a=end-of-candidates").length>0,A=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||x)"answer"!==e.type||x||(u=t.transceivers[c],l=u.iceGatherer,f=u.iceTransport,p=u.dtlsTransport,h=u.rtpSender,d=u.rtpReceiver,g=u.sendEncodingParameters,v=u.localCapabilities,t.transceivers[c].recvEncodingParameters=m,t.transceivers[c].remoteCapabilities=k,t.transceivers[c].cname=j,(a||O)&&A.length&&f.setRemoteCandidates(A),t.usingBundle&&0!==c||(f.start(l,b,"controlling"),p.start(_)),t._transceive(u,"sendrecv"===E||"recvonly"===E,"sendrecv"===E||"sendonly"===E),!d||"sendrecv"!==E&&"sendonly"!==E?delete u.rtpReceiver:(y=d.track,i.push([y,d]),n.addTrack(y)));else{var P=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(T,c);if(O&&P.iceTransport.setRemoteCandidates(A),v=RTCRtpReceiver.getCapabilities(C),g=[{ssrc:1001*(2*c+2)}],d=new RTCRtpReceiver(P.dtlsTransport,C),y=d.track,i.push([y,d]),n.addTrack(y),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var I=t.localStreams[0].getTracks()[c];h=new RTCRtpSender(I,P.dtlsTransport)}t.transceivers[c]={iceGatherer:P.iceGatherer,iceTransport:P.iceTransport,dtlsTransport:P.dtlsTransport,localCapabilities:v,remoteCapabilities:k,rtpSender:h,rtpReceiver:d,kind:C,mid:T,cname:j,sendEncodingParameters:g,recvEncodingParameters:m},t._transceive(t.transceivers[c],!1,"sendrecv"===E||"sendonly"===E)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],s=new Event("track");s.track=i,s.receiver=o,s.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(s)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var s=r.writeSessionBoilerplate(),a=[];n.forEach(function(t,n){var i,o,s=t.track,c=t.kind,u=r.generateIdentifier(),l=e.usingBundle&&n>0?{iceGatherer:a[0].iceGatherer,iceTransport:a[0].iceTransport,dtlsTransport:a[0].dtlsTransport}:e._createIceAndDtlsTransports(u,n),f=RTCRtpSender.getCapabilities(c),p=[{ssrc:1001*(2*n+1)}];s&&(i=new RTCRtpSender(s,l.dtlsTransport)),t.wantReceive&&(o=new RTCRtpReceiver(l.dtlsTransport,c)),a[n]={iceGatherer:l.iceGatherer,iceTransport:l.iceTransport,dtlsTransport:l.dtlsTransport,localCapabilities:f,remoteCapabilities:null,rtpSender:i,rtpReceiver:o,kind:c,mid:u,sendEncodingParameters:p,recvEncodingParameters:null}}),this.usingBundle&&(s+="a=group:BUNDLE "+a.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=a[n];s+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=a;var c=new RTCSessionDescription({type:"offer",sdp:s});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&0===o.port)return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var s=r.splitSections(this.remoteDescription.sdp);s[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}
return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}},attachMediaStream:function(e,t){i("DEPRECATED, attachMediaStream will soon be removed."),e.srcObject=t},reattachMediaStream:function(e,t){i("DEPRECATED, reattachMediaStream will soon be removed."),e.srcObject=t.srcObject}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia"),attachMediaStream:o.attachMediaStream,reattachMediaStream:o.reattachMediaStream}},{"../utils":235,"./getusermedia":231,sdp:196}],231:[function(e,t,n){"use strict";t.exports=function(){var e=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(n){return t(n).catch(function(t){return Promise.reject(e(t))})}}},{}],232:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils").log,o=e("../utils").browserDetails,s={shimOnTrack:function(){"object"!==("undefined"==typeof window?"undefined":r(window))||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===("undefined"==typeof window?"undefined":r(window))&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"===("undefined"==typeof window?"undefined":r(window))&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(o.version<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var s=0;s<i.urls.length;s++){var a={url:i.urls[s]};0===i.urls[s].indexOf("turn")&&(a.username=i.username,a.credential=i.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}},attachMediaStream:function(e,t){i("DEPRECATED, attachMediaStream will soon be removed."),e.srcObject=t},reattachMediaStream:function(e,t){i("DEPRECATED, reattachMediaStream will soon be removed."),e.srcObject=t.srcObject}};t.exports={shimOnTrack:s.shimOnTrack,shimSourceObject:s.shimSourceObject,shimPeerConnection:s.shimPeerConnection,shimGetUserMedia:e("./getusermedia"),attachMediaStream:s.attachMediaStream,reattachMediaStream:s.reattachMediaStream}},{"../utils":235,"./getusermedia":233}],233:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils").log,o=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,s){var a=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===r(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof i.ideal?o[n]={min:i.ideal,max:i.ideal}:o[n]=i.ideal,e.advanced.push(o),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),o.version<38&&(i("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),i("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){s(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},o.version<41){var s=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return s().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(o.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){if(o.version<44)return t(e,n,r);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(e).then(n,r)}}},{"../utils":235}],234:[function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};t.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],235:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=!0,o={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,e.minVersion=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),e.minVersion=31;else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),e.minVersion=38;else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1),e.minVersion=602}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),e.minVersion=10547}return e.version<e.minVersion&&o.log("Browser: "+e.browser+" Version: "+e.version+" < minimum supported version: "+e.minVersion+"\n some things might not work!"),e}};t.exports={log:o.log,disableLog:o.disableLog,browserDetails:o.detectBrowser(),extractVersion:o.extractVersion}},{}],236:[function(e,t,n){var r=e("./trim"),i=e("./decapitalize");t.exports=function(e,t){return e=r(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),!0===t?i(e):e}},{"./decapitalize":245,"./trim":298}],237:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},{"./helper/makeString":255}],238:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e){return r(e).split("")}},{"./helper/makeString":255}],239:[function(e,t,n){t.exports=function(e,t){return null==e?[]:(e=String(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])}},{}],240:[function(e,t,n){var r=e("./capitalize"),i=e("./camelize"),o=e("./helper/makeString");t.exports=function(e){return e=o(e),r(i(e.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":236,"./capitalize":237,"./helper/makeString":255}],241:[function(e,t,n){var r=e("./trim");t.exports=function(e){return r(e).replace(/\s\s+/g," ")}},{"./trim":298}],242:[function(e,t,n){var r=e("./helper/makeString"),i="",o="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";i+=i.toUpperCase(),o+=o.toUpperCase(),o=o.split(""),i+="",o.push("ss"),t.exports=function(e){return r(e).replace(/.{1}/g,function(e){var t=i.indexOf(e);return-1===t?e:o[t]})}},{"./helper/makeString":255}],243:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){return e=r(e),t=r(t),0===e.length||0===t.length?0:e.split(t).length-1}},{"./helper/makeString":255}],244:[function(e,t,n){var r=e("./trim");t.exports=function(e){return r(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":298}],245:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e){return e=r(e),e.charAt(0).toLowerCase()+e.slice(1)}},{"./helper/makeString":255}],246:[function(e,t,n){function r(e){for(var t=e.match(/^[\s\\t]*/gm),n=t[0].length,r=1;r<t.length;r++)n=Math.min(t[r].length,n);return n}var i=e("./helper/makeString");t.exports=function(e,t){e=i(e);var n,o=r(e);return 0===o?e:(n="string"==typeof t?new RegExp("^"+t,"gm"):new RegExp("^[ \\t]{"+o+"}","gm"),e.replace(n,""))}},{"./helper/makeString":255}],247:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/toPositive");t.exports=function(e,t,n){return e=r(e),t=""+t,(n=void 0===n?e.length-t.length:Math.min(i(n),e.length)-t.length)>=0&&e.indexOf(t,n)===n}},{"./helper/makeString":255,"./helper/toPositive":257}],248:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/escapeChars"),o="[";for(var s in i)o+=s;o+="]";var a=new RegExp(o,"g");t.exports=function(e){return r(e).replace(a,function(e){return"&"+i[e]+";"})}},{"./helper/escapeChars":252,"./helper/makeString":255}],249:[function(e,t,n){t.exports=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse|join|map|wrap)$/)&&(e[t]=this[t]);return e}},{}],250:[function(e,t,n){var r=e("./makeString");t.exports=function(e,t){return e=r(e),0===e.length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}},{"./makeString":255}],251:[function(e,t,n){var r=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},{"./escapeRegExp":253}],252:[function(e,t,n){var r={"":"cent","":"pound","":"yen","":"euro","":"copy","":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"};t.exports=r},{}],253:[function(e,t,n){var r=e("./makeString");t.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":255}],254:[function(e,t,n){var r={nbsp:" ",cent:"",pound:"",yen:"",euro:"",copy:"",reg:"",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};t.exports=r},{}],255:[function(e,t,n){t.exports=function(e){return null==e?"":""+e}},{}],256:[function(e,t,n){t.exports=function(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}},{}],257:[function(e,t,n){t.exports=function(e){return e<0?0:+e||0}},{}],258:[function(e,t,n){var r=e("./capitalize"),i=e("./underscored"),o=e("./trim");t.exports=function(e){return r(o(i(e).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":237,"./trim":298,"./underscored":300}],259:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){return""===t||-1!==r(e).indexOf(t)}},{"./helper/makeString":255}],260:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._wrapped=e}function i(e,t){"function"==typeof t&&(r.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=t.apply(null,e);return"string"==typeof n?new r(n):n})}r.VERSION="3.3.4",r.isBlank=e("./isBlank"),r.stripTags=e("./stripTags"),r.capitalize=e("./capitalize"),r.decapitalize=e("./decapitalize"),r.chop=e("./chop"),r.trim=e("./trim"),r.clean=e("./clean"),r.cleanDiacritics=e("./cleanDiacritics"),r.count=e("./count"),r.chars=e("./chars"),r.swapCase=e("./swapCase"),r.escapeHTML=e("./escapeHTML"),r.unescapeHTML=e("./unescapeHTML"),r.splice=e("./splice"),r.insert=e("./insert"),r.replaceAll=e("./replaceAll"),r.include=e("./include"),r.join=e("./join"),r.lines=e("./lines"),r.dedent=e("./dedent"),r.reverse=e("./reverse"),r.startsWith=e("./startsWith"),r.endsWith=e("./endsWith"),r.pred=e("./pred"),r.succ=e("./succ"),r.titleize=e("./titleize"),r.camelize=e("./camelize"),r.underscored=e("./underscored"),r.dasherize=e("./dasherize"),r.classify=e("./classify"),r.humanize=e("./humanize"),r.ltrim=e("./ltrim"),r.rtrim=e("./rtrim"),r.truncate=e("./truncate"),r.prune=e("./prune"),r.words=e("./words"),r.pad=e("./pad"),r.lpad=e("./lpad"),r.rpad=e("./rpad"),r.lrpad=e("./lrpad"),r.sprintf=e("./sprintf"),r.vsprintf=e("./vsprintf"),r.toNumber=e("./toNumber"),r.numberFormat=e("./numberFormat"),r.strRight=e("./strRight"),r.strRightBack=e("./strRightBack"),r.strLeft=e("./strLeft"),r.strLeftBack=e("./strLeftBack"),r.toSentence=e("./toSentence"),r.toSentenceSerial=e("./toSentenceSerial"),r.slugify=e("./slugify"),r.surround=e("./surround"),r.quote=e("./quote"),r.unquote=e("./unquote"),r.repeat=e("./repeat"),r.naturalCmp=e("./naturalCmp"),r.levenshtein=e("./levenshtein"),r.toBoolean=e("./toBoolean"),r.exports=e("./exports"),r.escapeRegExp=e("./helper/escapeRegExp"),r.wrap=e("./wrap"),r.map=e("./map"),r.strip=r.trim,r.lstrip=r.ltrim,r.rstrip=r.rtrim,r.center=r.lrpad,r.rjust=r.lpad,r.ljust=r.rpad,r.contains=r.include,r.q=r.quote,r.toBool=r.toBoolean,r.camelcase=r.camelize,r.mapChars=r.map,r.prototype={value:function(){return this._wrapped}};for(var o in r)i(o,r[o]);i("tap",function(e,t){return t(e)});var s=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var a in s)!function(e){i(e,function(t){var n=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,n)})}(s[a]);t.exports=r},{"./camelize":236,"./capitalize":237,"./chars":238,"./chop":239,"./classify":240,"./clean":241,"./cleanDiacritics":242,"./count":243,"./dasherize":244,"./decapitalize":245,"./dedent":246,"./endsWith":247,"./escapeHTML":248,"./exports":249,"./helper/escapeRegExp":253,"./humanize":258,"./include":259,"./insert":261,"./isBlank":262,"./join":263,"./levenshtein":264,"./lines":265,"./lpad":266,"./lrpad":267,"./ltrim":268,"./map":269,"./naturalCmp":270,"./numberFormat":271,"./pad":272,"./pred":273,"./prune":274,"./quote":275,"./repeat":276,"./replaceAll":277,"./reverse":278,"./rpad":279,"./rtrim":280,"./slugify":281,"./splice":282,"./sprintf":283,"./startsWith":284,"./strLeft":285,"./strLeftBack":286,"./strRight":287,"./strRightBack":288,"./stripTags":289,"./succ":290,"./surround":291,"./swapCase":292,"./titleize":293,"./toBoolean":294,"./toNumber":295,"./toSentence":296,"./toSentenceSerial":297,"./trim":298,"./truncate":299,"./underscored":300,"./unescapeHTML":301,"./unquote":302,"./vsprintf":303,"./words":304,"./wrap":305}],261:[function(e,t,n){var r=e("./splice");t.exports=function(e,t,n){return r(e,t,0,n)}},{"./splice":282}],262:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e){return/^\s*$/.test(r(e))}},{"./helper/makeString":255}],263:[function(e,t,n){var r=e("./helper/makeString"),i=[].slice;t.exports=function(){var e=i.call(arguments),t=e.shift();return e.join(r(t))}},{"./helper/makeString":255}],264:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){"use strict";if(e=r(e),t=r(t),e===t)return 0;if(!e||!t)return Math.max(e.length,t.length);for(var n=new Array(t.length+1),i=0;i<n.length;++i)n[i]=i;for(i=0;i<e.length;++i){for(var o=i+1,s=0;s<t.length;++s){var a=o;o=n[s]+(e.charAt(i)===t.charAt(s)?0:1);var c=a+1;o>c&&(o=c),c=n[s+1]+1,o>c&&(o=c),n[s]=a}n[s]=o}return o}},{"./helper/makeString":255}],265:[function(e,t,n){t.exports=function(e){return null==e?[]:String(e).split(/\r\n?|\n/)}},{}],266:[function(e,t,n){var r=e("./pad");t.exports=function(e,t,n){return r(e,t,n)}},{"./pad":272}],267:[function(e,t,n){var r=e("./pad");t.exports=function(e,t,n){return r(e,t,n,"both")}},{"./pad":272}],268:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),o=String.prototype.trimLeft;t.exports=function(e,t){return e=r(e),!t&&o?o.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+"),""))}},{"./helper/defaultToWhiteSpace":251,"./helper/makeString":255}],269:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){return e=r(e),0===e.length||"function"!=typeof t?e:e.replace(/./g,t)}},{"./helper/makeString":255}],270:[function(e,t,n){t.exports=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=/(\.\d+|\d+|\D+)/g,r=String(e).match(n),i=String(t).match(n),o=Math.min(r.length,i.length),s=0;s<o;s++){var a=r[s],c=i[s];if(a!==c){var u=+a,l=+c;return u===u&&l===l?u>l?1:-1:a<c?-1:1}}return r.length!=i.length?r.length-i.length:e<t?-1:1}},{}],271:[function(e,t,n){t.exports=function(e,t,n,r){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),r="string"==typeof r?r:",";var i=e.split("."),o=i[0],s=i[1]?(n||".")+i[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+s}},{}],272:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/strRepeat");t.exports=function(e,t,n,o){e=r(e),t=~~t;var s=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",o){case"right":return s=t-e.length,e+i(n,s);case"both":return s=t-e.length,i(n,Math.ceil(s/2))+e+i(n,Math.floor(s/2));default:return s=t-e.length,i(n,s)+e}}},{"./helper/makeString":255,"./helper/strRepeat":256}],273:[function(e,t,n){var r=e("./helper/adjacent");t.exports=function(e){return r(e,-1)}},{"./helper/adjacent":250}],274:[function(e,t,n){var r=e("./helper/makeString"),i=e("./rtrim");t.exports=function(e,t,n){if(e=r(e),t=~~t,n=null!=n?String(n):"...",e.length<=t)return e;var o=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,o);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):i(s.slice(0,s.length-1)),(s+n).length>e.length?e:e.slice(0,s.length)+n}},{"./helper/makeString":255,"./rtrim":280}],275:[function(e,t,n){var r=e("./surround");t.exports=function(e,t){return r(e,t||'"')}},{"./surround":291}],276:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/strRepeat");t.exports=function(e,t,n){if(e=r(e),t=~~t,null==n)return i(e,t);for(var o=[];t>0;o[--t]=e);return o.join(n)}},{"./helper/makeString":255,"./helper/strRepeat":256}],277:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t,n,i){var o=!0===i?"gi":"g",s=new RegExp(t,o);return r(e).replace(s,n)}},{"./helper/makeString":255}],278:[function(e,t,n){var r=e("./chars");t.exports=function(e){return r(e).reverse().join("")}},{"./chars":238}],279:[function(e,t,n){var r=e("./pad");t.exports=function(e,t,n){return r(e,t,n,"right")}},{"./pad":272}],280:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),o=String.prototype.trimRight;t.exports=function(e,t){return e=r(e),!t&&o?o.call(e):(t=i(t),e.replace(new RegExp(t+"+$"),""))}},{"./helper/defaultToWhiteSpace":251,"./helper/makeString":255}],281:[function(e,t,n){var r=e("./trim"),i=e("./dasherize"),o=e("./cleanDiacritics");t.exports=function(e){return r(i(o(e).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},{"./cleanDiacritics":242,"./dasherize":244,"./trim":298}],282:[function(e,t,n){var r=e("./chars");t.exports=function(e,t,n,i){var o=r(e);return o.splice(~~t,~~n,i),o.join("")}},{"./chars":238}],283:[function(e,t,n){var r=e("util-deprecate");t.exports=r(e("sprintf-js").sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":222,"util-deprecate":306}],284:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/toPositive");t.exports=function(e,t,n){return e=r(e),t=""+t,n=null==n?0:Math.min(i(n),e.length),e.lastIndexOf(t,n)===n}},{"./helper/makeString":255,"./helper/toPositive":257}],285:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=t?e.indexOf(t):-1;return~n?e.slice(0,n):e}},{"./helper/makeString":255}],286:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=e.lastIndexOf(t);return~n?e.slice(0,n):e}},{"./helper/makeString":255}],287:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=t?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},{"./helper/makeString":255}],288:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=t?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},{"./helper/makeString":255}],289:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e){return r(e).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":255}],290:[function(e,t,n){var r=e("./helper/adjacent");t.exports=function(e){return r(e,1)}},{"./helper/adjacent":250}],291:[function(e,t,n){t.exports=function(e,t){return[t,e,t].join("")}},{}],292:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e){return r(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})}},{"./helper/makeString":255}],293:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e){return r(e).toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})}},{"./helper/makeString":255}],294:[function(e,t,n){function r(e,t){var n,r,i=e.toLowerCase();for(t=[].concat(t),n=0;n<t.length;n+=1)if(r=t[n]){if(r.test&&r.test(e))return!0;if(r.toLowerCase()===i)return!0}}var i=e("./trim");t.exports=function(e,t,n){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:(e=i(e),!!r(e,t||["true","1"])||!r(e,n||["false","0"])&&void 0)}},{"./trim":298}],295:[function(e,t,n){t.exports=function(e,t){if(null==e)return 0;var n=Math.pow(10,isFinite(t)?t:0);return Math.round(e*n)/n}},{}],296:[function(e,t,n){var r=e("./rtrim");t.exports=function(e,t,n,i){t=t||", ",n=n||" and ";var o=e.slice(),s=o.pop();return e.length>2&&i&&(n=r(t)+n),o.length?o.join(t)+n+s:s}},{"./rtrim":280}],297:[function(e,t,n){var r=e("./toSentence");t.exports=function(e,t,n){return r(e,t,n,!0)}},{"./toSentence":296}],298:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/defaultToWhiteSpace"),o=String.prototype.trim;t.exports=function(e,t){return e=r(e),!t&&o?o.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":251,"./helper/makeString":255}],299:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t,n){return e=r(e),n=n||"...",t=~~t,e.length>t?e.slice(0,t)+n:e}},{"./helper/makeString":255}],300:[function(e,t,n){var r=e("./trim");t.exports=function(e){return r(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":298}],301:[function(e,t,n){var r=e("./helper/makeString"),i=e("./helper/htmlEntities");t.exports=function(e){return r(e).replace(/\&([^;]+);/g,function(e,t){var n;return t in i?i[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e})}},{"./helper/htmlEntities":254,"./helper/makeString":255}],302:[function(e,t,n){t.exports=function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e}},{}],303:[function(e,t,n){var r=e("util-deprecate");t.exports=r(e("sprintf-js").vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":222,"util-deprecate":306}],304:[function(e,t,n){var r=e("./isBlank"),i=e("./trim");t.exports=function(e,t){return r(e)?[]:i(e,t).split(t||/\s+/)}},{"./isBlank":262,"./trim":298}],305:[function(e,t,n){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=t||{};var n,i=t.width||75,o=t.seperator||"\n",s=t.cut||!1,a=t.preserveSpaces||!1,c=t.trailingSpaces||!1;if(i<=0)return e;if(s){var u=0;for(n="";u<e.length;)u%i==0&&u>0&&(n+=o),n+=e.charAt(u),u++;if(c)for(;u%i>0;)n+=" ",u++;return n}var l=e.split(" "),f=0;for(n="";l.length>0;){if(1+l[0].length+f>i&&f>0){if(a)n+=" ",f++;else if(c)for(;f<i;)n+=" ",f++;n+=o,f=0}f>0&&(n+=" ",f++),n+=l[0],f+=l[0].length,l.shift()}if(c)for(;f<i;)n+=" ",f++;return n}},{"./helper/makeString":255}],306:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],307:[function(e,t,n){arguments[4][98][0].apply(n,arguments)},{dup:98}],308:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){return e&&"object"===(void 0===e?"undefined":r(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],309:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var o=u(e,t);if(o)return o;var s=Object.keys(t),g=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),E(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(t);if(0===s.length){if(k(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(S(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return l(t)}var v="",y=!1,_=["{","}"];if(d(t)&&(y=!0,_=["[","]"]),k(t)){v=" [Function"+(t.name?": "+t.name:"")+"]"}if(S(t)&&(v=" "+RegExp.prototype.toString.call(t)),x(t)&&(v=" "+Date.prototype.toUTCString.call(t)),E(t)&&(v=" "+l(t)),0===s.length&&(!y||0==t.length))return _[0]+v+_[1];if(r<0)return S(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=y?f(e,t,r,g,s):s.map(function(n){return p(e,t,r,g,n,y)}),e.seen.pop(),h(w,v,_)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)A(t,String(s))?o.push(p(e,t,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}function p(e,t,n,r,i,o){var s,a,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),A(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=m(n)?c(e,u.value,null):c(e,u.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"===(void 0===e?"undefined":P(e))}function w(e){return void 0===e}function S(e){return C(e)&&"[object RegExp]"===j(e)}function C(e){return"object"===(void 0===e?"undefined":P(e))&&null!==e}function x(e){return C(e)&&"[object Date]"===j(e)}function E(e){return C(e)&&("[object Error]"===j(e)||e instanceof Error)}function k(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":P(e))||void 0===e}function j(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}function O(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":")
;return[e.getDate(),L[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<o;a=r[++n])m(a)||!C(a)?s+=" "+a:s+=" "+i(a);return s},n.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var s=!1;return o};var D,M={};n.debuglog=function(e){if(w(D)&&(D=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var r=t.pid;M[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else M[e]=function(){};return M[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=v,n.isNumber=y,n.isString=b,n.isSymbol=_,n.isUndefined=w,n.isRegExp=S,n.isObject=C,n.isDate=x,n.isError=E,n.isFunction=k,n.isPrimitive=T,n.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":308,_process:168,inherits:307}],310:[function(e,t,n){arguments[4][227][0].apply(n,arguments)},{"./chrome/chrome_shim":311,"./edge/edge_shim":313,"./firefox/firefox_shim":315,"./safari/safari_shim":317,"./utils":318,dup:227}],311:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils.js").log,o=e("../utils.js").browserDetails,s={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!==("undefined"==typeof window?"undefined":r(window))||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===("undefined"==typeof window?"undefined":r(window))&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;if(this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),!e)return void(this.src="");this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){i("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),o=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=this,s=arguments;if(arguments.length>0&&"function"==typeof e)return o(e,t);var a=function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},c=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};if(arguments.length>=2){var u=function(e){s[1](c(a(e)))};return o.apply(this,[u,arguments[0]])}return new Promise(function(t,n){1===s.length&&"object"===(void 0===e?"undefined":r(e))?o.apply(i,[function(e){t(c(a(e)))},n]):o.apply(i,[function(e){t(c(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===r(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),o.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};t.exports={shimMediaStream:s.shimMediaStream,shimOnTrack:s.shimOnTrack,shimSourceObject:s.shimSourceObject,shimPeerConnection:s.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":318,"./getusermedia":312}],312:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var s={};"number"==typeof i.ideal?(s[o("min",n)]=i.ideal,t.optional.push(s),s={},s[o("max",n)]=i.ideal,t.optional.push(s)):(s[o("",n)]=i.ideal,t.optional.push(s))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if(t=JSON.parse(JSON.stringify(t)),t&&t.audio&&(t.audio=e(t.audio)),t&&"object"===r(t.video)){var o=t.video.facingMode;if((o=o&&("object"===(void 0===o?"undefined":r(o))?o:{ideal:o}))&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===o.exact||"environment"===o.ideal))return navigator.mediaDevices.enumerateDevices().then(function(r){r=r.filter(function(e){return"videoinput"===e.kind});var s=r.find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||r.length&&r[r.length-1];return s&&(t.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),t.video=e(t.video),i("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return i("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},o=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};navigator.getUserMedia=o;var s=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:s,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return a(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return s(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":318}],313:[function(e,t,n){"use strict";var r=e("sdp"),i=e("../utils").browserDetails,o={shimPeerConnection:function(){if(window.RTCIceGatherer){window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e});var e=Object.getOwnPropertyDescriptor(MediaStreamTrack.prototype,"enabled");Object.defineProperty(MediaStreamTrack.prototype,"enabled",{set:function(t){e.set.call(this,t);var n=new Event("enabled");n.enabled=t,this.dispatchEvent(n)}})}window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")||0===e.indexOf("stun:")&&i.version>=14393})[0])}return!1})}this._config=e,this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){if(n.candidate&&0!==Object.keys(n.candidate).length)-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");else for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state})&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.getConfiguration=function(){return this._config},window.RTCPeerConnection.prototype.addStream=function(e){var t=e.clone();e.getTracks().forEach(function(e,n){var r=t.getTracks()[n];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),this.localStreams.push(t),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate){i.numChannels=Math.min(e.numChannels,i.numChannels),n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(s){var a=new Event("icecandidate");a.candidate={sdpMid:e,sdpMLineIndex:t};var c=s.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),a.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,a.candidate.candidate=r.writeCandidate(c));var l=r.splitSections(n.localDescription.sdp);-1===a.candidate.candidate.indexOf("typ endOfCandidates")?l[a.candidate.sdpMLineIndex+1]+="a="+a.candidate.candidate+"\r\n":l[a.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=l.join("");var f=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(a),u&&f&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(a),null!==n.onicecandidate&&n.onicecandidate(a),f&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var s=new RTCDtlsTransport(o);return s.ondtlsstatechange=function(){n._updateConnectionState()},s.onerror=function(){s.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:s}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&("video"===e.kind&&e.recvEncodingParameters&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var s=i.transceivers[t],a=s.iceGatherer,c=s.iceTransport,u=s.dtlsTransport,l=s.localCapabilities,f=s.remoteCapabilities;if("0"!==e.split("\n",1)[0].split(" ",2)[1]&&!s.isDatachannel){var p=r.getIceParameters(e,n);if(o){var h=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});h.length&&c.setRemoteCandidates(h)}var d=r.getDtlsParameters(e,n);o&&(d.role="server"),i.usingBundle&&0!==t||(c.start(a,p,o?"controlling":"controlled"),u.start(d));var g=i._getCommonCapabilities(l,f);i._transceive(s,g.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var s=arguments.length>1&&"function"==typeof arguments[1];if(s){var a=arguments[1];window.setTimeout(function(){a(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){s||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),s=o.shift(),a=r.matchPrefix(s,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(s,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),l=u[0].substr(2).split(" "),f=l[0],p="0"===l[1],h=r.getDirection(o,s),d=r.matchPrefix(o,"a=mid:");if(d=d.length?d[0].substr(6):r.generateIdentifier(),"application"===f&&"DTLS/SCTP"===l[2])return void(t.transceivers[c]={mid:d,isDatachannel:!0});var g,m,v,y,b,_,w,S,C,x,E,k,T=r.parseRtpParameters(o);p||(E=r.getIceParameters(o,s),k=r.getDtlsParameters(o,s),k.role="client"),S=r.parseRtpEncodingParameters(o);var j,R=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];R&&(j=R.value);var O=r.matchPrefix(o,"a=end-of-candidates",s).length>0,A=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||p)"answer"!==e.type||p||(g=t.transceivers[c],m=g.iceGatherer,v=g.iceTransport,y=g.dtlsTransport,b=g.rtpSender,_=g.rtpReceiver,w=g.sendEncodingParameters,C=g.localCapabilities,t.transceivers[c].recvEncodingParameters=S,t.transceivers[c].remoteCapabilities=T,t.transceivers[c].cname=j,(a||O)&&A.length&&v.setRemoteCandidates(A),t.usingBundle&&0!==c||(v.start(m,E,"controlling"),y.start(k)),t._transceive(g,"sendrecv"===h||"recvonly"===h,"sendrecv"===h||"sendonly"===h),!_||"sendrecv"!==h&&"sendonly"!==h?delete g.rtpReceiver:(x=_.track,i.push([x,_]),n.addTrack(x)));else{var P=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(d,c);if(O&&P.iceTransport.setRemoteCandidates(A),C=RTCRtpReceiver.getCapabilities(f),C.codecs=C.codecs.filter(function(e){return"rtx"!==e.name}),w=[{ssrc:1001*(2*c+2)}],_=new RTCRtpReceiver(P.dtlsTransport,f),x=_.track,i.push([x,_]),n.addTrack(x),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c){var I;"audio"===f?I=t.localStreams[0].getAudioTracks()[0]:"video"===f&&(I=t.localStreams[0].getVideoTracks()[0]),I&&(b=new RTCRtpSender(I,P.dtlsTransport))}t.transceivers[c]={iceGatherer:P.iceGatherer,iceTransport:P.iceTransport,dtlsTransport:P.dtlsTransport,localCapabilities:C,remoteCapabilities:T,rtpSender:b,rtpReceiver:_,kind:f,mid:d,cname:j,sendEncodingParameters:w,recvEncodingParameters:S},t._transceive(t.transceivers[c],!1,"sendrecv"===h||"sendonly"===h)}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],s=new Event("track");s.track=i,s.receiver=o,s.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(s)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t=this,n={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n.new>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this.dispatchEvent(r),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(r)}},window.RTCPeerConnection.prototype.createOffer=function(){var e=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var t;1===arguments.length&&"function"!=typeof arguments[0]?t=arguments[0]:3===arguments.length&&(t=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),t){if(t.mandatory||t.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==t.offerToReceiveAudio&&(i=t.offerToReceiveAudio),void 0!==t.offerToReceiveVideo&&(o=t.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var s=r.writeSessionBoilerplate(),a=[];n.forEach(function(t,n){var i=t.track,o=t.kind,s=r.generateIdentifier(),c=e.usingBundle&&n>0?{iceGatherer:a[0].iceGatherer,iceTransport:a[0].iceTransport,dtlsTransport:a[0].dtlsTransport}:e._createIceAndDtlsTransports(s,n),u=RTCRtpSender.getCapabilities(o);u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name}),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var l,f,p=[{ssrc:1001*(2*n+1)}];i&&(l=new RTCRtpSender(i,c.dtlsTransport)),t.wantReceive&&(f=new RTCRtpReceiver(c.dtlsTransport,o)),a[n]={iceGatherer:c.iceGatherer,iceTransport:c.iceTransport,dtlsTransport:c.dtlsTransport,localCapabilities:u,remoteCapabilities:null,rtpSender:l,rtpReceiver:f,kind:o,mid:s,sendEncodingParameters:p,recvEncodingParameters:null}}),this.usingBundle&&(s+="a=group:BUNDLE "+a.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(t,n){var i=a[n];s+=r.writeMediaSection(i,i.localCapabilities,"offer",e.localStreams[0])}),this._pendingOffer=a;var c=new RTCSessionDescription({type:"offer",sdp:s});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)return void(t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n");var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(e){var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var s=r.splitSections(this.remoteDescription.sdp);s[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}else this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":318,"./getusermedia":314,sdp:196}],314:[function(e,t,n){arguments[4][231][0].apply(n,arguments)},{dup:231}],315:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils").browserDetails,o={shimOnTrack:function(){"object"!==("undefined"==typeof window?"undefined":r(window))||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===("undefined"==typeof window?"undefined":r(window))&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"===("undefined"==typeof window?"undefined":r(window))&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(i.version<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var o=e.iceServers[r];if(o.hasOwnProperty("urls"))for(var s=0;s<o.urls.length;s++){var a={url:o.urls[s]};0===o.urls[s].indexOf("turn")&&(a.username=o.username,a.credential=o.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;if(RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?e.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())},i.version<48){var t=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},n=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,r,i){return n.apply(this,[e||null]).then(function(e){return t(e)}).then(r,i)}}}}};t.exports={shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":318,"./getusermedia":316}],316:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../utils").log,o=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,s){var a=function(e){
if("object"!==(void 0===e?"undefined":r(e))||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===r(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof i.ideal?o[n]={min:i.ideal,max:i.ideal}:o[n]=i.ideal,e.advanced.push(o),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),o.version<38&&(i("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),i("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){s(e(t))})},n=function(e){return new Promise(function(n,r){t(e,n,r)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:n,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},o.version<41){var s=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return s().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(o.version<49){var a=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return a(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){if(o.version<44)return t(e,n,r);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(e).then(n,r)}}},{"../utils":318}],317:[function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};t.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],318:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=!0,o={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={};if(e.browser=null,e.version=null,"undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};t.exports={log:o.log,disableLog:o.disableLog,browserDetails:o.detectBrowser(),extractVersion:o.extractVersion}},{}],319:[function(e,t,n){var r,i;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,s=window.mozRTCIceCandidate||window.RTCIceCandidate,a=window.mozRTCSessionDescription||window.RTCSessionDescription,c=window.webkitMediaStream||window.MediaStream,u="https:"===window.location.protocol&&("webkit"===r&&i>=26||"moz"===r&&i>=33),l=window.AudioContext||window.webkitAudioContext,f=document.createElement("video"),p=f&&f.canPlayType&&"probably"===f.canPlayType('video/webm; codecs="vp8", vorbis'),h=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:i,support:!!o&&p&&!!h,supportRTCPeerConnection:!!o,supportVp8:p,supportGetUserMedia:!!h,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,dataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),webAudio:!(!l||!l.prototype.createMediaStreamSource),mediaStream:!(!c||!c.prototype.removeTrack),screenSharing:!!u,AudioContext:l,PeerConnection:o,SessionDescription:a,IceCandidate:s,MediaStream:c,getUserMedia:h}},{}],320:[function(e,t,n){function r(){}t.exports=r,r.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,n){this.callbacks=this.callbacks||{};var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},t.once=function(e,t,n){function r(){i.off(e,r),a.apply(this,arguments)}var i=this,o=3===arguments.length,s=o?arguments[1]:void 0,a=o?arguments[2]:arguments[1];return this.on(e,s,r),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,n,r,i;for(t in this.callbacks)for(i=this.callbacks[t],n=0,r=i.length;n<r;n++)i[n]._groupName===e&&(i.splice(n,1),n--,r--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(n=r.indexOf(t),r.splice(n,1),0===r.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,n,r,i=[].slice.call(arguments,1),o=this.callbacks[e],s=this.getWildcardCallbacks(e);if(o)for(r=o.slice(),t=0,n=r.length;t<n&&r[t];++t)r[t].apply(this,i);if(s)for(n=s.length,r=s.slice(),t=0,n=r.length;t<n&&r[t];++t)r[t].apply(this,[e].concat(i));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}},r.mixin(r)},{}],321:[function(t,n,r){(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){function s(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function a(e){for(var t,n=e.length,r=-1,i="";++r<n;)t=e[r],t>65535&&(t-=65536,i+=_(t>>>10&1023|55296),t=56320|1023&t),i+=_(t);return i}function c(e,t){return _(e>>t&63|128)}function u(e){if(0==(4294967168&e))return _(e);var t="";return 0==(4294965248&e)?t=_(e>>6&31|192):0==(4294901760&e)?(t=_(e>>12&15|224),t+=c(e,6)):0==(4292870144&e)&&(t=_(e>>18&7|240),t+=c(e,12),t+=c(e,6)),t+=_(63&e|128)}function l(e){for(var t,n=s(e),r=n.length,i=-1,o="";++i<r;)t=n[i],o+=u(t);return o}function f(){if(b>=y)throw Error("Invalid byte index");var e=255&v[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,n,r,i;if(b>y)throw Error("Invalid byte index");if(b==y)return!1;if(e=255&v[b],b++,0==(128&e))return e;if(192==(224&e)){var t=f();if((i=(31&e)<<6|t)>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=f(),n=f(),(i=(15&e)<<12|t<<6|n)>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=f(),n=f(),r=f(),(i=(15&e)<<18|t<<12|n<<6|r)>=65536&&i<=1114111))return i;throw Error("Invalid WTF-8 detected")}function h(e){v=s(e),y=v.length,b=0;for(var t,n=[];!1!==(t=p());)n.push(t);return a(n)}var d="object"==(void 0===r?"undefined":i(r))&&r,g="object"==(void 0===n?"undefined":i(n))&&n&&n.exports==d&&n,m="object"==(void 0===t?"undefined":i(t))&&t;m.global!==m&&m.window!==m||(o=m);var v,y,b,_=String.fromCharCode,w={version:"1.0.0",encode:l,decode:h};if("function"==typeof e&&"object"==i(e.amd)&&e.amd)e(function(){return w});else if(d&&!d.nodeType)if(g)g.exports=w;else{var S={},C=S.hasOwnProperty;for(var x in w)C.call(w,x)&&(d[x]=w[x])}else o.wtf8=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],322:[function(e,t,n){"use strict";function r(e,t){return e?e+"@"+t:t}function i(e,t,n){return n?r(e,t)+"/"+n:r(e,t)}var o=e("./lib/stringprep"),s=/^[\x00-\x7F]*$/;n.prep=function(e){var t=e.local,s=e.domain,a=e.resource,c=t;return t&&(t=o.nodeprep(t),c=n.unescape(t)),a&&(a=o.resourceprep(a)),"."===s[s.length-1]&&(s=s.slice(0,s.length-1)),s=o.nameprep(s.split(".").map(o.toUnicode).join(".")),{prepped:e.prepped||o.available,local:t,domain:s,resource:a,bare:r(t,s),full:i(t,s,a),unescapedLocal:c,unescapedBare:r(c,s),unescapedFull:i(c,s,a)}},n.parse=function(e,t){var r="",i="",o="";t=t||s.test(e);var a=e.indexOf("/");a>0&&(o=e.slice(a+1),e=e.slice(0,a));var c=e.indexOf("@");c>0&&(r=e.slice(0,c),e=e.slice(c+1)),i=e;var u=n.prep({local:r,domain:i,resource:o});return u.prepped=u.prepped||t,u},n.equal=function(e,t,r){return e=new n.JID(e),t=new n.JID(t),2===arguments.length&&(r=!0),e.local===t.local&&e.domain===t.domain&&e.resource===t.resource&&(!r||e.prepped&&t.prepped)},n.equalBare=function(e,t,r){return e=new n.JID(e),t=new n.JID(t),2===arguments.length&&(r=!0),e.local===t.local&&e.domain===t.domain&&(!r||e.prepped&&t.prepped)},n.isBare=function(e){return e=new n.JID(e),!!!e.resource},n.isFull=function(e){return e=new n.JID(e),!!e.resource},n.escape=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\5c/g,"\\5c5c").replace(/\\20/g,"\\5c20").replace(/\\22/g,"\\5c22").replace(/\\26/g,"\\5c26").replace(/\\27/g,"\\5c27").replace(/\\2f/g,"\\5c2f").replace(/\\3a/g,"\\5c3a").replace(/\\3c/g,"\\5c3c").replace(/\\3e/g,"\\5c3e").replace(/\\40/g,"\\5c40").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},n.unescape=function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},n.create=function(e,t,r){return new n.JID(e,t,r)},n.JID=function(e,t,r){var i={};if(!e||t||r)if(t){var o=s.test(e)&&s.test(t);r&&(o=o&&s.test(r)),i=n.prep({local:n.escape(e),domain:t,resource:r,prepped:o})}else i={};else if("string"==typeof e)i=n.parse(e);else{if(!(e._isJID||e instanceof n.JID))throw new Error("Invalid argument type");i=e}this._isJID=!0,this.local=i.local||"",this.domain=i.domain||"",this.resource=i.resource||"",this.bare=i.bare||"",this.full=i.full||"",this.unescapedLocal=i.unescapedLocal||"",this.unescapedBare=i.unescapedBare||"",this.unescapedFull=i.unescapedFull||"",this.prepped=i.prepped},n.JID.prototype.toString=function(){return this.full},n.JID.prototype.toJSON=function(){return this.full}},{"./lib/stringprep":323}],323:[function(e,t,n){"use strict";var r=e("punycode");n.available=!1,n.toUnicode=r.toUnicode,n.nameprep=function(e){return e.toLowerCase()},n.nodeprep=function(e){return e.toLowerCase()},n.resourceprep=function(e){return e}},{punycode:169}],324:[function(e,t,n){"use strict";function r(e){var t="";do{t=a[e%c]+t,e=Math.floor(e/c)}while(e>0);return t}function i(e){var t=0;for(f=0;f<e.length;f++)t=t*c+u[e.charAt(f)];return t}function o(){var e=r(+new Date);return e!==s?(l=0,s=e):e+"."+r(l++)}for(var s,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),c=64,u={},l=0,f=0;f<c;f++)u[a[f]]=f;o.encode=r,o.decode=i,t.exports=o},{}],"extend-helper":[function(e,t,n){t.exports={extends:function(e,t){return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),e.__super__=t.prototype}}},{}],"socket.io-client":[function(e,t,n){function r(e,t){"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var n,r=s(e),a=r.source,f=r.id,p=r.path,h=l[f]&&p in l[f].nsps,d=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return d?(u("ignoring socket cache for %s",a),n=c(a,t)):(l[f]||(u("new io instance for %s",a),l[f]=c(a,t)),n=l[f]),r.query&&!t.query?t.query=r.query:t&&"object"===o(t.query)&&(t.query=i(t.query)),n.socket(r.path,t)}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("./url"),a=e("socket.io-parser"),c=e("./manager"),u=e("debug")("socket.io-client");t.exports=n=r;var l=n.managers={};n.protocol=a.protocol,n.connect=r,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":206,"./socket":208,"./url":209,debug:211,"socket.io-parser":215}]},{},[18])}}();
//# sourceMappingURL=/realtime/v1/lib/realtime.js.map